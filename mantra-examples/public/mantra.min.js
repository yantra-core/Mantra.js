!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MANTRA=t()}(function(){return function r(o,i,a){function c(e,t){if(!i[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(s)return s(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=i[e]={exports:{}},o[e][0].call(n.exports,function(t){return c(o[e][1][t]||t)},n,n.exports,r,o,i,a)}return i[e].exports}for(var s="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(r.key),r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n),e=(t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t=function(t){var e=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t);var n,r=c(o);function o(t,e){if(this instanceof o)return(t=r.call(this,t,e)).entityActions=new Map,t;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"recordAction",value:function(t,e){var n=this.entityActions.get(t)||new Map;n.set(e,Date.now()),this.entityActions.set(t,n)}},{key:"getLastActionTime",value:function(t,e){t=this.entityActions.get(t);return t&&t.get(e)||0}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(((t=t("./Component.js"))&&t.__esModule?t:{default:t}).default);n.default=t},{"./Component.js":2}],2:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function n(t,e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.name=t,this.data={},this.game=e}var t,e,r;return t=n,(e=[{key:"set",value:function(t,e){var n=Array.isArray(t)?t[0]:t;if(this.game){var r=this.game.components.lockedProperties.get(n);if(this.isLocked(r,this.name))return}if(Array.isArray(t)){for(var o=this.data,i=0;i<t.length-1;i++)o[t[i]]||(o[t[i]]={}),o=o[t[i]];o[t[t.length-1]]=e}else this.data[t]=e;this.game&&this.game.entities&&this.game.entities.has(n)&&(this.game.entities.get(n)[this.name]=this.get(n))}},{key:"get",value:function(t){if(Array.isArray(t)){for(var e=this.data,n=0;n<t.length;n++){if(void 0===e[t[n]])return null;e=e[t[n]]}return e}return void 0===this.data[t]||null===this.data[t]?null:this.data[t]}},{key:"remove",value:function(t){if(Array.isArray(t)){for(var e=this.data,n=0;n<t.length-1;n++){if(void 0===e[t[n]])return;e=e[t[n]]}delete e[t[t.length-1]]}else delete this.data[t]}},{key:"isLocked",value:function(t,e){if(!t)return!1;if(Array.isArray(e)){for(var n=t,r=0;r<e.length;r++){if(void 0===n[e[r]])return!1;n=n[e[r]]}return!0}return void 0!==t[e]}}])&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();n.default=r},{}],3:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(r.key),r)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n),e=(t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t=function(t){var e=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t);var n,r=c(o);function o(t,e){if(this instanceof o)return(t=r.call(this,t,e)).timers={},t;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"setTimer",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.timers[t]={startTime:Date.now(),duration:1e3*e,isInterval:n,completed:!1}}},{key:"getTimer",value:function(t){return this.timers[t]}},{key:"checkTimer",value:function(t){var e,n;return!!this.timers[t]&&(e=this.timers[t],n=Date.now(),!e.completed)&&n>=e.startTime+e.duration&&(e.isInterval?(this.resetTimer(t),"intervalCompleted"):e.completed=!0)}},{key:"resetTimer",value:function(t){this.timers[t]&&(this.timers[t].startTime=Date.now(),this.timers[t].completed=!1)}},{key:"removeTimer",value:function(t){delete this.timers[t]}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(((t=t("./Component.js"))&&t.__esModule?t:{default:t}).default);n.default=t},{"./Component.js":2}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(t=t("../plugins/entity/lib/util/ensureColorInt.js"))&&t.__esModule?t:{default:t};function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?r(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function h(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){t=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===p(t)?t:String(t)}n.default=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.config={position:{x:0,y:0,z:0},rotation:0,size:{width:16,height:16,depth:16},offset:{x:0,y:0,z:0},meta:{}}}var t,n,r;return t=e,(n=[{key:"Entity",value:function(){return this}},{key:"id",value:function(t){return this.config.id=t,this}},{key:"type",value:function(t){return"TEXT"===(this.config.type=t)&&(this.config.body=!1),this}},{key:"name",value:function(t){return this.config.name=t,this}},{key:"kind",value:function(t){return this.config.kind=t,this}},{key:"startingPosition",value:function(t,e){return this.config.startingPosition={x:t,y:e},this}},{key:"body",value:function(){return this.config.body=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"friction",value:function(t){return this.config.friction=t,this.config.frictionStatic=t,this.config.frictionAir=t,this}},{key:"frictionStatic",value:function(t){return this.config.frictionStatic=t,this}},{key:"frictionAir",value:function(t){return this.config.frictionAir=t,this}},{key:"velocity",value:function(t,e){return this.config.velocity={x:t,y:e},this}},{key:"rotation",value:function(t){return this.config.rotation=t,this}},{key:"angle",value:function(t){t*=Math.PI/180;return this.config.rotation=t,this}},{key:"mass",value:function(t){return this.config.mass=t,this}},{key:"density",value:function(t){return this.config.density=t,this}},{key:"restitution",value:function(t){return this.config.restitution=t,this}},{key:"health",value:function(t){return this.config.health=t,this}},{key:"score",value:function(t){return this.config.score=t,this}},{key:"lifetime",value:function(t){return this.config.lifetime=t,this}},{key:"size",value:function(t,e,n){return this.config.size={width:t,height:e=void 0===e?t:e},this.config.size.depth=void 0!==n?n:e,this}},{key:"width",value:function(t){return this.config.size.width=t,this}},{key:"height",value:function(t){return this.config.size.height=t,this}},{key:"depth",value:function(t){return this.config.size.depth=t,this}},{key:"radius",value:function(t){return this.config.radius=t,this}},{key:"shape",value:function(t){return this.config.shape=t,this}},{key:"color",value:function(t){return this.config.color=(0,a.default)(t),this}},{key:"texture",value:function(t){return this.config.texture=t,this}},{key:"style",value:function(t){return this.config.style=t,this}},{key:"maxSpeed",value:function(t){return this.config.maxSpeed=t,this}},{key:"owner",value:function(t){return this.config.owner=t,this}},{key:"hasInventory",value:function(){return this.config.hasInventory=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"isSensor",value:function(){return this.config.isSensor=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"isStatic",value:function(){return this.config.isStatic=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"_addEventHandler",value:function(r,t){if("function"==typeof this.config[r]&&Array.isArray(this.config[r].handlers)){if(void 0===t)throw new Error("Handler for ".concat(r," event is undefined"));this.config[r].handlers.push(t)}else{var o;"boolean"==typeof t&&(this.config[r]=t),"function"==typeof t&&(o=[t],this.config[r]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{o.forEach(function(t){"function"==typeof t?t.apply(void 0,e):console.warn("handler is not a function",t,e)})}catch(t){console.error("Error in event handler for ".concat(r,":"),t)}},this.config[r].handlers=o)}return this}},{key:"pointerdown",value:function(t){return this._addEventHandler("pointerdown",t)}},{key:"pointerup",value:function(t){return this._addEventHandler("pointerup",t)}},{key:"pointermove",value:function(t){return this._addEventHandler("pointermove",t)}},{key:"pointerover",value:function(t){return this._addEventHandler("pointerover",t)}},{key:"pointerout",value:function(t){return this._addEventHandler("pointerout",t)}},{key:"pointerenter",value:function(t){return this._addEventHandler("pointerenter",t)}},{key:"pointerleave",value:function(t){return this._addEventHandler("pointerleave",t)}},{key:"collisionStart",value:function(t){return this._addEventHandler("collisionStart",t)}},{key:"collisionActive",value:function(t){return this._addEventHandler("collisionActive",t)}},{key:"collisionEnd",value:function(t){return this._addEventHandler("collisionEnd",t)}},{key:"onDrop",value:function(t){return this._addEventHandler("onDrop",t)}},{key:"onUpdate",value:function(t){return this._addEventHandler("update",t)}},{key:"afterItemCollected",value:function(t){return this._addEventHandler("afterItemCollected",t)}},{key:"afterRemoveEntity",value:function(t){return this._addEventHandler("afterRemoveEntity",t)}},{key:"afterCreateEntity",value:function(t){return this._addEventHandler("afterCreateEntity",t)}},{key:"afterUpdateEntity",value:function(t){return this._addEventHandler("afterUpdateEntity",t)}},{key:"sutra",value:function(t,e){return this.config.sutra={rules:t,config:e},this}},{key:"exit",value:function(t){return this.config.exit=t,this}},{key:"collectable",value:function(){return this.config.collectable=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"value",value:function(t){return this.config.value=t,this}},{key:"meta",value:function(t){return"object"===p(t)&&null!==t&&("object"===p(this.config.meta)&&null!==this.config.meta?this.config.meta=h(h({},this.config.meta),t):this.config.meta=t),this}},{key:"text",value:function(t){return this.config.text=t,this}},{key:"position",value:function(t,e,n){return"number"==typeof t&&(this.config.position.x=t),"number"==typeof e&&(this.config.position.y=e),"number"==typeof n&&(this.config.position.z=n),this}},{key:"x",value:function(t){return this.config.position.x=t,this}},{key:"y",value:function(t){return this.config.position.y=t,this}},{key:"z",value:function(t){return this.config.position.z=t,this}},{key:"items",value:function(t){return this.config.items=t,this}},{key:"container",value:function(t){return this.config.container=t,this}},{key:"origin",value:function(t){var e,n,r={center:{x:.5,y:.5},top:{x:.5,y:0},bottom:{x:.5,y:1},left:{x:0,y:.5},right:{x:1,y:.5},"top-left":{x:0,y:0},"top-right":{x:1,y:0},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1}}[t];return r?("object"===p(this.config.offset)&&null!==this.config.offset||(this.config.offset={x:0,y:0,z:0}),e=(n=this.config.size||{width:16,height:16,depth:16}).width*(r.x-.5),n=n.height*(r.y-.5),this.offset(this.config.offset.x+e,this.config.offset.y+n,this.config.offset.z)):console.warn("Invalid origin value: '".concat(t,"'. Valid origins are center, top, bottom, left, right, top-left, top-right, bottom-left, bottom-right.")),this}},{key:"layout",value:function(t,e){var n={x:(e=void 0===e?{width:window.innerWidth,height:window.innerHeight}:e).width/2,y:e.height/2},e={center:function(){return{x:0,y:0}},"top-left":function(){return{x:-n.x,y:-n.y}},"top-center":function(){return{x:0,y:-n.y}},"top-right":function(){return{x:n.x,y:-n.y}},"bottom-left":function(){return{x:-n.x,y:n.y}},"bottom-center":function(){return{x:0,y:n.y}},"bottom-right":function(){return{x:n.x,y:n.y}},"center-left":function(){return{x:-n.x,y:0}},"center-right":function(){return{x:n.x,y:0}}}[t];return e?(e=e(),this.position(e.x,e.y)):console.warn("Invalid global origin value: '".concat(t,"'. Valid global origins are center, top-left, top-center, top-right, bottom-left, bottom-center, bottom-right, center-left, center-right.")),this}},{key:"offset",value:function(t,e,n){return"object"===p(this.config.offset)&&null!==this.config.offset||(this.config.offset={}),"number"==typeof t&&(this.config.offset.x=t),"number"==typeof e&&(this.config.offset.y=e),"number"==typeof n&&(this.config.offset.z=n),this}},{key:"build",value:function(){return this.config}},{key:"clone",value:function(t){return this.config.clone=t,this}},{key:"repeat",value:function(t){return this.config.repeat=t,this}},{key:"createEntity",value:function(){function t(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;t.position.x+=t.offset.x*e,t.position.y+=t.offset.y*e,t.position.z+=t.offset.z*e}var e;if("number"==typeof this.config.clone){for(var n=[],r=0;r<this.config.clone;r++){var o=h({},this.config);t(o),n.push(this.game.createEntity(o))}return n}if("number"!=typeof this.config.repeat)return t(e=h({},this.config)),"PLAYER"!==(e=this.game.createEntity(e)).type&&"Player"!==e.type||this.game.setPlayerId(e.id),e;for(var i=[],a=0;a<this.config.repeat;a++){var c=h({},this.config);if(t(c,a),"object"===p(this.repeatModifiers)&&null!==this.repeatModifiers)for(var s=0,u=Object.entries(this.repeatModifiers);s<u.length;s++){var l=d(u[s],2),f=l[0],l=l[1];"function"==typeof l&&(c[f]=l(a,this.config.repeat,c[f]))}delete c.repeat,delete c.repeatModifiers,i.push(this.game.createEntity(c))}return i}},{key:"repeaters",value:function(t){return this.repeatModifiers=t,this}},{key:"mix",value:function(o){var t,i=this;for(t in o)!function(r){var t,e,n=o[r];"function"==typeof n?("function"!=typeof i.config[r]&&(i.config[r]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.config[r].handlers.forEach(function(t){return t.apply(void 0,e)})},i.config[r].handlers=[]),i.config[r].handlers.push(n)):"object"===p(n)&&i.config[r]&&"object"===p(i.config[r])?i.config[r]=h(h({},i.config[r]),n):("color"===r&&void 0!==i.config[r]&&(t=(0,a.default)(i.config[r]),e=(0,a.default)(n),n=((t>>16&255)+(e>>16&255)>>1&255)<<16|((t>>8&255)+(e>>8&255)>>1&255)<<8|(255&t)+(255&e)>>1&255),i.config[r]=n)}(t);return this}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{"../plugins/entity/lib/util/ensureColorInt.js":27}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var i=r(t("./Component/Component.js")),a=r(t("./lib/Game/construct.js")),s=r(t("./lib/Game/use.js")),u=r(t("./lib/Game/unload.js")),l=r(t("./lib/Game/start.js"));function r(t){return t&&t.__esModule?t:{default:t}}function O(){O=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==_(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(_(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function f(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function d(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){t=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_(t)?t:String(t)}n.Game=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=r;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");e=d(d({},{isClient:!0,isEdgeClient:!1,isServer:!1,isOfflineMode:void 0,plugins:[],showLoadingScreen:!0,minLoadTime:330,loadDefaultPlugins:!0,width:800,height:600,fieldOfView:96,fps:60,useFoV:!1,physics:"matter",graphics:["css"],collisions:!0,camera:{},gravity:{},useMinBuilds:!0,keyboard:!0,mouse:!0,gamepad:!1,virtualGamepad:!1,markup:!0,editor:!1,sutra:!0,lifetime:!1,defaultMovement:!0,defaultMouseMovement:!0,protobuf:!1,msgpack:!1,deltaCompression:!1,deltaEncoding:!0,defaultPlayer:!1,gameRoot:"https://yantra.gg/mantra",scriptRoot:null,assetRoot:null,options:{},mode:"topdown",multiplexGraphicsHorizontally:!1,addLifecycleHooksToAllPlugins:!0,warnNonYantraGameRoot:!1,disableContextMenu:!0}),t);e.isServer&&(e.showLoadingScreen=!1,e.isClient=!1),this.config=e,this.use=(0,s.default)(this,e.plugins),this.unload=(0,u.default)(this,e.plugins),(0,a.default)(this,e.plugins),this.start=l.default.bind(this)}var t,e,n,c,o;return t=r,(e=[{key:"update",value:function(t){this.systemsManager.update(t)}},{key:"render",value:function(){this.systemsManager.render()}},{key:"addComponent",value:function(t,e,n){this.components[e]||(this.components[e]=new i.default(e,this)),null!=(n="actionRateLimiter"===e?new Map:n)&&this.components[e].set(t,n)}},{key:"getComponent",value:function(t,e){return this.components.hasOwnProperty(e)?this.components[e].get(t):null}},{key:"addSystem",value:function(t,e){return this.systemsManager.addSystem(t,e)}},{key:"getSystem",value:function(t){return this.systemsManager.getSystem(t)}},{key:"removeSystem",value:function(t){return this.systemsManager.removeSystem(t.toLowerCase())}},{key:"updateGraphic",value:function(e){this.graphics.forEach(function(t){t.updateGraphic(e)})}},{key:"loadPluginScript",value:function(r){var t;return console.log("Loading",r),"object"===_(this.pluginChecksums)&&"string"==typeof(t=this.pluginChecksums[r])&&(r+="?c="+t),new Promise(function(t,e){var n=document.createElement("script");n.src=r,n.defer=!0,n.onload=function(){return t()},n.onerror=function(){return e(new Error("Failed to load script: ".concat(r)))},document.head.appendChild(n)})}},{key:"removePlugin",value:function(t){var e=this._plugins[t];e&&(this.systems[e.id]&&this.removeSystem(e.id),"function"==typeof e.unload&&e.unload(),delete this._plugins[t])}},{key:"setControls",value:function(t){this.controls=t,this.systems["entity-input"]&&(this.systems["entity-input"].controlMappings=t)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"markup",value:function(){this.systems.markup&&this.systems.markup.parseHTML(0<arguments.length&&void 0!==arguments[0]&&arguments[0])}},{key:"setPlayerId",value:function(t){console.log("setting playerID",t),this.currentPlayerId=t}},{key:"removeEntitiesByType",value:function(t){var e=this,t=this.getEntitiesByType(t);t&&t.forEach(function(t){e.removeEntity(t.id)})}},{key:"getEntitiesByType",value:function(t){if(this.data&&this.data.ents&&this.data.ents[t])return this.data.ents[t]}},{key:"getCurrentPlayer",value:function(){return this.getEntity(this.currentPlayerId)}},{key:"getPlayerFieldOfView",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r="object"===_(t)?t:this.getEntity(t);return r?(r={minX:(r=r.position).x-e,minY:r.y-e,maxX:r.x+e,maxY:r.y+e},this.systems.rbush?this.systems.rbush.search(r,n):void console.log("Warning: no rbush system found, cannot perform getPlayerFieldOfView query")):(console.log("Warning: no entity found for entId",t),[])}},{key:"unbindKeyboard",value:function(){this.systems.keyboard&&this.systems.keyboard.unbindAllEvents()}},{key:"bindKeyboard",value:function(){this.systems.keyboard&&this.systems.keyboard.bindInputControls()}},{key:"createContainer",value:function(t){return t.type="CONTAINER",t.style=t.style||{},t.style.layout=t.layout||"none",t.style.grid=t.grid||{},t.items=t.items||[],this.createEntity(t)}},{key:"playNote",value:function(t,e){console.log("Tone Plugin not loaded. Cannot play tone note.")}},{key:"setGravity",value:function(){this.physics&&this.physics.setGravity(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)}},{key:"applyGravity",value:function(t,e,n){this.systems.physics.applyGravity(t,e,n,3<arguments.length&&void 0!==arguments[3]&&arguments[3])}},{key:"setPosition",value:function(t,e){this.physics.setPosition(t,e)}},{key:"applyForce",value:function(t,e){this.physics.applyForce(t,e)}},{key:"applyPosition",value:function(t,e){e={x:body.position.x+e.x,y:body.position.y+e.y};this.physics.setPosition(t,e)}},{key:"rotate",value:function(t,e){this.physics.rotateBody(t,.022*e)}},{key:"rotateCamera",value:function(t){}},{key:"setZoom",value:function(){}},{key:"setCameraMode",value:function(t){this.data.camera.mode=t}},{key:"setCameraPosition",value:function(t,e){game.data.camera.offsetX=t,game.data.camera.offsetY=e}},{key:"zoom",value:function(t){this.camera&&this.camera.zoom?this.camera.zoom(t):console.log("warning: no camera.zoom method found")}},{key:"shakeCamera",value:function(e,n){this.graphics.forEach(function(t){t.cameraShake&&t.shakeCamera({intensity:e,duration:n})})}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"addAsset",value:function(t,e,n,r){this.preloader?this.preloader.addAsset(t,e,n,r):this.queuedAssets[n]=path}},{key:"addAssets",value:function(t){for(var e in t){var n=t[e];this.addAsset(n.url,n.type,e,n)}}},{key:"setBackground",value:function(t){}},{key:"convertColorToHex",value:function(t){return"number"==typeof t?"#".concat(t.toString(16)):t}},{key:"getRandomColor",value:function(){return this.randomColor(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"int")}},{key:"randomColor",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"int",e=Math.floor(16777215*Math.random());return e="int"!==t?"#"+e.toString(16):e}},{key:"randomForce",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=2*Math.random()*Math.PI,t=Math.random()*t;return{x:Math.cos(e)*t,y:Math.sin(e)*t}}},{key:"randomPositionSquare",value:function(t,e,n){return{x:t+2*Math.random()*n-n,y:e+2*Math.random()*n-n}}},{key:"radialSpread",value:function(t,e,n,r,o){o=o/r*2*Math.PI;return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}},{key:"randomPositionRadial",value:function(t,e,n,r){var o=2*Math.random()*Math.PI,n=Math.random()*n;return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}},{key:"exists",value:function(t){return!!(this.data&&this.data.ents&&this.data.ents._)&&!!this.data.ents._[t]}},{key:"createText",value:function(t){return t.type="TEXT",t.body=!1,this.createEntity(t)}},{key:"createBorder",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.width,e=(void 0===e&&this.width,t.height),e=(void 0===e&&this.height,t.thickness),n=void 0===e?8:e,r=(t.color,t.collisionStart),o=this;o.systems.border?o.systems.border.createBorder({width:o.width,height:o.height,thickness:n,collisionStart:r}):o.use("Border",{},function(){o.systems.border.createBorder({width:o.width,height:o.height,thickness:n,collisionStart:r})})}},{key:"stop",value:function(){this.getSystem("client").stop()}},{key:"pause",value:function(){this.systems["chrono-control"]&&this.systems["chrono-control"].pause()}},{key:"rewind",value:function(t){this.systems["chrono-control"]&&this.systems["chrono-control"].rewind(t)}},{key:"reset",value:function(t){var e,n=this;for(e in(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&(this.rules=this.createSutra()),this.systems.sutra&&this.systems.sutra.bindInputsToSutraConditions(),n.listeners)-1===e.indexOf("::")&&delete n.listeners[e];this.config.useFoV=!1,this.setControls({}),this.setCameraMode("follow"),this.systems.sutra&&this.systems.sutra.bindDefaultMovementSutra(t),this.deferredEntities={},n.viewportCenterOffsetX=0,n.viewportCenterOffsetY=0,n.zoom(1)}},{key:"useSutra",value:function(t,e){this.rules?(this.rules.use(t,e),this.systems["gui-sutra"]&&this.systems["gui-sutra"].setRules(this.rules)):console.log("Warning: no rules engine found, cannot use sutra",t,e)}},{key:"setActions",value:function(n){var r=this;Object.keys(n).forEach(function(t){var e=n[t];r.rules.on(t,e)})}},{key:"connect",value:function(t){var e=this;0<e.loadingPluginsCount?setTimeout(function(){e.connect(t)},4):(console.log("All Plugins are ready! Starting Mantra Game Client..."),this.getSystem("client").connect(t))}},{key:"disconnect",value:function(){this.getSystem("client").disconnect()}},{key:"awaitAllPlugins",value:(c=O().mark(function t(){return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object.values(this.loadingPluginPromises));case 2:case"end":return t.stop()}},t,this)}),o=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){f(r,e,n,o,i,"next",t)}function i(t){f(r,e,n,o,i,"throw",t)}o(void 0)})},function(){return o.apply(this,arguments)})}])&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}()},{"./Component/Component.js":2,"./lib/Game/construct.js":11,"./lib/Game/start.js":13,"./lib/Game/unload.js":14,"./lib/Game/use.js":15}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;(t=t("../lib/eventEmitter.js"))&&t.__esModule;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){var n,r,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){r=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(t)||(a=s(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){var n;if(t)return"string"==typeof t?r(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(r.key),r)}}t=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.systems=new Map}var t,n,r;return t=e,(n=[{key:"addSystem",value:function(a,t){var e=this;if(this.systems.has(a))console.log("Loading ".concat(a," from memory..."));else{if(this.game.config.addLifecycleHooksToAllPlugins){var n,r=c(Object.getOwnPropertyNames(Object.getPrototypeOf(t)));try{for(r.s();!(n=r.n()).done;)!function(){var o=n.value,i=t[o];"function"==typeof i&&"fireBullet"===o&&(e.game.lifecycle.hooks["before.".concat(a,".").concat(o)]=e.game.lifecycle.hooks["before.".concat(a,".").concat(o)]||[],e.game.lifecycle.hooks["after.".concat(a,".").concat(o)]=e.game.lifecycle.hooks["after.".concat(a,".").concat(o)]||[],t[o]=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=(this.game.lifecycle.triggerHook("before.".concat(a,".").concat(o),t,e,n),i.call(this,t,e,n));return this.game.lifecycle.triggerHook("after.".concat(a,".").concat(o),t,e,n),r}.bind(t))}()}catch(t){r.e(t)}finally{r.f()}}this.systems.set(a,t),this.game.systems[a]=t}}},{key:"removeSystem",value:function(t){var e;this.systems.has(t)?("function"==typeof(e=this.systems.get(t)).unload&&e.unload(),this.systems.delete(t),this.game._plugins[t]&&delete this.game._plugins[t],delete this.game.systems[t]):console.log("Warning: System with name ".concat(t," does not exist!"))}},{key:"getSystem",value:function(t){if(this.systems.has(t))return this.systems.get(t);throw new Error("System with name ".concat(t,' does not exist! Perhaps try running "game.use(new plugins.').concat(t,'())" first?'))}},{key:"update",value:function(t){var e,n=c(this.systems);try{for(n.s();!(e=n.n()).done;){var r=i(e.value,2),o=(r[0],r[1]);"function"!=typeof o.update||this.game.paused||o.update(t)}}catch(t){n.e(t)}finally{n.f()}}},{key:"render",value:function(){}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.default=t},{"../lib/eventEmitter.js":17}],7:[function(t,e,n){"use strict";var r={};r.Game=t("./Game.js").Game,r.plugins={},e.exports=r},{"./Game.js":5}],8:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.hooks={"before.update":[],"after.update":[],"before.createEntity":[],"after.createEntity":[],"before.removeEntity":[],"after.removeEntity":[],"before.updateEntity":[],"after.updateEntity":[],"before.handleInput":[],"after.handleInput":[],"before.cleanupRemovedEntities":[],"after.cleanupRemovedEntities":[],"before.collisionStart":[],"before.collisionActive":[],"before.collisionEnd":[],"after.collisionStart":[],"after.collisionActive":[],"after.collisionEnd":[]}}var e,n,r;return e=t,(n=[{key:"clearAllHooks",value:function(){for(var t in this.hooks)this.hooks[t]=[]}},{key:"addHook",value:function(t,e){this.hooks[t]?this.hooks[t].push(e):console.warn("Hook '".concat(t,"' does not exist."))}},{key:"before",value:function(t,e){this.addHook("before.".concat(t),e)}},{key:"after",value:function(t,e){this.addHook("after.".concat(t),e)}},{key:"triggerHook",value:function(t,e,n,r){var o=this.hooks[t];if(!o)return e;var i=e;if(1===o.length)return o[0](i,n,r);for(var a=0;a<o.length;a++)i=o[a](i,n,r);return i}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},{}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=(t=t("./Preloader/FBXLoader.js"))&&t.__esModule?t:{default:t};function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(O(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function u(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function l(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){u(r,e,n,o,i,"next",t)}function i(t){u(r,e,n,o,i,"throw",t)}o(void 0)})}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===O(t)?t:String(t)}(r.key),r)}}n.default=function(){function o(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).assets,e=void 0===e?[]:e,n=this,r=o;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");this.assets=e,this.totalAssetsSize=0,this.loadedAssetsSize=0,this.root=t.assetRoot,this.game=t,this.loaders={}}var t,e,n,r,i,a,c;return t=o,(e=[{key:"getItem",value:function(e){return this.assets.find(function(t){return t.key===e})}},{key:"addAsset",value:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};this.assets.push({url:t,type:e,key:n,size:0,frameWidth:r.frameWidth,frameHeight:r.frameHeight,frameTags:r.frameTags})}},{key:"loadAll",value:(c=l(_().mark(function t(){var e,n,r=this;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game,n=this.assets.map(function(t){return r.loadAsset(t)}),t.next=4,Promise.all(n);case 4:e.emit("preloader::loaded");case 5:case"end":return t.stop()}},t,this)})),function(){return c.apply(this,arguments)})},{key:"createLoader",value:function(t,e){this.loaders[t]=e}},{key:"loadAsset",value:(a=l(_().mark(function t(e){var n;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="image"===t.t0?3:"spritesheet"===t.t0?7:"model-fbx"===t.t0?11:17;break;case 3:return t.next=5,this.loadImage(e);case 5:return e.loaded=!0,t.abrupt("break",19);case 7:return t.next=9,this.loadImage(e);case 9:return e.loaded=!0,t.abrupt("break",19);case 11:return t.next=13,this.loadModel(e);case 13:return n=t.sent,e.loaded=!0,e.loadedModel=n,t.abrupt("break",19);case 17:throw new Error("Unknown asset type: "+e.type);case 19:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"loadModel",value:(i=l(_().mark(function t(e){var n;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,s.default)(e,this.root),t.abrupt("return",n);case 2:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"loadImage",value:(r=l(_().mark(function t(r){var o=this;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.game.isServer)return t.abrupt("return");t.next=2;break;case 2:return t.abrupt("return",new Promise(function(t,e){var n=new Image;n.style.display="none",n.onload=function(){document.body.appendChild(n),t()},n.onerror=function(){e("Failed to load image: ".concat(r.url))},n.src=o.root+r.url}));case 3:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"updateProgress",value:function(t,e){this.loadedAssetsSize+=t;t=this.loadedAssetsSize/this.totalAssetsSize;game.emit("progress",t)}}])&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}()},{"./Preloader/FBXLoader.js":10}],10:[function(t,e,n){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(O(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function r(){var c;return c=_().mark(function t(e,n){var r,o,i;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("incoming asset",n,e),r=n+e.url,console.log("modelUrl",r),o=new FBXLoader,console.log("Loading model...",r),t.prev=5,t.next=8,new Promise(function(e,n){console.log("loading resource",r),o.load(r,function(t){e(t)},function(t){console.log("Model load progress: ".concat(t.loaded/t.total*100,"%"))},function(t){console.error("An error happened during the loading of the model"),n(t)})});case 8:i=t.sent,t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(5),console.log("Error loading model",t.t0),t.t0;case 15:return t.abrupt("return",i);case 16:case"end":return t.stop()}},t,null,[[5,11]])}),(r=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){return r.apply(this,arguments)}},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];h.default.getAllKeysWithData();h.default.set("lastLocalStartTime",Date.now()),t.data={width:t.config.width,height:t.config.height,fps:t.config.fps,fieldOfView:t.config.fieldOfView,camera:{mode:null,scaleMultiplier:1,adaptiveZoom:!0,follow:t.config.camera.follow,currentZoom:t.config.camera.startingZoom,position:{x:0,y:0},offsetX:0,offsetY:0},scenes:{},chunks:{}},void 0===t.data.camera.follow&&(t.data.camera.follow=!0);void 0===t.data.camera.currentZoom&&(t.data.camera.currentZoom=1);"string"==typeof t.config.camera&&(t.data.camera.mode=t.config.camera);"number"==typeof t.config.fps&&(t.config.hzMS=1e3/t.config.fps,t.config.hzMS=t.config.hzMS.toFixed(3));console.log("Mantra starting..."),t.scriptRoot="https://yantra.gg/mantra",t.assetRoot="https://yantra.gg/mantra",t.config.gameRoot&&(t.isServer||console.log("Mantra is using the follow path as it's root for both scripts and assets:",t.config.gameRoot),t.gameRoot=t.config.gameRoot,t.scriptRoot=t.config.gameRoot,t.assetRoot=t.config.gameRoot);t.config.options.scriptRoot&&(t.scriptRoot=t.config.options.scriptRoot);t.config.options.assetRoot&&(t.assetRoot=t.config.options.assetRoot);t.config.scriptRoot&&(console.log("Mantra is using the follow path as it's script root:",t.config.scriptRoot),t.scriptRoot=t.config.scriptRoot);t.config.assetRoot&&(console.log("Mantra is using the follow path as it's asset root:",t.config.assetRoot),t.assetRoot=t.config.assetRoot);"undefined"!=typeof window&&console.log("new Game(".concat(JSON.stringify(t.config,!0,2),")"));t.on=i.default.on.bind(i.default),t.off=i.default.off.bind(i.default),t.once=i.default.once.bind(i.default),t.emit=i.default.emit.bind(i.default),t.onAny=i.default.onAny.bind(i.default),t.offAny=i.default.offAny.bind(i.default),t.listenerCount=i.default.listenerCount.bind(i.default),t.listeners=i.default.listeners,t.emitters=i.default.emitters,t.EntityBuilder=l.default,t.loadingPluginPromises={},t.make=function(){return new t.EntityBuilder(t)},t.pluginChecksums=g.default,t.loadScripts=b.default.bind(t),t.loadCSS=m.default.bind(t),t.switchWorlds=v.default.bind(t),t.systems={},t.storage=h.default,t.snapshotQueue=[],t.lifecycle=new u.default(t),t.before=t.lifecycle.before.bind(t.lifecycle),t.after=t.lifecycle.after.bind(t.lifecycle),t.tick=0,t.worlds=[],t.width=t.config.width,t.height=t.config.height,t.changedEntities=new Set,t.removedEntities=new Set,t.pendingRender=new Set,t.deferredEntities={};var n=new y.default(t);t.preloader=n,t.queuedAssets={},t.isClient=t.config.isClient,t.isEdgeClient=t.config.isEdgeClient,t.isServer=t.config.isServer,t.localGameLoopRunning=!1,t.onlineGameLoopRunning=!1,t.currentPlayerId=null,t.components={type:new r.default("type",t),destroyed:new r.default("destroyed",t),position:new r.default("position",t),velocity:new r.default("velocity",t),rotation:new r.default("rotation",t),mass:new r.default("mass",t),density:new r.default("density",t),width:new r.default("width",t),height:new r.default("height",t),depth:new r.default("depth",t),size:new r.default("size",t),radius:new r.default("radius",t),isSensor:new r.default("isSensor",t),owner:new r.default("owner",t),source:new r.default("source",t),inputs:new r.default("inputs",t),items:new r.default("items",t),hasInventory:new r.default("hasInventory",t),sutra:new r.default("sutra",t),scene:new r.default("scene",t),meta:new r.default("meta",t),collectable:new r.default("collectable",t)},t.components.color=new r.default("color",t),t.components.health=new r.default("health",t),t.components.target=new r.default("target",t),t.components.lifetime=new r.default("lifetime",t),t.components.creationTime=new r.default("creationTime",t),t.components.BulletComponent=new r.default("BulletComponent",t),t.components.graphics=new r.default("graphics",t),t.components.lockedProperties=new r.default("lockedProperties",t),t.components.actionRateLimiter=new f.default("actionRateLimiter",t),t.components.timers=new d.default("timers",t),t.components.yCraft=new r.default("yCraft",t),t.components.text=new r.default("text",t),t.components.style=new r.default("style",t),t.components.collisionActive=new r.default("collisionActive",t),t.components.collisionStart=new r.default("collisionStart",t),t.components.collisionEnd=new r.default("collisionEnd",t),t.components.pointerdown=new r.default("pointerdown",t),t.components.pointerup=new r.default("pointerup",t),t.components.pointermove=new r.default("pointermove",t),t.components.pointerover=new r.default("pointerover",t),t.components.pointerout=new r.default("pointerout",t),t.components.pointerenter=new r.default("pointerenter",t),t.components.pointerleave=new r.default("pointerleave",t),t.components.onDrop=new r.default("onDrop",t),t.components.exit=new r.default("exit",t),t.components.ctick=new r.default("ctick",t),t.components.ctick=new r.default("utick",t),t.systemsManager=new o.default(t),t.scenes={},t.graphics=[],t.gameTick=a.default.bind(t),t.localGameLoop=c.default.bind(t),t.onlineGameLoop=s.default.bind(t),t.loadPluginsFromConfig=p.default.bind(t),t.createDefaultPlayer=w.default.bind(t),t.createPlayer=w.default.bind(t),t.loadingPluginsCount=0,t.plugins=e,t._plugins={},t.loadedPlugins=[],t.config.loadDefaultPlugins&&t.loadPluginsFromConfig({physics:t.config.physics,graphics:t.config.graphics,collisions:t.config.collisions,keyboard:t.config.keyboard,mouse:t.config.mouse,gamepad:t.config.gamepad,virtualGamepad:t.config.virtualGamepad,editor:t.config.editor,sutra:t.config.sutra,lifetime:t.config.lifetime,markup:t.config.markup,defaultMovement:t.config.defaultMovement})};var r=j(t("../../Component/Component.js")),o=j(t("../../System/SystemsManager.js")),i=j(t("../eventEmitter.js")),a=j(t("../gameTick.js")),c=j(t("../localGameLoop.js")),s=j(t("../onlineGameLoop.js")),u=j(t("./Lifecycle.js")),l=j(t("../../Entity/EntityBuilder.js")),f=j(t("../../Component/ActionRateLimiter.js")),d=j(t("../../Component/TimersComponent.js")),h=j(t("../storage/storage.js")),p=j(t("../loadPluginsFromConfig.js")),y=j(t("./Preloader.js")),g=j(t("./pluginChecksums.js")),b=j(t("../util/loadScripts.js")),m=j(t("../util/loadCSS.js")),v=j(t("../switchWorlds.js")),w=j(t("../createDefaultPlayer.js"));function j(t){return t&&t.__esModule?t:{default:t}}},{"../../Component/ActionRateLimiter.js":1,"../../Component/Component.js":2,"../../Component/TimersComponent.js":3,"../../Entity/EntityBuilder.js":4,"../../System/SystemsManager.js":6,"../createDefaultPlayer.js":16,"../eventEmitter.js":17,"../gameTick.js":18,"../loadPluginsFromConfig.js":19,"../localGameLoop.js":20,"../onlineGameLoop.js":21,"../storage/storage.js":23,"../switchWorlds.js":24,"../util/loadCSS.js":25,"../util/loadScripts.js":26,"./Lifecycle.js":8,"./Preloader.js":9,"./pluginChecksums.js":12}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={"./plugins/BabylonCamera.js":"d081e991041950666c2e1f304e2653292d3dc131ff7e44613bf4f32e04e1d5d6","./plugins/BabylonCamera.min.js":"d0d3c2c6657d2dfb3c1b2cb446af3098d9ade28551f61d87469114000c552710","./plugins/BabylonGraphics.min.js":"1ea5d0b92ac68d0fe8545f2d70808e8e8a5fe156d210b51e6e40ac4964e9e871","./plugins/BabylonStarField.js":"bcbeb93b6bd0a1490055f9ad862177173fe51d2c2fcbd964a899d519017b1b72","./plugins/BabylonStarField.min.js":"d4a2f4ab4cd052977c7243a0d6918035b098843a80e5704e0f261dd1c30c3774","./plugins/Behaviors.js":"7b7a58950a66608f894d22cedc281c75c15c5b169d763a525c0d0c32a234e101","./plugins/Behaviors.min.js":"95c83275952aba582953b763a515c61378ca78af8c7b4897927f377cc90199b2","./plugins/Block.js":"8a1f60d0008b88c23af3e4507883d51ca37b3e34c79c6d45e7e509f458cc425d","./plugins/Block.min.js":"15d67b27b79f808ff076860b9ca72f8b8f357d3065221ff96619eb9a750b2568","./plugins/Bomb.js":"f7a362f2807f41676bcc49901c6c16d0a01b8d741dfddcd726a2d2b2b1619621","./plugins/Bomb.min.js":"a6e453890b05fcab61a54c6addaa2d59fbbfa2b89a0b4429ee5a4f7f6128e02a","./plugins/Boomerang.js":"9699444f05362f0c1c653dfbfc457a840c4b7216bdb3e501e37392bb5ce8b367","./plugins/Boomerang.min.js":"02f004d01651777df7f30dae220c15823a444de9e49deec3af948deb6257ad0f","./plugins/Border.js":"776ff9a840aee4e40b98ac21a2ece7846157de59c843f7fa335d0497baaa2b7a","./plugins/Border.min.js":"3584e32fb60aae9ee6a291e4b3a89722f9eb62b345bc0b68cc06b450c854ade5","./plugins/Bullet.js":"19bb3f772caa2af29d758b56865186d0b043d15277249051dda1a6418fc0c3ec","./plugins/Bullet.min.js":"f8e1f52b96ea8bee17a0c5c9ae5ba9c1925cc2daf6703093e613e4d7a92c4f07","./plugins/Button.js":"2c83e710a9ba08fc3756da016a4b02db323ca6a1203ad300ec89fcf90094ad43","./plugins/Button.min.js":"6403b7847805cbfacac06ac51c99e6d8d504745a27d8d4db00221a347a998385","./plugins/CSS3DGraphics.js":"682cda73678716ab858e7f412b8fc4304a9ce1835a558d5f21681d8f7dbbd3ae","./plugins/CSS3DGraphics.min.js":"5773e9e9d79ddbc8c295c517af3c790e74ce7069ecbfc9705746bada0b25f1e1","./plugins/Canvas.js":"f38953424cd2e9a460c13f1eec39c01732e85e1604efa5d0472bd8386bb1762a","./plugins/Canvas.min.js":"ca92686ba4df78cab48c226dcd2bf6b7f88be728a58f4602a11ef3b5e5f4bc38","./plugins/Checkbox.js":"16b74e6931eaa235e6ff931f699a3ec3c6d754054ba017d81d6473d450a9a125","./plugins/Checkbox.min.js":"ebb6d340f74df92367e284c26cf2411fcfbf86f2f9e92680ded0f065f816b44a","./plugins/ChronoControl.js":"3d1eb99a514dc0726c3055371cf47fb32e25190a4f7c16b823792ecc7858dfa1","./plugins/ChronoControl.min.js":"a9a511015708f05075041a02a32b9bcfd56e8cc73d07a5836699b0c1c2f1ae83","./plugins/Code.js":"56988694fff92420836c8e44452dcfbe907628d74ccd8a73d15dbac7e777d809","./plugins/Code.min.js":"cf633478b600ab5b225906fad83d8b353d93d756a7dd1f5f95a034b963e710ea","./plugins/Coin.js":"fa7c93f1337c6accc2707ea751860c8f17feb9159ac4496d4adc49c6ba5cf6f3","./plugins/Coin.min.js":"a465f0bb843a2f89963390ac4e7b7ab54271a395709b84dd5523bc95ef47a7e0","./plugins/Collectable.js":"0ef48261adc5fc05911a3a1046f68645d9f4776a90e86b78db4e1563d9f91496","./plugins/Collectable.min.js":"d6a2315ab43fe54db6af73c2df8f8eb32bc8484cddcc4075e5b3647458f225d0","./plugins/Collisions.js":"947f90bbc97c4af120e61ac73087b6c20bdb61c78438f6c5c046864495839795","./plugins/Collisions.min.js":"9b13eaf0d4cf10277aa2efb18354e004a1169a2c109bf9d9caffec80d5a7bb69","./plugins/Container.js":"e1c826e681c7da4b0d653e66819c3f9f4b38a1f8d51555434a5de8e9f418370f","./plugins/Container.min.js":"e1c3490ea0f8dbfb2bc93f3bc5eb2138f464a1ddc761f56aeb1cfdf9641db6ff","./plugins/ControlsGUI.js":"d54f58ed4eabb78b5897a2428591e1ef0256d5d67773dcbe13c4d75f8075e63b","./plugins/ControlsGUI.min.js":"08c30bc076baeda7379a728a2a188e0b35fcf5d91d031b5221654d319591ff86","./plugins/Creator.js":"61d6002a0e5d51df00e5735ee8ffeeaecb7083e9f5ca6747a0991ef9bb39c306","./plugins/Creator.min.js":"fb744b4f67f3a0b2e3dace2735dedf7061fa927bfa213818ba72b11f70c19de8","./plugins/CurrentFPS.js":"6e200e9d32a7d223d64f2399006f289c0e276e75bca63e7826622a62ee2917da","./plugins/CurrentFPS.min.js":"bef967a59c86722013e2ec5d6eb8e539f8464db050aadb32a1e4d53ede924752","./plugins/Draggable.js":"58c9cabeb501780b0cb153f72a932bc50b4cb096bef8229e6458f9f1ff5374f9","./plugins/Draggable.min.js":"d820d1a4d4fe0ba357fc5ce615428b34b3b4ea9e9a2b4825cde48764f73a928a","./plugins/Droppable.js":"3861edc41aee15b701ceeff2c81a5d2ab039885921830c48594417b4cf4f7c72","./plugins/Droppable.min.js":"a69031884f922e66c0b29ec604474a62341174837222231b0db060995808e9a4","./plugins/EntitiesGUI.js":"bc66200e73eebd08e38cfc060d2f4d6b748aeac903d2d314b8c23c11c3bc3d0f","./plugins/EntitiesGUI.min.js":"5f9e2133a539fe3fc7cb5ef028066f82538b5d38cb24cc8404eb3219662c7e38","./plugins/EventInspector.js":"6ca05415864ef09766a010f0176db7d9caac6020df1252a3a680daee4f2b4fd1","./plugins/EventInspector.min.js":"84690d0c1f5fe59f3fc28062e84ee1933391c8120b22d796e3689b1abf348165","./plugins/Flame.js":"15b2ccbdc64f1779e22a354d7a67328c26541d9898433cbd463e5669ec571abb","./plugins/Flame.min.js":"b24ccabd1f3a74b7579d667aad4198d450c2c19208129662de30483c8826ec4a","./plugins/FlashMessage.js":"2a278a77a35b5575d7077580abc79f5221a3111c50d6d770a84603234ca042a0","./plugins/FlashMessage.min.js":"764f1e74b4afe5bd37cc9e1b6bd00dc78eedb5d8b50ad6407fad5d287cc006a4","./plugins/FloatyTyper.js":"0e42af84fa1f30be41ce34969bc625ee6d1c275e557d832be035be76c8de1bcd","./plugins/FloatyTyper.min.js":"1229f52b05300c5c5582ba7dbd594a10af236283da758f3d504440e9208f05fd","./plugins/GameEditorGui.js":"73b832620d31a9a20253bbb7dad0da557b6795fb6aa32fdcbb543ee4f82f84ad","./plugins/GameEditorGui.min.js":"2778dae74a434aec88eedb7dd63242e0ebceb1bccbed35208ae0cb641d1559fd","./plugins/Gamepad.js":"6eac485cee65c05d5a46f86d0d4b02ecdf827a93f11f1ae45454e4a6ff41f4ba","./plugins/Gamepad.min.js":"5a360e60ec674cbfbe0181cfaf28b1f6f4bed413c0c6cca2430578191dbed576","./plugins/GamepadGUI.js":"f9b8b834be215bb38a1e20112cdb79ebc4098e22bfbe588add62e4507d14a973","./plugins/GamepadGUI.min.js":"a7364e86f4e4abbb31d6053a728c7d9d26fffd6842fc6975306bc54056a888d8","./plugins/GhostTyper.js":"d13d0a0a2aa3eaefc3f5c50fa7a0a969dea114afa1fb5746c2954e1b27d2e8a6","./plugins/GhostTyper.min.js":"15124babd086c31da916405d582032224301a4f01887e25e27c41c7c84be2ccd","./plugins/Graphics.min.js":"545b75c0728a493dc9f627639661f1d4d1a8f13b8fb93f79955bd44c3a77d7b1","./plugins/GravityWell.js":"a213708152c92ddbdd30a0c6b553abd368627f5adaaab72b82b181502b8781ee","./plugins/GravityWell.min.js":"323551ff077833c0a1c4f98b69b8d3ab65418a3a17184b5a79b94d0b57735b15","./plugins/Health.js":"14543aa1672791249749eadc46c898105ef663b8be57ec78886c79c7903a25a8","./plugins/Health.min.js":"c0b3b691a9a43ce10828818ab13199f814c49fc8abe8628afff904ae8b198923","./plugins/Hexapod.js":"ebff4294ab54e53711537a914f364d96a4c67640d7aca3771418aea811124e66","./plugins/Hexapod.min.js":"7f9d3d4c0b48b1109f74948edded4a612c5905ed6fcc799530a2995aaaee2a9e","./plugins/Iframe.js":"ef82c243d98dc49ab09ba5b54d7483128eb0fb49a4e733e1032d25730a095db0","./plugins/Iframe.min.js":"486536e022cee0dc0274cd5a99b24f456ed94715b20fa2de8bbfa88c36ada101","./plugins/Image.js":"a9be3447d72667f4cc83443bdefc6ae1f09be99ec50668ade91212acee362792","./plugins/Image.min.js":"b1f09111be50b848eed0bdf9f2c197af8d616f6b0f915ee75a0e0cbf83e0f57d","./plugins/Input.js":"d0684ed311bbfacaf094fbbf4b70e23296b7fdc077e4e3f92e6ee3487a5ce83f","./plugins/Input.min.js":"6b17a341cd67a0deab701cf2d40e150bd7e8055e6a91724f201825099ab52221","./plugins/Inspector.js":"fda5c903185dfdeba99096d42f58ff7daafc757b016090bd440c74770dc2fc53","./plugins/Inspector.min.js":"47b59a569e204210647e1bd9fbf739a57333e8174db1b7af86119304b10643eb","./plugins/Key.js":"14be871e2d98ae2a84558d4680c456da0b717ab32f14ff6e3db394791b3be456","./plugins/Key.min.js":"b7bb1a499c76689b538be49a2b29ccd5e57267dbcd5c4b54b8fb251cd60b8c41","./plugins/Keyboard.js":"6d4c62e195bbbd24ec92def8605bcba6f15108e0cabbb68bacc6df16ab90b407","./plugins/Keyboard.min.js":"3b82b35f79a51f9bb2f179222ed24967a179d43e0d1a92e571adcfa3cadeffeb","./plugins/Label.js":"16cd42e7c61bbb5b28cf22fcc4e5e1fc8a6a25a42f237fd4c7c6379d176d1774","./plugins/Label.min.js":"44a9e0631d95a8ccf9d23bc2249c2653abdbea4f79db1e3c9f5cfb7faf7f2cdc","./plugins/Lifetime.js":"126648fa1b787f25fa302e56603a85d2073ab372b97d66b177930c27c4ae9f68","./plugins/Lifetime.min.js":"1f0e46af7af17e9fdbda0b7ac3ed9844c7b9993b3ce7682443e0c7f0188b44b5","./plugins/Link.js":"15613eac362fc089cd4450fa8aeb6a519239a0b6eff35f675827813f12dfa833","./plugins/Link.min.js":"ef00cc642c22ddd3ce4251674c61761194867bfc9edc484050968c24f00037d5","./plugins/LoadingScreen.js":"bfbba2189f6bf692e4e99e4342342242515289596cc14e39d7794486ebda4e1a","./plugins/LoadingScreen.min.js":"8e4ed7bde63ee1505820ef7f7287154beeeb42d757316e79ad58b36477dc686e","./plugins/LocalClient.js":"62886ed824f7bc714cde5664ecca9447e6d2a047eb65b5309f2dad765cef746e","./plugins/LocalClient.min.js":"a681769ec3ebbd160693301d2780545f63629098867abbeaad8a3880694a04ea","./plugins/Markup.js":"fcddabcc31984abd6133fa7ab85e1c7a78046382bd27dc0cbab839178dbaac89","./plugins/Markup.min.js":"588be237351529a03c0e6e237bc9a14786b7b833f653bbf9ec4ab4c83fbee7bd","./plugins/MatterPhysics.js":"c25d3146cbb6e129b96beb5a39270e413cccb1fb7ae6d904f7a928c747b44bb6","./plugins/MatterPhysics.min.js":"69bb6ffeb4fc9f5c87618d1bffe8e8f5afb9732a5722b8a599cc9ccd4dcab4de","./plugins/Midi.js":"3c8b738ed48341c4221cf20e53f631907935bdf722ebbcafb2dee3a40f544fba","./plugins/Midi.min.js":"5ef8a15f87866a63e014ecbf3433f93a6c463c26d48a1c3a4448604ee8b5d229","./plugins/MidiGUI.js":"7dc1d8d9bd9fb458409f803e86667468b6d25563c08234a19d24cd733fb9af55","./plugins/MidiGUI.min.js":"ceb780abf5f2fadc904cbb683dde98548db60f5bdf0f90f1398728c76a0f923f","./plugins/Mouse.js":"9b66c9ae5b9e6da7cd6d0c457aa6097f1888cc146199d49c4b19aa80342d9d5a","./plugins/Mouse.min.js":"8a03cb980883362f32ee4616caaeae0dcf2a3b7dddd371537fded7ce533f95bc","./plugins/PingTime.js":"df3ff245078e918c5c09e017266c29e58973a6b97e025c931bc25af0cc176ffe","./plugins/PingTime.min.js":"df610dd9876c1b43e3c3a1e7c36273842332b0a51b2f33a150ec926f8155bca0","./plugins/Platform.js":"3c8a9709aaf415909d0ef153afc23824bd7f0de575e7ffac900f6abc4747141b","./plugins/Platform.min.js":"a365b9ef1e0c90663cbf6bc7d2f732fc7a9d85840e37a3f89740ff6e2ff73c5b","./plugins/Player.js":"cee710c93985f83dbefc341b8d7fcdcbab2515b5533c58f833559df0d94791c8","./plugins/Player.min.js":"c9ee861c565a6139f87151cf4561b98b3edbfd511431acc3ac17d64259a08b7b","./plugins/PluginExplorer.js":"10a1a744380c0e425c603cf05156a6f12b7f0365daacf4b3765d88789d3e2bf4","./plugins/PluginExplorer.min.js":"e03f9fe01aa34fb485508b56c3c79607cc86d17d1236712325bca6cea80cc423","./plugins/PluginsGUI.js":"c8259a06f4fe79bf42c8365d224d542da67100c0a66d4bf9d1eb45256363295b","./plugins/PluginsGUI.min.js":"867f4f3d9fd64ea14335531454551f63d84e9b78058c07035da2bb33af7ebd30","./plugins/RBush.js":"138a0ea04d269a7872393fb6e4c4b2b3d766381d8db0d65a59e06efe6a73957b","./plugins/RBush.min.js":"1b87b4df682d7b5b6d0d249583871a1e5058d4697efe7e1d38f5ef47d4dd8f81","./plugins/RadialMenu.js":"4151c73e5be8a17f8d3fd44c218a323fd36c3ed120eb27a6829f2305b1f00d62","./plugins/RadialMenu.min.js":"2091b1073a9d3e41d2133c7cc4ec5b22fb8dae4a9f0c255a013e72842bc315a9","./plugins/Radio.js":"f942470e3247bc192bca7713e77549ed8e7f8e990eaca65b6af0413651b2a77c","./plugins/Radio.min.js":"cc039b7b38781356c7a5e3b603f476d81c9d5787d525a0221e13efbe98d513cb","./plugins/Range.js":"70ee15e4608edd602bd2e931d268da8d2e613ee9dd49d96793ebdf9da0197523","./plugins/Range.min.js":"0c4743bd74df70a2e7bf9486077dce5611e215a898aa6ba9f418edf9b534f171","./plugins/Scoreboard.js":"7556ebd8c54d1d05466c4e857ba0608bfb1e60fc86925dd01183a52c5dc6f6ca","./plugins/Scoreboard.min.js":"f79d065a822319e0c74c3e36a1f17da4cae47c66b9770e1f10e9075fd40ab436","./plugins/Select.js":"0cf2274922e92b4a32b69f6f09ab131949360bc9e936c175dfabe49a431664bc","./plugins/Select.min.js":"c4165a53da1a46cc9d27cfe2fa513903144468d37fd93d861a82c6f0a83d0c6a","./plugins/StarField.js":"d33e4ee1e02b8719edc5b7988b3eb2ded91a214dc911b3d800b52bfe19572669","./plugins/StarField.min.js":"302c7e8878c277e6d3dc553ca7767fc98e16f66a8964c1a74cf7e4b972892467","./plugins/SwitchGraphics.js":"434f7480586ccdff9d28745b90d685baa06c53252069c0d8d2b7dbf4fe5a2b8c","./plugins/SwitchGraphics.min.js":"85d763b07cd52596ccc910761ac2ee786e11b5cc42fb6ff332b6be879cdf14ee","./plugins/Sword.js":"4ed88fd1e3f9fafe239d88db8b3bb3ee1189fff9c7b3c9ff54ac9b151c58fd32","./plugins/Sword.min.js":"68708f6deb1b0b7de5a4fda1eabf50f1bc12d2a97433b491a72deabba506e33d","./plugins/Teleporter.js":"4cdc7c735cb9e3186e97638406a7dd6eaa558f37edd2532439ae059cd08f21f4","./plugins/Teleporter.min.js":"efadbc9c29dd46daa59800ebe49e913513ae9d261aef961d306b8c366b915469","./plugins/Text.js":"eeb50f1cffc6e0f781a77bf982ed046d02b817c572e40c4cb9da1467f3f82e5d","./plugins/Text.min.js":"388b6baebbe73c0d0d736442ecc04cf00b383660c6c7bd87b3d2c554bae69d86","./plugins/Textarea.js":"a9f16f27cf2721e3d75a504fd5ae68cb8238d945ac7dbb10f3787d7a12d680bb","./plugins/Textarea.min.js":"4ee950d2815ee75c63ae64b260f4b95ffbce227a37ca58a9596d2a317a56b03b","./plugins/TileSet.js":"730987abc1a69c466047444b005ed25d49a6c3dab03c8128701e086e29eb6c57","./plugins/TileSet.min.js":"9a83b80581a1611b7f34e2f8cc4fe9e4eef910ea55372a19a0eda54eb2033649","./plugins/Tone.min.js":"acfc53c580afb09c8de27813cf407450c63a77068ad6fc5d7f996b854e825ca9","./plugins/Tower.js":"5efe4026709064ff3fc7036f8880fd43572c9b2521a0f4d77d90e432d4980644","./plugins/Tower.min.js":"6c37a14ae5c2afd4f8a617f194ad7407826cac8d3f6f5f876a9a2d3394655bc6","./plugins/UnitSpawner.js":"7cb722a41db69abc7721bd02f2e29b03cb4b614e1b314db8142ed0a9de0a7adc","./plugins/UnitSpawner.min.js":"8019a94e654736688413541d67dd52f4ccf8770fb55f17ae45a388cebfc64aa1"}},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(a){var c=this;return new Promise(function(n,r){if("function"!=typeof a&&(a=function(){}),0<c.loadingPluginsCount||!0!==c.physicsReady)setTimeout(function(){c.start(a).then(n).catch(r)},4);else{if(c.config.multiplexGraphicsHorizontally){var t=c.graphics.length,e=100/t;if(1<t&&document&&document.querySelectorAll)for(var o=document.querySelectorAll("#gameHolder canvas"),i=0;i<o.length;i++)o[i].style.width=e+"%"}c.systems.sutra&&(console.log("Binding all input events to Sutra conditions..."),c.systems.sutra.bindInputsToSutraConditions()),console.log("All Plugins are ready! Starting Mantra Game Client..."),c.emit("game::ready"),c.config.defaultPlayer&&(t=c.createPlayer(),c.setPlayerId(t.id)),c.systems.client?c.getSystem("client").start(function(t,e){t?(r(t),a&&a(t)):(n(e),a&&a(null,e))}):console.log("Warning: No Client System found, will not start game loop.")}})}},{}],14:[function(t,e,n){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(O(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o){return function(){c=_().mark(function t(e){var n,r=arguments;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:void 0===(2<r.length?r[2]:void 0)&&0,console.log("Unloading plugin",e),this.data.scenes[e]&&(n=this.data.ents._,Object.keys(n).forEach(function(t){o.removeEntity(Number(t))})),delete o.data.scenes[e],o.removeSystem(e);case 8:case"end":return t.stop()}},t,this)});var c,e=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})};return function(t){return e.apply(this,arguments)}}()}},{}],15:[function(t,e,n){"use strict";function u(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?r(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function l(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=function(t){t=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function O(){O=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==_(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(_(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function f(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}}function d(){return o.apply(this,arguments)}function o(){return(o=f(O().mark(function t(e,n,r,o,i){return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.systems[n.id])return e.loadingPluginsCount--,t.abrupt("return");t.next=3;break;case 3:if("function"==typeof n.build&&function(t,c){var s=c.constructor.name;t.EntityBuilder.prototype[s]=function(){for(var o=this,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(t){return l(l({},t),{},{_previous:l({},o.config)})}),i=c.build.apply(c,r);if("object"===_(i))for(var a in i)!function(r){var t=i[r];"function"==typeof t?("function"!=typeof o.config[r]&&(o.config[r]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.config[r].handlers.forEach(function(t){t.apply(void 0,u(e.map(function(t){return l(l({},t),{},{_previous:l({},o.config)})})))})},o.config[r].handlers=[]),o.config[r].handlers.push(t)):o.config[r]=t}(a);else"number"!=typeof i&&"string"!=typeof i||(this.config[s]=i);return this}}(e,n),function(e,n){n.createEntity=function(t){return t.scene=n.id,e.createEntity(t)},n.removeEntity=function(t){return e.removeEntity(t)},n.createText=function(t){return t.scene=n.id,e.createText(t)}}(e,n),e.loadedPlugins.push(r),n.preload)return t.next=9,n.preload(e);t.next=11;break;case 9:return t.next=11,e.awaitAllPlugins();case 11:n.init(e,e.engine,e.scene),e._plugins[r]=n,delete e._plugins[r],e.emit("plugin::loaded::".concat(r),n),e.emit("plugin::loaded",r),"world"!==n.type&&"world"!==n.constructor.type||(e.worlds.push(n),e.systemsManager.addSystem(r,n),e.emit("world::loaded::".concat(n.id),n),e.emit("world::loaded",n),console.log("Loaded World:",n.id)),"scene"===n.constructor.type&&(e.data.scenes=e.data.scenes||{},e.data.scenes[r]=n,e.systemsManager.addSystem(r,n),console.log("Loaded Scene:",n.id)),e.data.plugins=e.data.plugins||{},e.data.plugins[r]=o,e.loadingPluginsCount--,i();case 22:case"end":return t.stop()}},t)}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c){return function(){var e=f(O().mark(function t(e){var n,r,o,i,a=arguments;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=1<a.length&&void 0!==a[1]?a[1]:{},r=2<a.length&&void 0!==a[2]?a[2]:function(){},o="/plugins/",o=c.scriptRoot+o,"string"!=typeof e)t.next=20;else{if(i=e,c._plugins[i]||c.systems[i])return console.log("Plugin ".concat(i," is already loaded or loading.")),t.abrupt("return",c);t.next=9}break;case 9:if(c.isServer){if(c.plugins[i])return t.abrupt("return",c.use(new c.plugins[i](n)));t.next=12}else t.next=14;break;case 12:return console.log('Attempted to load plugin by string name "'.concat(i,'" on server, could not find! Skipping')),t.abrupt("return");case 14:c._plugins[i]={status:"loading"},c.loadingPluginsCount++,c.emit("plugin::loading",i),c.loadingPluginPromises[i]=f(O().mark(function t(){var e;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(o).concat(i,".js"),c.config.useMinBuilds,t.next=5,c.loadPluginScript(e);case 5:if(console.log("Loaded: ".concat(i)),"object"===("undefined"==typeof PLUGINS?"undefined":_(PLUGINS))&&PLUGINS[i])return e=new PLUGINS[i].default(n),t.next=10,d(c,e,i,n,r);t.next=12;break;case 10:t.next=14;break;case 12:throw console.log("Warning: PLUGINS object not found, cannot load plugin",i),new Error("PLUGINS object not found, cannot load plugin");case 14:t.next=23;break;case 16:throw t.prev=16,t.t0=t.catch(0),console.error("Error loading plugin ".concat(i,":"),t.t0),c._plugins[i]={status:"error"},c.loadingPluginsCount--,r(t.t0),t.t0;case 23:return t.prev=23,delete c.loadingPluginPromises[i],t.finish(23);case 26:case"end":return t.stop()}},t,null,[[0,16,23,26]])}))(),t.next=28;break;case 20:if(e.id){t.next=23;break}throw console.log("Error with pluginInstance",e),new Error("All plugins must have a static id property");case 23:if(c.systems[e.id])return t.abrupt("return");t.next=25;break;case 25:return c.loadingPluginsCount++,t.next=28,d(c,e,e.id,n,r);case 28:return t.abrupt("return",c);case 29:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};console.log("creating default player",t,this.currentPlayerId),void 0===t.position&&(t.position={x:0,y:0,z:1});"none"===t.texture&&delete t.texture;"number"!=typeof t.rotation&&(t.rotation=0);this.currentPlayerId;this.rules;void 0===t.texture&&(t.texture={sheet:"loz_spritesheet",sprite:"player"});t=this.createEntity({name:t.name,type:"PLAYER",shape:"triangle",rotation:t.rotation,collisionActive:!0,collisionStart:!0,collisionEnd:!0,width:t.width||16,height:t.height||16,color:t.color,radius:t.radius,texture:t.texture,mass:222,friction:.5,frictionAir:.5,frictionStatic:1,position:t.position});return this.setPlayerId(t.id),t}},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={listeners:{},emitters:{},wrappedFunctions:{},anyListeners:[],onAny:function(t){i.anyListeners.push(t)},offAny:function(e){i.anyListeners=i.anyListeners.filter(function(t){return t!==e})},before:function(t,e){i.listeners[t]||(i.listeners[t]=[]),i.listeners[t].unshift(e)},after:function(t,e){i.listeners[t]||(i.listeners[t]=[]),i.listeners[t].push(e)},once:function(o,i){var a=this;this.on(o,function t(){a.off(o,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];i.apply(null,n)})},on:function(t,e){i.listeners[t]||(i.listeners[t]=[]),i.listeners[t].push(e)},off:function(t,e){i.listeners[t]&&(i.listeners[t]=i.listeners[t].filter(function(t){return t!==e}))},emit:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0<i.anyListeners.length&&i.anyListeners.forEach(function(t){try{t.call.apply(t,[null,e].concat(n))}catch(t){console.error('Error when executing any listener for event "'.concat(e,'":'),t)}});var o=i.listeners[e];o&&o.forEach(function(t){try{t.apply(null,n)}catch(t){console.error('Error when executing listener for event "'.concat(e,'":'),t)}})},bindClass:function(n,r){var i=this;Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(function(t){var o,e;"function"==typeof n[t]&&"constructor"!==t&&(o=r+"::"+t,e=n[t].bind(n),i.emitters[o]=n,i.wrappedFunctions[o]=e,n[t]=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i.emit.apply(i,[o].concat(n)),(t=i.wrappedFunctions)[o].apply(t,n)})})},unbindClass:function(r,o){var i=this;Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(t){var e,n;"function"==typeof r[t]&&"constructor"!==t&&(n=i.wrappedFunctions[e=o+"::"+t])&&(i.off(e,n),r[t]=n,delete i.wrappedFunctions[e])})},listenerCount:function(t){return this.listeners[t]?this.listeners[t].length:0}};n.default=i},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=Date.now();n.default=function(){var e=this,t=(this.tick++,this.data.tick=this.tick,this.config.hzMS||16.666),n=(this.currentPlayerId&&(this.data.currentPlayer=this.data.ents.PLAYER.find(function(t){return t.id===e.currentPlayerId})),Date.now()),r=n-o;o=n,r=Math.min(r,t),this.removedEntities.clear(),this.isClient&&this.systems.entity.cleanupDestroyedEntities(),this.physics.updateEngine(r),this.lifecycle&&this.lifecycle.triggerHook("before.update",t),this.systemsManager&&this.systemsManager.update(t),this.lifecycle&&this.lifecycle.triggerHook("after.update",t),this.changedEntities.clear(),this.saveSnapshot(this.getEntities(),this.lastProcessedInput)}},{}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=this,n=t.physics,r=t.graphics,o=(t.collisions,t.keyboard),i=t.mouse,a=t.gamepad,c=t.virtualGamepad,s=t.editor,u=t.sutra,l=(t.ghostTyper,t.lifetime),f=t.markup,t=t.defaultMovement,t=void 0===t||t,d=this.plugins,h=this.config;d.length&&(console.log("The following plugins will be loaded from `GameConfig`",d),d.forEach(function(t){"string"==typeof t||"object"===b(t)&&t.id&&"function"==typeof t.init?e.use(t):"object"===b(t)&&t.name&&"object"===b(t.config)&&e.use(t.name,t.object)}));!h.showLoadingScreen||this.isServer||this.systems["loading-screen"]||this.use(new p.default({minLoadTime:h.minLoadTime}));this.systems["message-flash"]||this.isServer||(this.use(new g.default),!this.isServer&&this.config.warnNonYantraGameRoot&&this.gameRoot&&-1===this.gameRoot.indexOf("yantra.gg")&&this.flashMessage("GameRoot is not yantra.gg, this may cause issues with loading assets and scripts"));this.use("Entity"),"matter"===n&&this.use("MatterPhysics");"physx"===n&&this.use("PhysXPhysics");this.use("SnapshotManager"),l&&this.use("Lifetime");this.isServer||(d={protobuf:h.protobuf,deltaCompression:h.deltaCompression,msgpack:h.msgpack},this.use("Client",d),s&&this.use("Editor"),o&&this.use("Keyboard"),i&&this.use("Mouse"),a&&this.use("Gamepad"),c&&this.use("GamepadGUI",a),f&&this.use("Markup"),u&&this.use("Sutra",{defaultMovement:t}),t&&this.systems.sutra&&this.systems.sutra.bindDefaultMovementSutra(mode),this.use("GhostTyper"),this.use(new y.default),r&&(this.use("Graphics"),this.storage.get("graphics"),(r="string"==typeof r?[r]:r).includes("ascii")&&this.use("ASCIIGraphics",{camera:this.config.camera}),r.includes("babylon")&&this.use("BabylonGraphics",{camera:this.config.camera}),r.includes("css")&&this.use("CSSGraphics",{camera:this.config.camera}),r.includes("css3D")&&this.use("CSS3DGraphics",{camera:this.config.camera}),r.includes("phaser")&&this.use("PhaserGraphics",{camera:this.config.camera}),r.includes("three"))&&this.use("ThreeGraphics",{camera:this.config.camera}))};var p=r(t("../plugins/loading-screen/LoadingScreen.js")),y=(r(t("../plugins/typer-ghost/GhostTyper.js")),r(t("../plugins/physics/Physics.js"))),g=r(t("../plugins/message-flash/FlashMessage.js"));function r(t){return t&&t.__esModule?t:{default:t}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{"../plugins/loading-screen/LoadingScreen.js":28,"../plugins/message-flash/FlashMessage.js":29,"../plugins/physics/Physics.js":30,"../plugins/typer-ghost/GhostTyper.js":32}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=!1,l=0,f=Date.now(),d=[],h=0;n.default=function t(e,n){u||(u=!0,f=Date.now());for(var r=e.config.hzMS||16.666,o=(e.mode="local",Date.now()),i=(o-f)/1e3,a=(0<i&&(d.push(1/i),60<d.length&&d.shift(),++h%60==0)&&(c=d.reduce(function(t,e){return t+e},0)/d.length,e.emit("fps",c),d=[]),f=o,l+=i,r/1e3);a<=l;)e.gameTick(),l-=a;var c,s=l/a;e.graphics.forEach(function(t){t.render(e,s)}),e.localGameLoopRunning&&(c=function(){t(e,n)},"undefined"==typeof window?setTimeout(c,0):window.requestAnimationFrame(c))}},{}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=!1,s=null,u=16.666,l=0,f=Date.now(),d=[],h=0;n.default=function t(e){c||(c=!0,f=Date.now()),e.onlineGameLoopRunning=!0,e.mode="online";var n,r=Date.now(),o=(r-f)/1e3;if(0<o&&(d.push(1/o),60<d.length&&d.shift(),++h%60==0)&&(n=d.reduce(function(t,e){return t+e},0)/d.length,e.emit("fps",n),d=[]),f=r,l+=o,e.latestSnapshot&&e.latestSnapshot.id!==s)for(;0<e.snapshotQueue.length;){var i=e.snapshotQueue.shift();i.state.forEach(function(t){e.inflateEntity(t)}),s=i.id}for(;u/1e3<=l;)e.gameTick(),l-=u/1e3;var a=l/.016666;e.graphics.forEach(function(t){t.render(e,a)}),e.onlineGameLoopRunning&&requestAnimationFrame(function(){t(e)})}},{}],22:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.data={}}var e,n,r;return e=t,(n=[{key:"clear",value:function(){this.data={}}},{key:"setItem",value:function(t,e){this.data[t]=e}},{key:"getItem",value:function(t){return this.data[t]||null}},{key:"removeItem",value:function(t){delete this.data[t]}},{key:"key",value:function(t){return Object.keys(this.data)[t]||null}},{key:"length",get:function(){return Object.keys(this.data).length}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();n.default=r},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t=(t=t("./MemoryBackend.js"))&&t.__esModule?t:{default:t};r=null,r="undefined"!=typeof window&&window.localStorage?window.localStorage:new t.default,o="mantra-";var r,o,t={setBackend:function(t){r=t},setPrefix:function(t){o=t},clear:function(){r.clear()},set:function(t,e){e=JSON.stringify(e);r.setItem(o+t,e)},get:i,remove:function(t){r.removeItem(o+t)},getAllKeys:function(){for(var t=[],e=0;e<r.length;e++){var n=r.key(e);n.startsWith(o)&&t.push(n.substring(o.length))}return t},getAllKeysWithData:function(){for(var t={},e=0;e<r.length;e++){var n=r.key(e);n&&n.startsWith(o)&&(t[n=n.substring(o.length)]=i(n))}return t}};function i(e){if(null===(e=r.getItem(o+e)))return null;try{return JSON.parse(e)}catch(t){return e}}n.default=t},{"./MemoryBackend.js":22}],24:[function(t,e,n){"use strict";function O(){O=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==_(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(_(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function r(){var c;return c=O().mark(function t(e){var n,r,o;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0<(n=this).worlds.length&&n.worlds.forEach(function(t,e){t.unload&&(console.log(t.id,"world.unload",t.unload),n.worlds.splice(e,1),t.unload()),n.unload(t.id)}),n.updateEntity(n.currentPlayerId,{meta:{lives:0},sutra:null}),"object"===_(e))return n.systems.entity.removeAllEntities(),n.use(e),t.abrupt("return");t.next=8;break;case 8:if(n.systems.entity.removeAllEntities(!0),o=e,r=WORLDS.worlds[o]){t.next=16;break}return console.error("World ".concat(o," not found")),t.abrupt("return");case 16:o=new r,n.once("plugin::loaded::"+o.id,function(){}),setTimeout(function(){},400),o.preload,n.use(o),n.storage.set("world",e);case 22:case"end":return t.stop()}},t,this)}),(r=function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return r.apply(this,arguments)}},{}],25:[function(t,e,n){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(O(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function a(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}}function r(){return(r=a(_().mark(function t(e,n){var r,o,i=this;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isServer)return t.abrupt("return");t.next=2;break;case 2:"string"==typeof e&&(e=[e]),r=function(){var e=a(_().mark(function t(r){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=i.scriptRoot+r,n.onload=function(){t(r)},n.onerror=function(){e("Error loading stylesheet: ".concat(r))},document.head.appendChild(n)}));case 1:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),o=0;case 5:if(o<e.length)return t.prev=6,t.next=9,r(e[o]);t.next=17;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.error(t.t0);case 14:o++,t.next=5;break;case 17:"function"==typeof n&&n();case 18:case"end":return t.stop()}},t,this,[[6,11]])}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){return r.apply(this,arguments)}},{}],26:[function(t,e,n){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return a};var s,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(s){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,i,a,c,e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),r=new P(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,c=d,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:s,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=s,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=f(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),e}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function b(){}function m(){}function v(){}var e={},w=(i(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==t&&u.call(w,r)&&(e=w),v.prototype=b.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function k(a,c){var e;l(this,"_invoke",{value:function(n,r){function t(){return new c(function(t,e){!function e(t,n,r,o){var i,t=f(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):c.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=s,t.done=!0,t}).next=t}throw new TypeError(O(e)+" is not iterable")}return l(j,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(j),t},a.awrap=function(t){return{__await:t}},x(k.prototype),i(k.prototype,n,function(){return this}),a.AsyncIterator=k,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new k(c(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=s)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=s),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=s),g}},a}function s(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function a(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){s(r,e,n,o,i,"next",t)}function i(t){s(r,e,n,o,i,"throw",t)}o(void 0)})}}function r(){return(r=a(_().mark(function t(e,n){var r,o,i=this;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isServer)return t.abrupt("return");t.next=2;break;case 2:"string"==typeof e&&(e=[e]),r=function(){var e=a(_().mark(function t(r){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){var n=document.createElement("script");n.type="text/javascript",n.defer=!0,n.src=i.scriptRoot+r,n.onload=function(){t(r)},n.onerror=function(){e("Error loading script: ".concat(r))},document.head.appendChild(n)}));case 1:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),o=0;case 5:if(o<e.length)return t.prev=6,t.next=9,r(e[o]);t.next=17;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.error(t.t0);case 14:o++,t.next=5;break;case 17:n&&n();case 18:case"end":return t.stop()}},t,this,[[6,11]])}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){return r.apply(this,arguments)}},{}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if(!t)return t;var e={red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",white:"#FFFFFF",yellow:"#FFFF00",purple:"#800080",orange:"#FFA500",pink:"#FFC0CB",indigo:"#4B0082",violet:"#EE82EE"};if("number"==typeof t)return t;if("string"==typeof t&&t.startsWith("#"))return parseInt(t.replace("#",""),16);if("string"==typeof t&&e[t.toLowerCase()])return parseInt(e[t.toLowerCase()].replace("#",""),16);return console.error("Unrecognized color format:",t),parseInt("000000",16)}},{}],28:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,c,s,u=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=r;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");this.id=r.id,this.plugins=[],this.minLoadTime=t.minLoadTime||330,this.startTime=Date.now(),this.loadedPluginsCount=0,this.confirmedLoadedPlugins=[],this.pluginTimers={},this.pluginElements={}}var t,e,n;return t=r,(e=[{key:"init",value:function(t){var e=this,n=this,t=(this.game=t,this.game.systemsManager.addSystem(this.id,this),Object.keys(this.game._plugins));this.plugins=this.plugins.concat(t),this.plugins.sort(),this.createLoadingScreen(),this.game.on("plugin::loading",function(t){-1===e.plugins.indexOf(t)&&(e.plugins.push(t),e.createPluginLoader(t))}),this.game.on("plugin::loaded",function(t){e.markPluginAsLoaded(t)}),this.game.on("game::ready",function(){var t=Date.now(),t=e.minLoadTime-(t-e.startTime);n.gameReadyHandler(),0<t?setTimeout(function(){n.unload()},.33*t):n.unload()})}},{key:"gameReadyHandler",value:function(){var e=this,t=Date.now()-this.startTime,n=Math.max(this.minLoadTime-t,0);this.plugins.forEach(function(t){e.isPluginLoaded(t)||e.fastTrackLoading(t,n)})}},{key:"isPluginLoaded",value:function(t){t=this.pluginElements[t];return t&&"100%"===t.style.width}},{key:"fastTrackLoading",value:function(t,e){var n,r=this,o=(clearInterval(this.pluginTimers[t]),this.pluginElements[t]);o&&(e=e/(100-(n=parseInt(o.style.width,10)||0)),this.pluginTimers[t]=setInterval(function(){n<100?(n++,o.style.width=n+"%"):clearInterval(r.pluginTimers[t])},e))}},{key:"createLoadingScreen",value:function(){this.loadingScreen=document.createElement("div"),this.loadingScreen.id="loadingScreen",this.loadingScreen.classList.add("crt-background");var t=document.createElement("div"),e=(t.classList.add("crt-background"),this.loadingScreen.appendChild(t),document.createElement("div")),e=(e.classList.add("crt-glow"),t.appendChild(e),document.createElement("div")),e=(e.classList.add("crt-scanlines"),t.appendChild(e),this.crtBackground=t,this.setupStyles(this.crtBackground,{position:"fixed",top:"0",paddingTop:"10px",left:"10px",width:"100%",height:"100%",backgroundColor:"black",color:"white",zIndex:"9999",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),document.createElement("div")),t=(this.setupStyles(e,{width:"80%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px"}),document.createElement("div"));t.textContent="Mantra.js Game Starting",this.setupStyles(t,{fontSize:"20px",fontWeight:"bold",left:"40px",position:"absolute"}),this.pluginCounter=document.createElement("div"),this.updatePluginCounter(),this.setupStyles(this.pluginCounter,{fontSize:"16px"}),e.appendChild(t),e.appendChild(this.pluginCounter),this.crtBackground.appendChild(e),this.createPluginLoaders(),document.body.appendChild(this.loadingScreen)}},{key:"updatePluginCounter",value:function(){}},{key:"createPluginLoader",value:function(t){var e=document.createElement("div"),n=(this.setupStyles(e,{display:"flex",alignItems:"center",margin:"5px",width:"80%"}),document.createElement("div")),r=(n.textContent=t,this.setupStyles(n,{marginRight:"10px",whiteSpace:"nowrap"}),document.createElement("div")),o=(this.setupStyles(r,{width:"60%",marginLeft:"auto"}),document.createElement("div"));this.setupStyles(o,{width:"0%",height:"20px",backgroundColor:"limegreen"}),r.appendChild(o),e.appendChild(n),e.appendChild(r),this.crtBackground.appendChild(e),this.pluginElements[t]=o,this.pluginTimers[t]=this.initializeLoadingTimer(o,t)}},{key:"createPluginLoaders",value:function(){var e=this;this.plugins.forEach(function(t){e.createPluginLoader(t)})}},{key:"initializeLoadingTimer",value:function(t,e){var n=this,r=0,o=this.minLoadTime+5e3*Math.random();return setInterval(function(){r<100?(r++,t.style.width=r+"%"):clearInterval(n.pluginTimers[e])},o/100)}},{key:"markPluginAsLoaded",value:function(t){clearInterval(this.pluginTimers[t]);var e=this.pluginElements[t];e&&this.animateToCompletion(e,t),-1===this.confirmedLoadedPlugins.indexOf(t)&&(this.confirmedLoadedPlugins.push(t),this.loadedPluginsCount++,this.updatePluginCounter())}},{key:"animateToCompletion",value:function(t,e){var n=this,r=parseInt(t.style.width,10)||0,o=(500*Math.random()+200)/(100-r);this.pluginTimers[e]=setInterval(function(){r<100?(r++,t.style.width=r+"%"):clearInterval(n.pluginTimers[e])},o)}},{key:"setupStyles",value:function(t,e){Object.assign(t.style,e)}},{key:"unload",value:function(){Object.values(this.pluginTimers).forEach(clearInterval),this.loadingScreen&&this.loadingScreen.parentNode&&this.loadingScreen.parentNode.removeChild(this.loadingScreen)}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}();a=u,s="loading-screen",(c=i(c="id"))in a?Object.defineProperty(a,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[c]=s,n.default=u},{}],29:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function c(t,e,n){(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function s(t){t=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===i(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=r;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");this.id=r.id,this.defaultDuration=t.defaultDuration||3e3,this.flashContainer=null,this.style=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:"fixed",top:"10px",right:"10px",zIndex:"1000"},t.style),this.typeStyles={error:{backgroundColor:"rgba(255, 0, 0, 0.7)",color:"white"},warn:{backgroundColor:"rgba(255, 255, 0, 0.7)",color:"black"},info:{backgroundColor:"rgba(0, 0, 255, 0.7)",color:"white"},success:{backgroundColor:"rgba(0, 255, 0, 0.7)",color:"white"}}}var t,e,n;return t=r,(e=[{key:"init",value:function(t){this.game=t,this.game.systemsManager.addSystem(this.id,this),this.game.flashMessage=this.showMessage.bind(this),this.createFlashContainer()}},{key:"createFlashContainer",value:function(){this.flashContainer||(this.flashContainer=document.createElement("div"),this.flashContainer.id="flash-messages-container",Object.assign(this.flashContainer.style,this.style),document.body.appendChild(this.flashContainer))}},{key:"showMessage",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultDuration,n=document.createElement("div"),r="info",o=t,r=("object"===i(t)&&null!==t&&(r=t.type||r,o=t.message||o,e=!0!==t.sticky?t.hasOwnProperty("duration")?t.duration:e:null),this.typeStyles[r]||{}),r=(Object.assign(n.style,{cursor:"pointer",margin:"5px 0",fontSize:"24px",padding:"10px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},r),"object"===i(t)&&t.style&&Object.assign(n.style,t.style),document.createElement("span"));r.innerHTML=o,n.appendChild(r),n.onclick=function(){return n.remove()},this.flashContainer.appendChild(n),null!==e&&setTimeout(function(){n.remove()},e)}},{key:"unload",value:function(){this.flashContainer&&(this.flashContainer.remove(),this.flashContainer=null)}}])&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}();c(r,"id","flash"),n.default=r},{}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(t=t("./applyGravity.js"))&&t.__esModule?t:{default:t};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function c(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}t=n.default=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=e.id,this.applyGravity=o.default.bind(this)}var t,n,r;return t=e,(n=[{key:"init",value:function(t){var n=this;(this.game=t).systemsManager.addSystem(e.id,this),this.Vector={add:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},sub:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},mult:function(t,e){return{x:t.x*e,y:t.y*e}},div:function(t,e){return{x:t.x/e,y:t.y/e}},magnitude:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},normalize:function(t){var e=n.Vector.magnitude(t);return 0<e?n.Vector.div(t,e):{x:0,y:0}}}}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(t,"id","physics"),a(t,"removable",!1)},{"./applyGravity.js":31}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){var r,o,i,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],c=this.game;t&&e&&(i=this.Vector,r=i.sub(e.position,t.position),(o=i.magnitude(r))<.5||(r=i.normalize(r),i=n*t.mass*e.mass/(o*o),i=Math.min(i,1),n=a?1:-1,c.applyForce(e.id,{x:n*r.x*i,y:n*r.y*i})))}},{}],32:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function i(t,e,n){e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function a(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c,s,l,f=function(){function t(){u(this,t),this.id=t.id,this.typers=[]}return i(t,[{key:"init",value:function(t){this.game=t,this.game.systemsManager.addSystem(this.id,this)}},{key:"createQueuedText",value:function(t){var e=this,n=new d(this.game,t.x,t.y,"",t.style,function(){return e.removeTyper(n)});return this.typers.push(n),n}},{key:"queueTextForTyper",value:function(t,e,n,r){t.queueText(e,n,r)}},{key:"startTyperQueue",value:function(t){t.processQueue()}},{key:"createText",value:function(t){var e=this,n=new d(this.game,t.x,t.y,t.text,t.style,t.duration,t.removeDuration,function(){return e.removeTyper(n)});return this.typers.push(n),n}},{key:"update",value:function(){var e=this;this.typers.forEach(function(t){e.game.tick%t.framesToWait!=0||t.complete||t.type()})}},{key:"removeTyper",value:function(e){this.typers=this.typers.filter(function(t){return t!==e})}}]),t}(),d=(c=f,l="typer-ghost",(s=a(s="id"))in c?Object.defineProperty(c,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[s]=l,function(){function s(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=4<arguments.length?arguments[4]:void 0,i=5<arguments.length?arguments[5]:void 0,a=6<arguments.length?arguments[6]:void 0,c=7<arguments.length?arguments[7]:void 0;u(this,s),this.game=t,this.text="",this.ogText=r,this.duration=i||5e3,this.removeDuration=a,this.style=o,this.typerText=this.createTextElement(e,n,o),this.framesToWait=Math.floor((i||5e3)/(33.33*r.length)),this.frameCounter=0,this.lastUpdate=0,this.complete=!1,this.removeTimer=null,this.textQueue=[],this.onRemove=c}return i(s,[{key:"queueText",value:function(t,e,n){this.textQueue.push({text:t,duration:e,removeDuration:n})}},{key:"processQueue",value:function(){var t,e,n;0<this.textQueue.length&&(t=(n=this.textQueue.shift()).text,e=n.duration,n=n.removeDuration,this.updateText(t,e,n))}},{key:"createTextElement",value:function(t,e,n){this.game.data.camera.position,this.game.getEntity(this.game.currentPlayerId);var r=document.createElement("div");return Object.assign(r.style,n,{position:"absolute",left:t+"px",top:e+"px"}),document.body.appendChild(r),r}},{key:"type",value:function(){this.text.length?(this.typerText.textContent+=this.text[0],this.text=this.text.substr(1),this.isTyping=!0):this.isTyping&&(this.complete=!0,this.isTyping=!1,this.setRemoveTimer())}},{key:"setRemoveTimer",value:function(){var t=this;this.removeDuration?this.removeTimer=setTimeout(function(){t.typerText.textContent="",t.processQueue()},this.removeDuration):this.processQueue()}},{key:"updateText",value:function(t,e,n){this.complete=!1,this.text=t,this.ogText=t,this.duration=e||this.duration,this.removeDuration=n,this.framesToWait=Math.floor(this.duration/(33.33*t.length)),this.typerText.textContent="",this.isTyping=!1}}]),s}());n.default=f},{}]},{},[7])(7)});