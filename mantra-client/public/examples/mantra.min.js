!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MANTRA=e()}(function(){return function r(o,i,a){function c(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return c(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=r?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e);var n,r=c(o);function o(e,t){if(this instanceof o)return(e=r.call(this,e,t)).entityActions=new Map,e;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"recordAction",value:function(e,t){var n=this.entityActions.get(e)||new Map;n.set(t,Date.now()),this.entityActions.set(e,n)}},{key:"getLastActionTime",value:function(e,t){e=this.entityActions.get(e);return e&&e.get(t)||0}}])&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(((e=e("./Component.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./Component.js":2}],2:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.name=e,this.data={},this.game=t}var e,t,r;return e=n,(t=[{key:"set",value:function(e,t){var n=Array.isArray(e)?e[0]:e;if(this.game){var r=this.game.components.lockedProperties.get(n);if(this.isLocked(r,this.name))return}if(Array.isArray(e)){for(var o=this.data,i=0;i<e.length-1;i++)o[e[i]]||(o[e[i]]={}),o=o[e[i]];o[e[e.length-1]]=t}else this.data[e]=t;this.game&&this.game.entities&&this.game.entities.has(n)&&(this.game.entities.get(n)[this.name]=this.get(n))}},{key:"get",value:function(e){if(Array.isArray(e)){for(var t=this.data,n=0;n<e.length;n++){if(void 0===t[e[n]])return null;t=t[e[n]]}return t}return void 0===this.data[e]||null===this.data[e]?null:this.data[e]}},{key:"remove",value:function(e){if(Array.isArray(e)){for(var t=this.data,n=0;n<e.length-1;n++){if(void 0===t[e[n]])return;t=t[e[n]]}delete t[e[e.length-1]]}else delete this.data[e]}},{key:"isLocked",value:function(e,t){if(!e)return!1;if(Array.isArray(t)){for(var n=e,r=0;r<t.length;r++){if(void 0===n[t[r]])return!1;n=n[t[r]]}return!0}return void 0!==e[t]}}])&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();n.default=r},{}],3:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=r?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e);var n,r=c(o);function o(e,t){if(this instanceof o)return(e=r.call(this,e,t)).timers={},e;throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"setTimer",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.timers[e]={startTime:Date.now(),duration:1e3*t,isInterval:n,completed:!1}}},{key:"getTimer",value:function(e){return this.timers[e]}},{key:"checkTimer",value:function(e){var t,n;return!!this.timers[e]&&(t=this.timers[e],n=Date.now(),!t.completed)&&n>=t.startTime+t.duration&&(t.isInterval?(this.resetTimer(e),"intervalCompleted"):t.completed=!0)}},{key:"resetTimer",value:function(e){this.timers[e]&&(this.timers[e].startTime=Date.now(),this.timers[e].completed=!1)}},{key:"removeTimer",value:function(e){delete this.timers[e]}}])&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(((e=e("./Component.js"))&&e.__esModule?e:{default:e}).default);n.default=e},{"./Component.js":2}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(e=e("../plugins/entity/lib/util/ensureColorInt.js"))&&e.__esModule?e:{default:e};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function y(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){e=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===b(e)?e:String(e)}n.default=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.game=e,this.config={position:{x:0,y:0,z:0},rotation:0,size:{width:16,height:16,depth:16},offset:{x:0,y:0,z:0},meta:{}}}var e,n,r;return e=t,(n=[{key:"id",value:function(e){return this.config.id=e,this}},{key:"type",value:function(e){return"TEXT"===(this.config.type=e)&&(this.config.body=!1),this}},{key:"name",value:function(e){return this.config.name=e,this}},{key:"kind",value:function(e){return this.config.kind=e,this}},{key:"startingPosition",value:function(e,t){return this.config.startingPosition={x:e,y:t},this}},{key:"body",value:function(){return this.config.body=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"friction",value:function(e){return this.config.friction=e,this.config.frictionStatic=e,this.config.frictionAir=e,this}},{key:"frictionStatic",value:function(e){return this.config.frictionStatic=e,this}},{key:"frictionAir",value:function(e){return this.config.frictionAir=e,this}},{key:"velocity",value:function(e,t){return this.config.velocity={x:e,y:t},this}},{key:"rotation",value:function(e){return this.config.rotation=e,this}},{key:"mass",value:function(e){return this.config.mass=e,this}},{key:"density",value:function(e){return this.config.density=e,this}},{key:"health",value:function(e){return this.config.health=e,this}},{key:"score",value:function(e){return this.config.score=e,this}},{key:"lifetime",value:function(e){return this.config.lifetime=e,this}},{key:"size",value:function(e,t,n){return this.config.size={width:e,height:t=void 0===t?e:t},this.config.size.depth=void 0!==n?n:t,this}},{key:"width",value:function(e){return this.config.size.width=e,this}},{key:"height",value:function(e){return this.config.size.height=e,this}},{key:"depth",value:function(e){return this.config.size.depth=e,this}},{key:"radius",value:function(e){return this.config.radius=e,this}},{key:"shape",value:function(e){return this.config.shape=e,this}},{key:"color",value:function(e){return this.config.color=(0,a.default)(e),this}},{key:"texture",value:function(e){return this.config.texture=e,this}},{key:"style",value:function(e){return this.config.style=e,this}},{key:"maxSpeed",value:function(e){return this.config.maxSpeed=e,this}},{key:"owner",value:function(e){return this.config.owner=e,this}},{key:"hasInventory",value:function(){return this.config.hasInventory=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"isSensor",value:function(){return this.config.isSensor=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"isStatic",value:function(){return this.config.isStatic=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"_addEventHandler",value:function(r,e){if("function"==typeof this.config[r]&&Array.isArray(this.config[r].handlers)){if(void 0===e)throw new Error("Handler for ".concat(r," event is undefined"));this.config[r].handlers.push(e)}else{var o;"boolean"==typeof e&&(this.config[r]=e),"function"==typeof e&&(o=[e],this.config[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];try{o.forEach(function(e){"function"==typeof e?e.apply(void 0,t):console.warn("handler is not a function",e,t)})}catch(e){console.error("Error in event handler for ".concat(r,":"),e)}},this.config[r].handlers=o)}return this}},{key:"pointerdown",value:function(e){return this._addEventHandler("pointerdown",e)}},{key:"pointerup",value:function(e){return this._addEventHandler("pointerup",e)}},{key:"pointermove",value:function(e){return this._addEventHandler("pointermove",e)}},{key:"pointerover",value:function(e){return this._addEventHandler("pointerover",e)}},{key:"pointerout",value:function(e){return this._addEventHandler("pointerout",e)}},{key:"pointerenter",value:function(e){return this._addEventHandler("pointerenter",e)}},{key:"pointerleave",value:function(e){return this._addEventHandler("pointerleave",e)}},{key:"collisionStart",value:function(e){return this._addEventHandler("collisionStart",e)}},{key:"collisionActive",value:function(e){return this._addEventHandler("collisionActive",e)}},{key:"collisionEnd",value:function(e){return this._addEventHandler("collisionEnd",e)}},{key:"onDrop",value:function(e){return this._addEventHandler("onDrop",e)}},{key:"onUpdate",value:function(e){return this._addEventHandler("update",e)}},{key:"afterItemCollected",value:function(e){return this._addEventHandler("afterItemCollected",e)}},{key:"afterRemoveEntity",value:function(e){return this._addEventHandler("afterRemoveEntity",e)}},{key:"afterCreateEntity",value:function(e){return this._addEventHandler("afterCreateEntity",e)}},{key:"sutra",value:function(e,t){return this.config.sutra={rules:e,config:t},this}},{key:"exit",value:function(e){return this.config.exit=e,this}},{key:"collectable",value:function(){return this.config.collectable=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this}},{key:"value",value:function(e){return this.config.value=e,this}},{key:"meta",value:function(e){return"object"===b(e)&&null!==e&&("object"===b(this.config.meta)&&null!==this.config.meta?(console.log("MERGING THE IDEA",e),this.config.meta=y(y({},this.config.meta),e)):this.config.meta=e),this}},{key:"text",value:function(e){return this.config.text=e,this}},{key:"position",value:function(e,t,n){return this.config.position={x:e,y:t},"number"==typeof n&&(this.config.position.z=n),this}},{key:"x",value:function(e){return this.config.position.x=e,this}},{key:"y",value:function(e){return this.config.position.y=e,this}},{key:"z",value:function(e){return this.config.position.z=e,this}},{key:"container",value:function(e){return this.config.container=e,this}},{key:"offset",value:function(e,t,n){return"object"===b(this.config.offset)&&null!==this.config.offset||(this.config.offset={}),"number"==typeof e&&(this.config.offset.x=e),"number"==typeof t&&(this.config.offset.y=t),"number"==typeof n&&(this.config.offset.z=n),this}},{key:"build",value:function(){return this.config}},{key:"clone",value:function(e){return this.config.clone=e,this}},{key:"repeat",value:function(e){return this.config.repeat=e,this}},{key:"createEntity",value:function(){if("number"==typeof this.config.clone){for(var e=[],t=0;t<this.config.clone;t++){var n=y({},this.config);e.push(this.game.createEntity(n))}return e}var r;if("number"!=typeof this.config.repeat)return r=y({},this.config),"PLAYER"===(r=this.game.createEntity(r)).type&&this.game.setPlayerId(r.id),r;for(var o=[],i=0;i<this.config.repeat;i++){var a=y({},this.config),c=a.position.x+i*a.offset.x,s=a.position.y+i*a.offset.y,u=a.position.z+i*a.offset.z;if("number"==typeof c&&"number"==typeof s&&(a.position={x:c,y:s,z:a.position.z}),"number"!=typeof u||isNaN(u)||(a.position.z=u),"object"===b(this.repeatModifiers)&&null!==this.repeatModifiers)for(var f=0,l=Object.entries(this.repeatModifiers);f<l.length;f++){var d=p(l[f],2),h=d[0],d=d[1];"function"==typeof d&&(a[h]=d(i,this.config.repeat,a[h]))}delete a.repeat,delete a.repeatModifiers,o.push(this.game.createEntity(a))}return o}},{key:"repeaters",value:function(e){return this.repeatModifiers=e,this}},{key:"mix",value:function(o){var e,i=this;for(e in o)!function(r){var e,t,n=o[r];"function"==typeof n?("function"!=typeof i.config[r]&&(i.config[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.config[r].handlers.forEach(function(e){return e.apply(void 0,t)})},i.config[r].handlers=[]),i.config[r].handlers.push(n)):"object"===b(n)&&i.config[r]&&"object"===b(i.config[r])?i.config[r]=y(y({},i.config[r]),n):("color"===r&&void 0!==i.config[r]&&(e=(0,a.default)(i.config[r]),t=(0,a.default)(n),n=(e>>16)+(t>>16)>>1<<16|(e>>8&255)+(t>>8&255)>>1<<8|(255&e)+(255&t)>>1),i.config[r]=n)}(e);return this}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},{"../plugins/entity/lib/util/ensureColorInt.js":27}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var i=r(e("./Component/Component.js")),a=r(e("./lib/Game/construct.js")),s=r(e("./lib/Game/use.js")),u=r(e("./lib/Game/unload.js")),f=r(e("./lib/Game/start.js"));function r(e){return e&&e.__esModule?e:{default:e}}function O(){O=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==_(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(_(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function l(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function d(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],(e=p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){e=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===_(e)?e:String(e)}n.Game=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=r;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");t=d(d({},{isClient:!0,isEdgeClient:!1,isServer:!1,isOfflineMode:void 0,plugins:[],showLoadingScreen:!0,minLoadTime:330,loadDefaultPlugins:!0,width:800,height:600,fieldOfView:1600,fps:60,useFoV:!1,physics:"matter",graphics:["css"],collisions:!0,camera:{},gravity:{},keyboard:!0,mouse:!0,gamepad:!1,virtualGamepad:!1,editor:!0,sutra:!0,lifetime:!1,defaultMovement:!0,defaultMouseMovement:!0,protobuf:!1,msgpack:!1,deltaCompression:!1,deltaEncoding:!0,defaultPlayer:!1,gameRoot:"https://yantra.gg/mantra",scriptRoot:null,assetRoot:null,options:{},mode:"topdown",multiplexGraphicsHorizontally:!1,addLifecycleHooksToAllPlugins:!0}),e);t.isServer&&(t.showLoadingScreen=!1,t.isClient=!1),this.config=t,this.use=(0,s.default)(this,t.plugins),this.unload=(0,u.default)(this,t.plugins),(0,a.default)(this,t.plugins),this.start=f.default.bind(this)}var e,t,n,c,o;return e=r,(t=[{key:"update",value:function(e){this.systemsManager.update(e)}},{key:"render",value:function(){this.systemsManager.render()}},{key:"addComponent",value:function(e,t,n){this.components[t]||(this.components[t]=new i.default(t,this)),null!=(n="actionRateLimiter"===t?new Map:n)&&this.components[t].set(e,n)}},{key:"getComponent",value:function(e,t){return this.components.hasOwnProperty(t)?this.components[t].get(e):null}},{key:"addSystem",value:function(e,t){return this.systemsManager.addSystem(e,t)}},{key:"getSystem",value:function(e){return this.systemsManager.getSystem(e)}},{key:"removeSystem",value:function(e){return this.systemsManager.removeSystem(e.toLowerCase())}},{key:"updateGraphic",value:function(t){this.graphics.forEach(function(e){e.updateGraphic(t)})}},{key:"loadPluginScript",value:function(r){var e;return console.log("Loading",r),"object"===_(this.pluginChecksums)&&"string"==typeof(e=this.pluginChecksums[r])&&(r+="?c="+e),new Promise(function(e,t){var n=document.createElement("script");n.src=r,n.defer=!0,n.onload=function(){return e()},n.onerror=function(){return t(new Error("Failed to load script: ".concat(r)))},document.head.appendChild(n)})}},{key:"removePlugin",value:function(e){var t=this._plugins[e];t&&(this.systems[t.id]&&this.removeSystem(t.id),"function"==typeof t.unload&&t.unload(),delete this._plugins[e])}},{key:"setControls",value:function(e){this.controls=e,this.systems["entity-input"]&&(this.systems["entity-input"].controlMappings=e)}},{key:"setSize",value:function(e,t){this.width=e,this.height=t}},{key:"setPlayerId",value:function(e){console.log("setting playerID",e),this.currentPlayerId=e}},{key:"getCurrentPlayer",value:function(){return this.getEntity(this.currentPlayerId)}},{key:"getPlayerFieldOfView",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r="object"===_(e)?e:this.getEntity(e);return r?(r={minX:(r=r.position).x-t,minY:r.y-t,maxX:r.x+t,maxY:r.y+t},this.systems.rbush?this.systems.rbush.search(r,n):void console.log("Warning: no rbush system found, cannot perform getPlayerFieldOfView query")):(console.log("Warning: no entity found for entId",e),[])}},{key:"createContainer",value:function(e){return e.type="CONTAINER",e.style=e.style||{},e.style.layout=e.layout||"none",e.style.grid=e.grid||{},e.items=e.items||[],this.createEntity(e)}},{key:"playNote",value:function(e,t){console.log("Tone Plugin not loaded. Cannot play tone note.")}},{key:"setGravity",value:function(){this.physics&&this.physics.setGravity(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)}},{key:"applyGravity",value:function(e,t,n){this.systems.physics.applyGravity(e,t,n,3<arguments.length&&void 0!==arguments[3]&&arguments[3])}},{key:"setPosition",value:function(e,t){this.physics.setPosition(e,t)}},{key:"applyForce",value:function(e,t){this.physics.applyForce(e,t)}},{key:"applyPosition",value:function(e,t){t={x:body.position.x+t.x,y:body.position.y+t.y};this.physics.setPosition(e,t)}},{key:"rotate",value:function(e,t){this.physics.rotateBody(e,.022*t)}},{key:"rotateCamera",value:function(e){}},{key:"setZoom",value:function(){}},{key:"setCameraMode",value:function(e){this.data.camera.mode=e}},{key:"setCameraPosition",value:function(e,t){game.data.camera.offsetX=e,game.data.camera.offsetY=t}},{key:"zoom",value:function(e){this.camera&&this.camera.zoom?this.camera.zoom(e):console.log("warning: no camera.zoom method found")}},{key:"shakeCamera",value:function(t,n){this.graphics.forEach(function(e){e.cameraShake&&e.shakeCamera(t,n)})}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"addAsset",value:function(e,t,n,r){this.preloader?this.preloader.addAsset(e,t,n,r):this.queuedAssets[n]=path}},{key:"addAssets",value:function(e){for(var t in e){var n=e[t];this.addAsset(n.url,n.type,t,n)}}},{key:"setBackground",value:function(e){}},{key:"randomColor",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"int",t=Math.floor(16777215*Math.random());return t="int"!==e?"#"+t.toString(16):t}},{key:"randomForce",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=2*Math.random()*Math.PI,e=Math.random()*e;return{x:Math.cos(t)*e,y:Math.sin(t)*e}}},{key:"randomPositionSquare",value:function(e,t,n){return{x:e+2*Math.random()*n-n,y:t+2*Math.random()*n-n}}},{key:"radialSpread",value:function(e,t,n,r,o){o=o/r*2*Math.PI;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}},{key:"randomPositionRadial",value:function(e,t,n,r){var o=2*Math.random()*Math.PI,n=Math.random()*n;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}},{key:"exists",value:function(e){return!!(this.data&&this.data.ents&&this.data.ents._)&&!!this.data.ents._[e]}},{key:"createText",value:function(e){return e.type="TEXT",e.body=!1,this.createEntity(e)}},{key:"createBorder",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.width,t=(void 0===t&&this.width,e.height),t=(void 0===t&&this.height,e.thickness),n=void 0===t?8:t,r=(e.color,e.collisionStart),o=this;o.systems.border?o.systems.border.createBorder({width:o.width,height:o.height,thickness:n,collisionStart:r}):o.use("Border",{},function(){o.systems.border.createBorder({width:o.width,height:o.height,thickness:n,collisionStart:r})})}},{key:"stop",value:function(){this.getSystem("client").stop()}},{key:"pause",value:function(){this.systems["chrono-control"]&&this.systems["chrono-control"].pause()}},{key:"rewind",value:function(e){this.systems["chrono-control"]&&this.systems["chrono-control"].rewind(e)}},{key:"reset",value:function(e){var t,n=this;for(t in(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&(this.rules=this.createSutra()),this.systems.sutra&&this.systems.sutra.bindInputsToSutraConditions(),n.listeners)-1===t.indexOf("::")&&delete n.listeners[t];this.config.useFoV=!1,this.setControls({}),this.setCameraMode("follow"),this.systems.sutra&&this.systems.sutra.bindDefaultMovementSutra(e),this.deferredEntities={},n.viewportCenterOffsetX=0,n.viewportCenterOffsetY=0,n.zoom(1)}},{key:"useSutra",value:function(e,t){this.rules?(this.rules.use(e,t),this.systems["gui-sutra"]&&this.systems["gui-sutra"].setRules(this.rules)):console.log("Warning: no rules engine found, cannot use sutra",e,t)}},{key:"setActions",value:function(n){var r=this;Object.keys(n).forEach(function(e){var t=n[e];r.rules.on(e,t)})}},{key:"connect",value:function(e){var t=this;0<t.loadingPluginsCount?setTimeout(function(){t.connect(e)},4):(console.log("All Plugins are ready! Starting Mantra Game Client..."),this.getSystem("client").connect(e))}},{key:"disconnect",value:function(){this.getSystem("client").disconnect()}},{key:"awaitAllPlugins",value:(c=O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this.loadingPluginPromises));case 2:case"end":return e.stop()}},e,this)}),o=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){l(r,t,n,o,i,"next",e)}function i(e){l(r,t,n,o,i,"throw",e)}o(void 0)})},function(){return o.apply(this,arguments)})}])&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}()},{"./Component/Component.js":2,"./lib/Game/construct.js":11,"./lib/Game/start.js":13,"./lib/Game/unload.js":14,"./lib/Game/use.js":15}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;(e=e("../lib/eventEmitter.js"))&&e.__esModule;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.game=e,this.systems=new Map}var e,n,r;return e=t,(n=[{key:"addSystem",value:function(a,e){var t=this;if(this.systems.has(a))console.log("Loading ".concat(a," from memory..."));else{if(this.game.config.addLifecycleHooksToAllPlugins){var n,r=c(Object.getOwnPropertyNames(Object.getPrototypeOf(e)));try{for(r.s();!(n=r.n()).done;)!function(){var o=n.value,i=e[o];"function"==typeof i&&"fireBullet"===o&&(t.game.lifecycle.hooks["before.".concat(a,".").concat(o)]=t.game.lifecycle.hooks["before.".concat(a,".").concat(o)]||[],t.game.lifecycle.hooks["after.".concat(a,".").concat(o)]=t.game.lifecycle.hooks["after.".concat(a,".").concat(o)]||[],e[o]=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=(this.game.lifecycle.triggerHook("before.".concat(a,".").concat(o),e,t,n),i.call(this,e,t,n));return this.game.lifecycle.triggerHook("after.".concat(a,".").concat(o),e,t,n),r}.bind(e))}()}catch(e){r.e(e)}finally{r.f()}}this.systems.set(a,e),this.game.systems[a]=e}}},{key:"removeSystem",value:function(e){var t;this.systems.has(e)?("function"==typeof(t=this.systems.get(e)).unload&&t.unload(),this.systems.delete(e),this.game._plugins[e]&&delete this.game._plugins[e],delete this.game.systems[e]):console.log("Warning: System with name ".concat(e," does not exist!"))}},{key:"getSystem",value:function(e){if(this.systems.has(e))return this.systems.get(e);throw new Error("System with name ".concat(e,' does not exist! Perhaps try running "game.use(new plugins.').concat(e,'())" first?'))}},{key:"update",value:function(e){var t,n=c(this.systems);try{for(n.s();!(t=n.n()).done;){var r=i(t.value,2),o=(r[0],r[1]);"function"!=typeof o.update||this.game.paused||o.update(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"render",value:function(){}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();n.default=e},{"../lib/eventEmitter.js":17}],7:[function(e,t,n){"use strict";var r={};r.Game=e("./Game.js").Game,r.plugins={},t.exports=r},{"./Game.js":5}],8:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.hooks={"before.update":[],"after.update":[],"before.createEntity":[],"after.createEntity":[],"before.removeEntity":[],"after.removeEntity":[],"before.updateEntity":[],"after.updateEntity":[],"before.handleInput":[],"after.handleInput":[],"before.cleanupRemovedEntities":[],"after.cleanupRemovedEntities":[],"before.collisionStart":[],"before.collisionActive":[],"before.collisionEnd":[],"after.collisionStart":[],"after.collisionActive":[],"after.collisionEnd":[]}}var t,n,r;return t=e,(n=[{key:"clearAllHooks",value:function(){for(var e in this.hooks)this.hooks[e]=[]}},{key:"addHook",value:function(e,t){this.hooks[e]?this.hooks[e].push(t):console.warn("Hook '".concat(e,"' does not exist."))}},{key:"before",value:function(e,t){this.addHook("before.".concat(e),t)}},{key:"after",value:function(e,t){this.addHook("after.".concat(e),t)}},{key:"triggerHook",value:function(e,t,n,r){var o=this.hooks[e];if(!o)return t;var i=t;if(1===o.length)return o[0](i,n,r);for(var a=0;a<o.length;a++)i=o[a](i,n,r);return i}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=(e=e("./Preloader/FBXLoader.js"))&&e.__esModule?e:{default:e};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){_=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(O(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function u(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function f(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){u(r,t,n,o,i,"next",e)}function i(e){u(r,t,n,o,i,"throw",e)}o(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===O(e)?e:String(e)}(r.key),r)}}n.default=function(){function o(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).assets,t=void 0===t?[]:t,n=this,r=o;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");this.assets=t,this.totalAssetsSize=0,this.loadedAssetsSize=0,this.root=e.assetRoot,this.game=e,this.loaders={}}var e,t,n,r,i,a,c;return e=o,(t=[{key:"getItem",value:function(t){return this.assets.find(function(e){return e.key===t})}},{key:"addAsset",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};this.assets.push({url:e,type:t,key:n,size:0,frameWidth:r.frameWidth,frameHeight:r.frameHeight,frameTags:r.frameTags})}},{key:"loadAll",value:(c=f(_().mark(function e(){var t,n,r=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game,n=this.assets.map(function(e){return r.loadAsset(e)}),e.next=4,Promise.all(n);case 4:t.emit("preloader::loaded");case 5:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"createLoader",value:function(e,t){this.loaders[e]=t}},{key:"loadAsset",value:(a=f(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="image"===e.t0?3:"spritesheet"===e.t0?7:"model-fbx"===e.t0?11:17;break;case 3:return e.next=5,this.loadImage(t);case 5:return t.loaded=!0,e.abrupt("break",19);case 7:return e.next=9,this.loadImage(t);case 9:return t.loaded=!0,e.abrupt("break",19);case 11:return e.next=13,this.loadModel(t);case 13:return n=e.sent,t.loaded=!0,t.loadedModel=n,e.abrupt("break",19);case 17:throw new Error("Unknown asset type: "+t.type);case 19:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"loadModel",value:(i=f(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.default)(t,this.root),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"loadImage",value:(r=f(_().mark(function e(r){var o=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game.isServer)return e.abrupt("return");e.next=2;break;case 2:return e.abrupt("return",new Promise(function(e,t){var n=new Image;n.style.display="none",n.onload=function(){document.body.appendChild(n),e()},n.onerror=function(){t("Failed to load image: ".concat(r.url))},n.src=o.root+r.url}));case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"updateProgress",value:function(e,t){this.loadedAssetsSize+=e;e=this.loadedAssetsSize/this.totalAssetsSize;game.emit("progress",e)}}])&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}()},{"./Preloader/FBXLoader.js":10}],10:[function(e,t,n){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){_=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(O(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function r(){var c;return c=_().mark(function e(t,n){var r,o,i;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("incoming asset",n,t),r=n+t.url,console.log("modelUrl",r),o=new FBXLoader,console.log("Loading model...",r),e.prev=5,e.next=8,new Promise(function(t,n){console.log("loading resource",r),o.load(r,function(e){t(e)},function(e){console.log("Model load progress: ".concat(e.loaded/e.total*100,"%"))},function(e){console.error("An error happened during the loading of the model"),n(e)})});case 8:i=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),console.log("Error loading model",e.t0),e.t0;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}},e,null,[[5,11]])}),(r=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return r.apply(this,arguments)}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];h.default.getAllKeysWithData();h.default.set("lastLocalStartTime",Date.now()),e.data={width:e.config.width,height:e.config.height,fps:e.config.fps,fieldOfView:e.config.fieldOfView,camera:{mode:null,follow:e.config.camera.follow,currentZoom:e.config.camera.startingZoom,position:{x:0,y:0},offsetX:0,offsetY:0},scenes:{},chunks:{}},void 0===e.data.camera.follow&&(e.data.camera.follow=!0);void 0===e.data.camera.currentZoom&&(e.data.camera.currentZoom=1);"string"==typeof e.config.camera&&(e.data.camera.mode=e.config.camera);"number"==typeof e.config.fps&&(e.config.hzMS=1e3/e.config.fps,e.config.hzMS=e.config.hzMS.toFixed(3));console.log("Mantra starting..."),e.scriptRoot="https://yantra.gg/mantra",e.assetRoot="https://yantra.gg/mantra",e.config.gameRoot&&(e.isServer||console.log("Mantra is using the follow path as it's root for both scripts and assets:",e.config.gameRoot),e.gameRoot=e.config.gameRoot,e.scriptRoot=e.config.gameRoot,e.assetRoot=e.config.gameRoot);e.config.options.scriptRoot&&(e.scriptRoot=e.config.options.scriptRoot);e.config.options.assetRoot&&(e.assetRoot=e.config.options.assetRoot);e.config.scriptRoot&&(console.log("Mantra is using the follow path as it's script root:",e.config.scriptRoot),e.scriptRoot=e.config.scriptRoot);e.config.assetRoot&&(console.log("Mantra is using the follow path as it's asset root:",e.config.assetRoot),e.assetRoot=e.config.assetRoot);"undefined"!=typeof window&&console.log("new Game(".concat(JSON.stringify(e.config,!0,2),")"));e.on=i.default.on.bind(i.default),e.off=i.default.off.bind(i.default),e.once=i.default.once.bind(i.default),e.emit=i.default.emit.bind(i.default),e.onAny=i.default.onAny.bind(i.default),e.offAny=i.default.offAny.bind(i.default),e.listenerCount=i.default.listenerCount.bind(i.default),e.listeners=i.default.listeners,e.emitters=i.default.emitters,e.EntityBuilder=f.default,e.loadingPluginPromises={},e.make=function(){return new e.EntityBuilder(e)},e.pluginChecksums=b.default,e.loadScripts=g.default.bind(e),e.loadCSS=m.default.bind(e),e.switchWorlds=v.default.bind(e),e.systems={},e.storage=h.default,e.snapshotQueue=[],e.lifecycle=new u.default(e),e.before=e.lifecycle.before.bind(e.lifecycle),e.after=e.lifecycle.after.bind(e.lifecycle),e.tick=0,e.worlds=[],e.width=e.config.width,e.height=e.config.height,e.changedEntities=new Set,e.removedEntities=new Set,e.pendingRender=new Set,e.deferredEntities={};var n=new y.default(e);e.preloader=n,e.queuedAssets={},e.isClient=e.config.isClient,e.isEdgeClient=e.config.isEdgeClient,e.isServer=e.config.isServer,e.localGameLoopRunning=!1,e.onlineGameLoopRunning=!1,e.currentPlayerId=null,e.components={type:new r.default("type",e),destroyed:new r.default("destroyed",e),position:new r.default("position",e),velocity:new r.default("velocity",e),rotation:new r.default("rotation",e),mass:new r.default("mass",e),density:new r.default("density",e),width:new r.default("width",e),height:new r.default("height",e),depth:new r.default("depth",e),size:new r.default("size",e),radius:new r.default("radius",e),isSensor:new r.default("isSensor",e),owner:new r.default("owner",e),inputs:new r.default("inputs",e),items:new r.default("items",e),hasInventory:new r.default("hasInventory",e),sutra:new r.default("sutra",e),scene:new r.default("scene",e),meta:new r.default("meta",e),collectable:new r.default("collectable",e)},e.components.color=new r.default("color",e),e.components.health=new r.default("health",e),e.components.target=new r.default("target",e),e.components.lifetime=new r.default("lifetime",e),e.components.creationTime=new r.default("creationTime",e),e.components.BulletComponent=new r.default("BulletComponent",e),e.components.graphics=new r.default("graphics",e),e.components.lockedProperties=new r.default("lockedProperties",e),e.components.actionRateLimiter=new l.default("actionRateLimiter",e),e.components.timers=new d.default("timers",e),e.components.yCraft=new r.default("yCraft",e),e.components.text=new r.default("text",e),e.components.style=new r.default("style",e),e.components.collisionActive=new r.default("collisionActive",e),e.components.collisionStart=new r.default("collisionStart",e),e.components.collisionEnd=new r.default("collisionEnd",e),e.components.pointerdown=new r.default("pointerdown",e),e.components.pointerup=new r.default("pointerup",e),e.components.pointermove=new r.default("pointermove",e),e.components.pointerover=new r.default("pointerover",e),e.components.pointerout=new r.default("pointerout",e),e.components.pointerenter=new r.default("pointerenter",e),e.components.pointerleave=new r.default("pointerleave",e),e.components.onDrop=new r.default("onDrop",e),e.components.exit=new r.default("exit",e),e.components.ctick=new r.default("ctick",e),e.systemsManager=new o.default(e),e.scenes={},e.graphics=[],e.gameTick=a.default.bind(e),e.localGameLoop=c.default.bind(e),e.onlineGameLoop=s.default.bind(e),e.loadPluginsFromConfig=p.default.bind(e),e.createDefaultPlayer=w.default.bind(e),e.createPlayer=w.default.bind(e),e.loadingPluginsCount=0,e.plugins=t,e._plugins={},e.loadedPlugins=[],e.config.loadDefaultPlugins&&e.loadPluginsFromConfig({physics:e.config.physics,graphics:e.config.graphics,collisions:e.config.collisions,keyboard:e.config.keyboard,mouse:e.config.mouse,gamepad:e.config.gamepad,virtualGamepad:e.config.virtualGamepad,editor:e.config.editor,sutra:e.config.sutra,lifetime:e.config.lifetime,defaultMovement:e.config.defaultMovement})};var r=j(e("../../Component/Component.js")),o=j(e("../../System/SystemsManager.js")),i=j(e("../eventEmitter.js")),a=j(e("../gameTick.js")),c=j(e("../localGameLoop.js")),s=j(e("../onlineGameLoop.js")),u=j(e("./Lifecycle.js")),f=j(e("../../Entity/EntityBuilder.js")),l=j(e("../../Component/ActionRateLimiter.js")),d=j(e("../../Component/TimersComponent.js")),h=j(e("../storage/storage.js")),p=j(e("../loadPluginsFromConfig.js")),y=j(e("./Preloader.js")),b=j(e("./pluginChecksums.js")),g=j(e("../util/loadScripts.js")),m=j(e("../util/loadCSS.js")),v=j(e("../switchWorlds.js")),w=j(e("../createDefaultPlayer.js"));function j(e){return e&&e.__esModule?e:{default:e}}},{"../../Component/ActionRateLimiter.js":1,"../../Component/Component.js":2,"../../Component/TimersComponent.js":3,"../../Entity/EntityBuilder.js":4,"../../System/SystemsManager.js":6,"../createDefaultPlayer.js":16,"../eventEmitter.js":17,"../gameTick.js":18,"../loadPluginsFromConfig.js":19,"../localGameLoop.js":20,"../onlineGameLoop.js":21,"../storage/storage.js":23,"../switchWorlds.js":24,"../util/loadCSS.js":25,"../util/loadScripts.js":26,"./Lifecycle.js":8,"./Preloader.js":9,"./pluginChecksums.js":12}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={"./plugins/ASCIIGraphics.js":"0c3b325faceec0059b084ac9eb033a01de2458632d106c47977076f2d2745372","./plugins/ASCIIGraphics.min.js":"43bb558f654a6ae17abe4bb6994647f69aa3598db0b224df1a3f5272344a34a4","./plugins/AsteroidsMovement.js":"5d3f36191fb0c7c211a6a11bf7bbc8c640c7df551411eba51960287abfe0c36f","./plugins/AsteroidsMovement.min.js":"8d0c47010240608cdb7294e2a7d566090a9b16600b402e660cd58f1f5ce990e0","./plugins/BabylonCamera.js":"d081e991041950666c2e1f304e2653292d3dc131ff7e44613bf4f32e04e1d5d6","./plugins/BabylonCamera.min.js":"d0d3c2c6657d2dfb3c1b2cb446af3098d9ade28551f61d87469114000c552710","./plugins/BabylonGraphics.js":"90a03683013b2c9ad7e51e5bbabd120359752c400daed81a248a22086eccefbe","./plugins/BabylonGraphics.min.js":"d61e9df7858ef2d4d36f6804bf20e9a686a638bd4334826b90e4a4d8ae4e2a73","./plugins/BabylonStarField.js":"bcbeb93b6bd0a1490055f9ad862177173fe51d2c2fcbd964a899d519017b1b72","./plugins/BabylonStarField.min.js":"d4a2f4ab4cd052977c7243a0d6918035b098843a80e5704e0f261dd1c30c3774","./plugins/Behaviors.js":"7b7a58950a66608f894d22cedc281c75c15c5b169d763a525c0d0c32a234e101","./plugins/Behaviors.min.js":"95c83275952aba582953b763a515c61378ca78af8c7b4897927f377cc90199b2","./plugins/Block.js":"8a1f60d0008b88c23af3e4507883d51ca37b3e34c79c6d45e7e509f458cc425d","./plugins/Block.min.js":"15d67b27b79f808ff076860b9ca72f8b8f357d3065221ff96619eb9a750b2568","./plugins/Bomb.js":"f7a362f2807f41676bcc49901c6c16d0a01b8d741dfddcd726a2d2b2b1619621","./plugins/Bomb.min.js":"a6e453890b05fcab61a54c6addaa2d59fbbfa2b89a0b4429ee5a4f7f6128e02a","./plugins/Boomerang.js":"90364957a5c5ea213c226e07ad8e96150af836d57dd96d92ee59c0ba8d3eccf1","./plugins/Boomerang.min.js":"ab95b39bf542fdf14a638c2ae80b88e4a5b0b16bfc90fd710ed9bc1319deccc4","./plugins/Border.js":"776ff9a840aee4e40b98ac21a2ece7846157de59c843f7fa335d0497baaa2b7a","./plugins/Border.min.js":"3584e32fb60aae9ee6a291e4b3a89722f9eb62b345bc0b68cc06b450c854ade5","./plugins/Bullet.js":"e93090b3fd0f8fe97d8769cdff8b5c0c3bb26ac4dc7e8f0fd58a9331acf8d83c","./plugins/Bullet.min.js":"8689e737faac219536d215b2f2b3a327fbead5fa3353d4b16499e8bd5c50b336","./plugins/Button.js":"c3532f5e666df486e436f3cadfe7e908dcff50b192cece9e99e5d829db2f82fa","./plugins/Button.min.js":"2ff07541d6d72e0f04ae8e7bc72943ea295e9bd4a3adc6e1a9f9f606805321e1","./plugins/CSS3DGraphics.js":"682cda73678716ab858e7f412b8fc4304a9ce1835a558d5f21681d8f7dbbd3ae","./plugins/CSS3DGraphics.min.js":"5773e9e9d79ddbc8c295c517af3c790e74ce7069ecbfc9705746bada0b25f1e1","./plugins/CSSGraphics.js":"b87823242361c0b8b3c00444547455b33c331e37dc6ddcf81bb7601eb75f27c7","./plugins/CSSGraphics.min.js":"a7ca29c34d68bd9582b5c7869c9b171986361c6427a72d6eb0b906a8d616eb44","./plugins/Checkbox.js":"3b94a40283f14e75ad89ededdfbbffb3676532573048e60fe500c27a2bd436ff","./plugins/Checkbox.min.js":"788db3172873ba0a5c8f6f596be2c54a55ba875d1b9759af1758ea2f2107494c","./plugins/ChronoControl.js":"3d1eb99a514dc0726c3055371cf47fb32e25190a4f7c16b823792ecc7858dfa1","./plugins/ChronoControl.min.js":"a9a511015708f05075041a02a32b9bcfd56e8cc73d07a5836699b0c1c2f1ae83","./plugins/Collectable.js":"a428d356c2fc2ce1a14b3badc8044e26eb65ed5a9e810c7c020f8a5483f9f46b","./plugins/Collectable.min.js":"a4921133c0c33773e21409a0663245b191d79742636a39d443fafb3e0f26487c","./plugins/Collisions.js":"f123f7b3154b1749306aabba1ec65bc81958d67fd926994c3e51ebfa36d63375","./plugins/Collisions.min.js":"94f7be8e3ef8d997a636a184fca96e183b42ac19dfe6e96d0a184c9a087d1b9b","./plugins/ControlsGUI.js":"d54f58ed4eabb78b5897a2428591e1ef0256d5d67773dcbe13c4d75f8075e63b","./plugins/ControlsGUI.min.js":"08c30bc076baeda7379a728a2a188e0b35fcf5d91d031b5221654d319591ff86","./plugins/Creator.js":"61d6002a0e5d51df00e5735ee8ffeeaecb7083e9f5ca6747a0991ef9bb39c306","./plugins/Creator.min.js":"fb744b4f67f3a0b2e3dace2735dedf7061fa927bfa213818ba72b11f70c19de8","./plugins/CurrentFPS.js":"6e200e9d32a7d223d64f2399006f289c0e276e75bca63e7826622a62ee2917da","./plugins/CurrentFPS.min.js":"bef967a59c86722013e2ec5d6eb8e539f8464db050aadb32a1e4d53ede924752","./plugins/Draggable.js":"58c9cabeb501780b0cb153f72a932bc50b4cb096bef8229e6458f9f1ff5374f9","./plugins/Draggable.min.js":"d820d1a4d4fe0ba357fc5ce615428b34b3b4ea9e9a2b4825cde48764f73a928a","./plugins/Droppable.js":"3861edc41aee15b701ceeff2c81a5d2ab039885921830c48594417b4cf4f7c72","./plugins/Droppable.min.js":"a69031884f922e66c0b29ec604474a62341174837222231b0db060995808e9a4","./plugins/EntitiesGUI.js":"bc66200e73eebd08e38cfc060d2f4d6b748aeac903d2d314b8c23c11c3bc3d0f","./plugins/EntitiesGUI.min.js":"5f9e2133a539fe3fc7cb5ef028066f82538b5d38cb24cc8404eb3219662c7e38","./plugins/EntityInput.js":"9c56bbc6c2b3b4c5a985f8e7f3488b5cce5e6d0ba99639be1bc23cfc096ab1e7","./plugins/EntityInput.min.js":"d93eef2c564085545bbae7b85acce80e1268f3e7d8837f965525e514a78efed9","./plugins/EntityMovement.js":"95617e5e5d02350640d591f545a736802d23edb4f157370f3ede85d0eecc6e46","./plugins/EntityMovement.min.js":"747ee2e2a8e2f029107bf29d7a263e3cae412f096da1f1131af822ec7d2b2d52","./plugins/EventInspector.js":"6ca05415864ef09766a010f0176db7d9caac6020df1252a3a680daee4f2b4fd1","./plugins/EventInspector.min.js":"84690d0c1f5fe59f3fc28062e84ee1933391c8120b22d796e3689b1abf348165","./plugins/Flame.js":"15b2ccbdc64f1779e22a354d7a67328c26541d9898433cbd463e5669ec571abb","./plugins/Flame.min.js":"b24ccabd1f3a74b7579d667aad4198d450c2c19208129662de30483c8826ec4a","./plugins/FlashMessage.js":"a6f375af9e2852013eaa3711e66c791f10d7e165df1d6b2b679e16efaa1ff796","./plugins/FlashMessage.min.js":"5b5e68b61bb962682689af9973361f231cdfa69000e73e89e44169f6e1129cae","./plugins/FloatyTyper.js":"0e42af84fa1f30be41ce34969bc625ee6d1c275e557d832be035be76c8de1bcd","./plugins/FloatyTyper.min.js":"1229f52b05300c5c5582ba7dbd594a10af236283da758f3d504440e9208f05fd","./plugins/FroggerMovement.js":"43df155f295793a316270e286bee3943cc4805e93ba5da366da7f139cff687c2","./plugins/FroggerMovement.min.js":"50db4c8376c648fa4cb3c2cdc781ebafae5becc9603b6618986518f25ad63bbb","./plugins/GameEditorGui.js":"73b832620d31a9a20253bbb7dad0da557b6795fb6aa32fdcbb543ee4f82f84ad","./plugins/GameEditorGui.min.js":"2778dae74a434aec88eedb7dd63242e0ebceb1bccbed35208ae0cb641d1559fd","./plugins/Gamepad.js":"6eac485cee65c05d5a46f86d0d4b02ecdf827a93f11f1ae45454e4a6ff41f4ba","./plugins/Gamepad.min.js":"5a360e60ec674cbfbe0181cfaf28b1f6f4bed413c0c6cca2430578191dbed576","./plugins/GamepadGUI.js":"f9b8b834be215bb38a1e20112cdb79ebc4098e22bfbe588add62e4507d14a973","./plugins/GamepadGUI.min.js":"a7364e86f4e4abbb31d6053a728c7d9d26fffd6842fc6975306bc54056a888d8","./plugins/GhostTyper.js":"d13d0a0a2aa3eaefc3f5c50fa7a0a969dea114afa1fb5746c2954e1b27d2e8a6","./plugins/GhostTyper.min.js":"15124babd086c31da916405d582032224301a4f01887e25e27c41c7c84be2ccd","./plugins/Graphics.js":"e83dc4884aec0f3a3c980f4b20308e46884a605d89da186798d2039abd35bb1a","./plugins/Graphics.min.js":"2653f026070a5c88dd05ec16674c4307d41e9e3e0ce831442fb97f54c6108437","./plugins/GravityWell.js":"a213708152c92ddbdd30a0c6b553abd368627f5adaaab72b82b181502b8781ee","./plugins/GravityWell.min.js":"323551ff077833c0a1c4f98b69b8d3ab65418a3a17184b5a79b94d0b57735b15","./plugins/Health.js":"14543aa1672791249749eadc46c898105ef663b8be57ec78886c79c7903a25a8","./plugins/Health.min.js":"c0b3b691a9a43ce10828818ab13199f814c49fc8abe8628afff904ae8b198923","./plugins/Hexapod.js":"0ac8415892d74c55455cd52fe877f9a77eea7b9894768119c7fbef1064c8f92a","./plugins/Hexapod.min.js":"50629839c93dd7b2c49bb6bcb0ae663e0ca14b482a0439cc859a99854327dcb0","./plugins/Iframe.js":"70af66a53a453ecf3767a5b9f52fba601035764fe17c75df59df0e9982f12797","./plugins/Iframe.min.js":"b2796026ba715d3ffd4e5cf8d7d914b51de102deff9b24e2ab56e0ff08bf5cc3","./plugins/Input.js":"d0684ed311bbfacaf094fbbf4b70e23296b7fdc077e4e3f92e6ee3487a5ce83f","./plugins/Input.min.js":"6b17a341cd67a0deab701cf2d40e150bd7e8055e6a91724f201825099ab52221","./plugins/Inspector.js":"fda5c903185dfdeba99096d42f58ff7daafc757b016090bd440c74770dc2fc53","./plugins/Inspector.min.js":"47b59a569e204210647e1bd9fbf739a57333e8174db1b7af86119304b10643eb","./plugins/Key.js":"14be871e2d98ae2a84558d4680c456da0b717ab32f14ff6e3db394791b3be456","./plugins/Key.min.js":"b7bb1a499c76689b538be49a2b29ccd5e57267dbcd5c4b54b8fb251cd60b8c41","./plugins/Keyboard.js":"9bc6e95c0369af1c55c26aca65c28e623e79bd3179254d741ed4d336d93ab838","./plugins/Keyboard.min.js":"ea66301f94048c784b93888b9b0398b141e496909c4791e201d473cd1db48512","./plugins/Label.js":"16cd42e7c61bbb5b28cf22fcc4e5e1fc8a6a25a42f237fd4c7c6379d176d1774","./plugins/Label.min.js":"44a9e0631d95a8ccf9d23bc2249c2653abdbea4f79db1e3c9f5cfb7faf7f2cdc","./plugins/Lifetime.js":"126648fa1b787f25fa302e56603a85d2073ab372b97d66b177930c27c4ae9f68","./plugins/Lifetime.min.js":"1f0e46af7af17e9fdbda0b7ac3ed9844c7b9993b3ce7682443e0c7f0188b44b5","./plugins/LoadingScreen.js":"a83930e9d45f160bc2f61af8894283bda3e58488e449ccde5374feda9f236612","./plugins/LoadingScreen.min.js":"b3b953dc98813936e5713b170a828db888f2cac1a368281cd8cd18185e4fb17a","./plugins/LocalClient.js":"62886ed824f7bc714cde5664ecca9447e6d2a047eb65b5309f2dad765cef746e","./plugins/LocalClient.min.js":"a681769ec3ebbd160693301d2780545f63629098867abbeaad8a3880694a04ea","./plugins/MatterPhysics.js":"326a33fc8455237784c221a83005ca45d50308de7c9e4ae26979f35f12514e62","./plugins/MatterPhysics.min.js":"7b166c479edfca14322101fbef4b45e393709f74987f8b80406e65bce02a5638","./plugins/Midi.js":"3c8b738ed48341c4221cf20e53f631907935bdf722ebbcafb2dee3a40f544fba","./plugins/Midi.min.js":"5ef8a15f87866a63e014ecbf3433f93a6c463c26d48a1c3a4448604ee8b5d229","./plugins/MidiGUI.js":"7dc1d8d9bd9fb458409f803e86667468b6d25563c08234a19d24cd733fb9af55","./plugins/MidiGUI.min.js":"ceb780abf5f2fadc904cbb683dde98548db60f5bdf0f90f1398728c76a0f923f","./plugins/Mouse.js":"78b014ceb04128e7e17e21e3f70834dbe09fac3056147d67cb7a4bc1c2558156","./plugins/Mouse.min.js":"7e25b6763790ee9a1f5b040014101afd0f06fc9b65276da3338e168b46efa6ef","./plugins/Nes.js":"ac0daf03fb84c715d217d68ac477f349f7250c651ab677922f91b2fc30e15a4f","./plugins/Nes.min.js":"5d3b9ac893448fdf60dce5bce6ee1a32acacec1db8b9ca72b1017123af6cfe3b","./plugins/PacManMovement.js":"e7b7dbe97b3192004c8bb2c58e952e27e2281a9604785faf3d0ee43771444205","./plugins/PacManMovement.min.js":"31f12aa5c1ec52ed3b22dd49420a5a42ff749954306411e3983c25f257fbbe13","./plugins/PhaserCamera.js":"4cf17a064897a768dafcc086c1d8d9b076efd2520e145c16052cd94d2419921c","./plugins/PhaserCamera.min.js":"da4dbe5ab58c17a3716130d51ac103492a4fd201da6fa61ad5b106e2fc158459","./plugins/PhaserGraphics.js":"e14cc1c2e7256c540595b170447be93e0b38feae954772709084026a967d09e7","./plugins/PhaserGraphics.min.js":"2f436654a1728b390b3f17e6802b9e202a70d3733afbea96f5741baf4e2ff981","./plugins/PhysXPhysics.js":"42d70e5cbde1d94b4895a92b6d51739a05a4762c41c208b32b2e0b1188dd7879","./plugins/PhysXPhysics.min.js":"f91a1b58ea914c437eb0082c78aa3c54570065978b853ef2592364f19759c401","./plugins/PingTime.js":"df3ff245078e918c5c09e017266c29e58973a6b97e025c931bc25af0cc176ffe","./plugins/PingTime.min.js":"df610dd9876c1b43e3c3a1e7c36273842332b0a51b2f33a150ec926f8155bca0","./plugins/Platform.js":"d6ea32e84aac9d6dfe517ce910708e6536a98c9cb28da1e71ef497c41bc52080","./plugins/Platform.min.js":"6fbd773ca904fe5ae892f14519a5ddee6547947e39ea6c0fdf4a71e9d0590531","./plugins/Player.js":"ff1d070119fbb38b26f7a307a8d20f4c515a8a28385e48f48330b4c01e56ca0b","./plugins/Player.min.js":"6f0537ba6ad197e59f6866fb1f59a3d24760f7cd05533b05f0cb1da48229e459","./plugins/PluginExplorer.js":"10a1a744380c0e425c603cf05156a6f12b7f0365daacf4b3765d88789d3e2bf4","./plugins/PluginExplorer.min.js":"e03f9fe01aa34fb485508b56c3c79607cc86d17d1236712325bca6cea80cc423","./plugins/PluginsGUI.js":"c8259a06f4fe79bf42c8365d224d542da67100c0a66d4bf9d1eb45256363295b","./plugins/PluginsGUI.min.js":"867f4f3d9fd64ea14335531454551f63d84e9b78058c07035da2bb33af7ebd30","./plugins/PongMovement.js":"519a2acd2ac6f47789322111b81d53240e5102a28fb31b4665f2794bb80d290d","./plugins/PongMovement.min.js":"d5ac3a89f7c0285ccad40194d032293b1c58535d45f04d4e400a49a46ff9036e","./plugins/RBush.js":"83680f4f42de4695e7f2ba92d7e0561fe7cc30d3be67bd6fb97fe4c246fe66f4","./plugins/RBush.min.js":"1b87b4df682d7b5b6d0d249583871a1e5058d4697efe7e1d38f5ef47d4dd8f81","./plugins/RadialMenu.js":"4151c73e5be8a17f8d3fd44c218a323fd36c3ed120eb27a6829f2305b1f00d62","./plugins/RadialMenu.min.js":"2091b1073a9d3e41d2133c7cc4ec5b22fb8dae4a9f0c255a013e72842bc315a9","./plugins/Radio.js":"f942470e3247bc192bca7713e77549ed8e7f8e990eaca65b6af0413651b2a77c","./plugins/Radio.min.js":"cc039b7b38781356c7a5e3b603f476d81c9d5787d525a0221e13efbe98d513cb","./plugins/Range.js":"134ca73e435e8fc75cdd1c6830494f500597d79074a4f09c60b71e252ec8d3f2","./plugins/Range.min.js":"a5d638e352835133b1ca31b6dcd9724bf4fe2611837345936e8d550d8b886e89","./plugins/Scoreboard.js":"7556ebd8c54d1d05466c4e857ba0608bfb1e60fc86925dd01183a52c5dc6f6ca","./plugins/Scoreboard.min.js":"f79d065a822319e0c74c3e36a1f17da4cae47c66b9770e1f10e9075fd40ab436","./plugins/Select.js":"1670080420836b1a03c098d68b358d90f1cc2aec6fb203013b732bc52e97c4ce","./plugins/Select.min.js":"4a41ac34cca0e1ab7cb06df78dff7c41571954cf177d405d05c50e3fa6f58dfa","./plugins/SnapshotManager.js":"c176ef73983f464725ec172bdd42217435dc5b6020d87dbfb451612ade122375","./plugins/SnapshotManager.min.js":"39ab4e4f9de781433c618b03cf315ce1ff68db19ee2c4e19bd762ac3c6c9c460","./plugins/SnapshotSize.js":"7c7d856ce1b439df52123474c1089d930b3c81582388c8e1133108d8d2d3fde7","./plugins/SnapshotSize.min.js":"85719ef7d6a63b398d45dda88aaabeb38963aada0731c8cfc689ab0580670f9b","./plugins/StarField.js":"d33e4ee1e02b8719edc5b7988b3eb2ded91a214dc911b3d800b52bfe19572669","./plugins/StarField.min.js":"302c7e8878c277e6d3dc553ca7767fc98e16f66a8964c1a74cf7e4b972892467","./plugins/Sutra.js":"0dad85de23e251d907c0f0c7366db1d34a7a5da26a9e4152665a6cc487f524b0","./plugins/Sutra.min.js":"33bcf42fd7ead59d6ea30466e51e37aa4eca7bd198785dae10e338ab83ff5d75","./plugins/SutraGUI.js":"e45bf5a66b9357d88b10f8ea3673cf57e381bb95890414be9bbf9904b386d3ac","./plugins/SutraGUI.min.js":"aaee96d84ed969f8d99d59732a7dd689e791fa7112f470d9da77a9ff2b828c0d","./plugins/SwitchGraphics.js":"154775d7459b8a7c08be7f8ce08b3d5a2292df00b10d71eaf2fa5e9de1833f44","./plugins/SwitchGraphics.min.js":"f090ece198364cd6ebb3658404d8413a8122a55c5419d3ab411ec4acd0919c0a","./plugins/Sword.js":"4ed88fd1e3f9fafe239d88db8b3bb3ee1189fff9c7b3c9ff54ac9b151c58fd32","./plugins/Sword.min.js":"68708f6deb1b0b7de5a4fda1eabf50f1bc12d2a97433b491a72deabba506e33d","./plugins/Teleporter.js":"c28f7b00415ef15c0f9555d5839e6ec7a65fc74464b279dc90cbf0b684fbc3d5","./plugins/Teleporter.min.js":"13940bc70dd287c8fd87aec4db788d0eba03891d58569d34aa2f7debc0f0be62","./plugins/Text.js":"4ca296f11482ccb4b89db35634872fe6352bba40dbfc9db3417c2f466fcc88a0","./plugins/Text.min.js":"16502feef1ae35a9b9e523ffb2f36f9a8c14b537dec87c0fd83f3197fa2938d0","./plugins/Textarea.js":"a9f16f27cf2721e3d75a504fd5ae68cb8238d945ac7dbb10f3787d7a12d680bb","./plugins/Textarea.min.js":"4ee950d2815ee75c63ae64b260f4b95ffbce227a37ca58a9596d2a317a56b03b","./plugins/ThreeGraphics.js":"02a91241d96846b0729e8e6e87658afeb6fc0735772cbc1231df7d844b6a2156","./plugins/ThreeGraphics.min.js":"1b8fdf611aef73f9278fcf16b9c0417736cdf25a2f69e404f4dd7d0fa1965940","./plugins/TileSet.js":"730987abc1a69c466047444b005ed25d49a6c3dab03c8128701e086e29eb6c57","./plugins/TileSet.min.js":"9a83b80581a1611b7f34e2f8cc4fe9e4eef910ea55372a19a0eda54eb2033649","./plugins/Timers.js":"a851809e3b6281010be54bef5f96a904ad687a860db2fc76fcb2e859adc40c23","./plugins/Timers.min.js":"7fb35cb94deccd7525f4ef6dd34a58847cebada4f6a489e16ce2bfb775aef682","./plugins/Tone.js":"d108292b7b9ca54609200b15005a28d4f4c7ba83f882e62b1e3e01f85a3b5d86","./plugins/Tone.min.js":"acfc53c580afb09c8de27813cf407450c63a77068ad6fc5d7f996b854e825ca9","./plugins/Tower.js":"2059fe468cc2c58193863292ef7e07d6c776de9a631e460a4d323dd8e428278f","./plugins/Tower.min.js":"23a38583b38ae1b734bff41f32eee25f73189e7b4cd2de03dbbc309e0671d9de","./plugins/UnitSpawner.js":"7838dd890c8a7413d9117819e4ad5d79363c363efd9548d260ff0b53d7256bda","./plugins/UnitSpawner.min.js":"9337e00ad6649b3a726d4b9f03458c4dc3f24fd0e7325d1a80dafbfba9921d21","./plugins/XState.js":"ad5c93d21aae813126ade0811fb7b0476b2c10751e9b568fc04c48a8b61777ed","./plugins/XState.min.js":"01bba5ffdce65f83c5038b69a31813ee56e03aa93923edaa5b1e05f6b132e933","./plugins/YCraft.min.js":"abe9442e478aa52a095bdc8558d7ee3e00a4354e8156a6e0b39a5da065e390fc","./plugins/YCraftGUI.js":"db2f8a9acadf76f6cd3f535d9adcb44b3474e7274b1eba8362f99c6adb62b4f3","./plugins/YCraftGUI.min.js":"2f2cb4cd70163fef5fdccabf9a0bcffce972a13adca4ebedc13d78212a3f7013","./plugins/YantraGUI.js":"e9416f1e539bedae38a4c85d6fdce421b4e452cda1986b4495ae0481a3aea8a6","./plugins/YantraGUI.min.js":"a1f02936b62401a14b9012c25d080c556afedb8fdf403d8b1ddc1c9ed24a0219"}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(a){var c=this;return new Promise(function(n,r){if("function"!=typeof a&&(a=function(){}),0<c.loadingPluginsCount||!0!==c.physicsReady)setTimeout(function(){c.start(a).then(n).catch(r)},4);else{if(c.config.multiplexGraphicsHorizontally){var e=c.graphics.length,t=100/e;if(1<e&&document&&document.querySelectorAll)for(var o=document.querySelectorAll("#gameHolder canvas"),i=0;i<o.length;i++)o[i].style.width=t+"%"}c.systems.sutra&&(console.log("Binding all input events to Sutra conditions..."),c.systems.sutra.bindInputsToSutraConditions()),console.log("All Plugins are ready! Starting Mantra Game Client..."),c.emit("game::ready"),c.config.defaultPlayer&&(e=c.createPlayer(),c.setPlayerId(e.id)),c.systems.client?c.getSystem("client").start(function(e,t){e?(r(e),a&&a(e)):(n(t),a&&a(null,t))}):console.log("Warning: No Client System found, will not start game loop.")}})}},{}],14:[function(e,t,n){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){_=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(O(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o){return function(){c=_().mark(function e(t){var n,r=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0===(2<r.length?r[2]:void 0)&&0,console.log("Unloading plugin",t),this.data.scenes[t]&&(n=this.data.ents._,Object.keys(n).forEach(function(e){o.removeEntity(Number(e))})),delete o.data.scenes[t],o.removeSystem(t);case 8:case"end":return e.stop()}},e,this)});var c,t=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})};return function(e){return t.apply(this,arguments)}}()}},{}],15:[function(e,t,n){"use strict";function u(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function f(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],(e=function(e){e=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===_(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function O(){O=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==_(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(_(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function l(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function d(){return o.apply(this,arguments)}function o(){return(o=l(O().mark(function e(t,n,r,o,i){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePluginInstance",n),"function"==typeof n.build&&function(e,c){console.log("XXXXX",c.constructor.name);var s=c.constructor.name;e.EntityBuilder.prototype[s]=function(){for(var o=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return f(f({},e),{},{_previous:f({},o.config)})}),i=c.build.apply(c,r);if("object"===_(i))for(var a in i)!function(r){var e=i[r];"function"==typeof e?("function"!=typeof o.config[r]&&(o.config[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.config[r].handlers.forEach(function(e){e.apply(void 0,u(t.map(function(e){return f(f({},e),{},{_previous:f({},o.config)})})))})},o.config[r].handlers=[]),o.config[r].handlers.push(e)):o.config[r]=e}(a);else"number"!=typeof i&&"string"!=typeof i||(this.config[s]=i);return this}}(t,n),function(t,n){n.createEntity=function(e){return e.scene=n.id,t.createEntity(e)},n.removeEntity=function(e){return t.removeEntity(e)},n.createText=function(e){return e.scene=n.id,t.createText(e)}}(t,n),t.loadedPlugins.push(r),n.preload)return e.next=7,n.preload(t);e.next=9;break;case 7:return e.next=9,t.awaitAllPlugins();case 9:n.init(t,t.engine,t.scene),t._plugins[r]=n,delete t._plugins[r],t.emit("plugin::loaded::".concat(r),n),t.emit("plugin::loaded",r),i(),"world"!==n.type&&"world"!==n.constructor.type||(t.worlds.push(n),t.systemsManager.addSystem(r,n),t.emit("world::loaded::".concat(n.id),n),t.emit("world::loaded",n),console.log("Loaded World:",n.id)),"scene"===n.constructor.type&&(t.data.scenes=t.data.scenes||{},t.data.scenes[r]=n,t.systemsManager.addSystem(r,n),console.log("Loaded Scene:",n.id)),t.data.plugins=t.data.plugins||{},t.data.plugins[r]=o,t.loadingPluginsCount--;case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c){return function(){var t=l(O().mark(function e(t){var n,r,o,i,a=arguments;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<a.length&&void 0!==a[1]?a[1]:{},r=2<a.length&&void 0!==a[2]?a[2]:function(){},o="/plugins/",o=c.scriptRoot+o,"string"!=typeof t)e.next=20;else{if(i=t,c._plugins[i])return console.log("Plugin ".concat(i," is already loaded or loading.")),e.abrupt("return",c);e.next=9}break;case 9:if(c.isServer){if(c.plugins[i])return e.abrupt("return",c.use(new c.plugins[i](n)));e.next=12}else e.next=14;break;case 12:return console.log('Attempted to load plugin by string name "'.concat(i,'" on server, could not find! Skipping')),e.abrupt("return");case 14:c._plugins[i]={status:"loading"},c.loadingPluginsCount++,c.emit("plugin::loading",i),c.loadingPluginPromises[i]=l(O().mark(function e(){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(o).concat(i,".js"),e.next=4,c.loadPluginScript(t);case 4:if(console.log("Loaded: ".concat(i)),"object"===("undefined"==typeof PLUGINS?"undefined":_(PLUGINS))&&PLUGINS[i])return t=new PLUGINS[i].default(n),console.log("asaaaffff",t),e.next=10,d(c,t,i,n,r);e.next=12;break;case 10:e.next=14;break;case 12:throw console.log("Warning: PLUGINS object not found, cannot load plugin",i),new Error("PLUGINS object not found, cannot load plugin");case 14:e.next=23;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.error("Error loading plugin ".concat(i,":"),e.t0),c._plugins[i]={status:"error"},c.loadingPluginsCount--,r(e.t0),e.t0;case 23:return e.prev=23,delete c.loadingPluginPromises[i],e.finish(23);case 26:case"end":return e.stop()}},e,null,[[0,16,23,26]])}))(),e.next=26;break;case 20:if(c.loadingPluginsCount++,t.id){e.next=24;break}throw console.log("Error with pluginInstance",t),new Error("All plugins must have a static id property");case 24:return e.next=26,d(c,t,t.id,n,r);case 26:return e.abrupt("return",c);case 27:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};console.log("creating default player",e,this.currentPlayerId),void 0===e.position&&(e.position={x:0,y:0,z:1});"none"===e.texture&&delete e.texture;"number"!=typeof e.rotation&&(e.rotation=0);this.currentPlayerId;this.rules;void 0===e.texture&&(e.texture={sheet:"loz_spritesheet",sprite:"player"});e=this.createEntity({name:e.name,type:"PLAYER",shape:"triangle",rotation:e.rotation,collisionActive:!0,collisionStart:!0,collisionEnd:!0,width:e.width||16,height:e.height||16,color:e.color,radius:e.radius,texture:e.texture,mass:222,friction:.5,frictionAir:.5,frictionStatic:1,position:e.position});return this.setPlayerId(e.id),e}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={listeners:{},emitters:{},wrappedFunctions:{},anyListeners:[],onAny:function(e){i.anyListeners.push(e)},offAny:function(t){i.anyListeners=i.anyListeners.filter(function(e){return e!==t})},before:function(e,t){i.listeners[e]||(i.listeners[e]=[]),i.listeners[e].unshift(t)},after:function(e,t){i.listeners[e]||(i.listeners[e]=[]),i.listeners[e].push(t)},once:function(o,i){var a=this;this.on(o,function e(){a.off(o,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i.apply(null,n)})},on:function(e,t){i.listeners[e]||(i.listeners[e]=[]),i.listeners[e].push(t)},off:function(e,t){i.listeners[e]&&(i.listeners[e]=i.listeners[e].filter(function(e){return e!==t}))},emit:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];0<i.anyListeners.length&&i.anyListeners.forEach(function(e){try{e.call.apply(e,[null,t].concat(n))}catch(e){console.error('Error when executing any listener for event "'.concat(t,'":'),e)}});var o=i.listeners[t];o&&o.forEach(function(e){try{e.apply(null,n)}catch(e){console.error('Error when executing listener for event "'.concat(t,'":'),e)}})},bindClass:function(n,r){var i=this;Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(function(e){var o,t;"function"==typeof n[e]&&"constructor"!==e&&(o=r+"::"+e,t=n[e].bind(n),i.emitters[o]=n,i.wrappedFunctions[o]=t,n[e]=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.emit.apply(i,[o].concat(n)),(e=i.wrappedFunctions)[o].apply(e,n)})})},unbindClass:function(r,o){var i=this;Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(e){var t,n;"function"==typeof r[e]&&"constructor"!==e&&(n=i.wrappedFunctions[t=o+"::"+e])&&(i.off(t,n),r[e]=n,delete i.wrappedFunctions[t])})},listenerCount:function(e){return this.listeners[e]?this.listeners[e].length:0}};n.default=i},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=Date.now();n.default=function(){var t=this,e=(this.tick++,this.data.tick=this.tick,this.config.hzMS||16.666),n=(this.currentPlayerId&&(this.data.currentPlayer=this.data.ents.PLAYER.find(function(e){return e.id===t.currentPlayerId})),Date.now()),r=n-o;o=n,r=Math.min(r,e),this.removedEntities.clear(),this.isClient&&this.systems.entity.cleanupDestroyedEntities(),this.physics.updateEngine(r),this.lifecycle&&this.lifecycle.triggerHook("before.update",e),this.systemsManager&&this.systemsManager.update(e),this.lifecycle&&this.lifecycle.triggerHook("after.update",e),this.changedEntities.clear(),this.saveSnapshot(this.getEntities(),this.lastProcessedInput)}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=this,n=e.physics,r=e.graphics,o=(e.collisions,e.keyboard),i=e.mouse,a=e.gamepad,c=e.virtualGamepad,s=e.editor,u=e.sutra,f=(e.ghostTyper,e.lifetime),e=e.defaultMovement,e=void 0===e||e,l=this.plugins,d=this.config;l.length&&(console.log("The following plugins will be loaded from `GameConfig`",l),l.forEach(function(e){"string"==typeof e||"object"===y(e)&&e.id&&"function"==typeof e.init?t.use(e):"object"===y(e)&&e.name&&"object"===y(e.config)&&t.use(e.name,e.object)}));d.showLoadingScreen&&!this.isServer&&this.use(new h.default({minLoadTime:d.minLoadTime}));this.use("Entity"),"matter"===n&&this.use("MatterPhysics");"physx"===n&&this.use("PhysXPhysics");this.use("SnapshotManager"),f&&this.use("Lifetime");this.isServer||(l={protobuf:d.protobuf,deltaCompression:d.deltaCompression,msgpack:d.msgpack},this.use("Client",l),s&&this.use("Editor"),o&&this.use("Keyboard"),i&&this.use("Mouse"),a&&this.use("Gamepad"),c&&this.use("GamepadGUI",a),u&&this.use("Sutra",{defaultMovement:e}),e&&this.systems.sutra&&this.systems.sutra.bindDefaultMovementSutra(mode),this.use("GhostTyper"),this.use(new p.default),r&&(this.use("Graphics"),this.storage.get("graphics"),(r="string"==typeof r?[r]:r).includes("ascii")&&this.use("ASCIIGraphics",{camera:this.config.camera}),r.includes("babylon")&&this.use("BabylonGraphics",{camera:this.config.camera}),r.includes("css")&&this.use("CSSGraphics",{camera:this.config.camera}),r.includes("css3D")&&this.use("CSS3DGraphics",{camera:this.config.camera}),r.includes("phaser")&&this.use("PhaserGraphics",{camera:this.config.camera}),r.includes("three"))&&this.use("ThreeGraphics",{camera:this.config.camera}))};var h=r(e("../plugins/loading-screen/LoadingScreen.js")),p=(r(e("../plugins/typer-ghost/GhostTyper.js")),r(e("../plugins/physics/Physics.js")));function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../plugins/loading-screen/LoadingScreen.js":28,"../plugins/physics/Physics.js":29,"../plugins/typer-ghost/GhostTyper.js":31}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=!1,f=0,l=Date.now(),d=[],h=0;n.default=function e(t,n){u||(u=!0,l=Date.now());for(var r=t.config.hzMS||16.666,o=(t.mode="local",Date.now()),i=(o-l)/1e3,a=(0<i&&(d.push(1/i),60<d.length&&d.shift(),++h%60==0)&&(c=d.reduce(function(e,t){return e+t},0)/d.length,t.emit("fps",c),d=[]),l=o,f+=i,r/1e3);a<=f;)t.gameTick(),f-=a;var c,s=f/a;t.graphics.forEach(function(e){e.render(t,s)}),t.localGameLoopRunning&&(c=function(){e(t,n)},"undefined"==typeof window?setTimeout(c,0):window.requestAnimationFrame(c))}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=!1,s=null,u=16.666,f=0,l=Date.now(),d=[],h=0;n.default=function e(t){c||(c=!0,l=Date.now()),t.onlineGameLoopRunning=!0,t.mode="online";var n,r=Date.now(),o=(r-l)/1e3;if(0<o&&(d.push(1/o),60<d.length&&d.shift(),++h%60==0)&&(n=d.reduce(function(e,t){return e+t},0)/d.length,t.emit("fps",n),d=[]),l=r,f+=o,t.latestSnapshot&&t.latestSnapshot.id!==s)for(;0<t.snapshotQueue.length;){var i=t.snapshotQueue.shift();i.state.forEach(function(e){t.inflateEntity(e)}),s=i.id}for(;u/1e3<=f;)t.gameTick(),f-=u/1e3;var a=f/.016666;t.graphics.forEach(function(e){e.render(t,a)}),t.onlineGameLoopRunning&&requestAnimationFrame(function(){e(t)})}},{}],22:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.data={}}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this.data={}}},{key:"setItem",value:function(e,t){this.data[e]=t}},{key:"getItem",value:function(e){return this.data[e]||null}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"key",value:function(e){return Object.keys(this.data)[e]||null}},{key:"length",get:function(){return Object.keys(this.data).length}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.default=r},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e=(e=e("./MemoryBackend.js"))&&e.__esModule?e:{default:e};r=null,r="undefined"!=typeof window&&window.localStorage?window.localStorage:new e.default,o="mantra-";var r,o,e={setBackend:function(e){r=e},setPrefix:function(e){o=e},clear:function(){r.clear()},set:function(e,t){t=JSON.stringify(t);r.setItem(o+e,t)},get:i,remove:function(e){r.removeItem(o+e)},getAllKeys:function(){for(var e=[],t=0;t<r.length;t++){var n=r.key(t);n.startsWith(o)&&e.push(n.substring(o.length))}return e},getAllKeysWithData:function(){for(var e={},t=0;t<r.length;t++){var n=r.key(t);n&&n.startsWith(o)&&(e[n=n.substring(o.length)]=i(n))}return e}};function i(t){if(null===(t=r.getItem(o+t)))return null;try{return JSON.parse(t)}catch(e){return t}}n.default=e},{"./MemoryBackend.js":22}],24:[function(e,t,n){"use strict";function O(){O=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==_(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(_(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function r(){var c;return c=O().mark(function e(t){var n,r,o;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0<(n=this).worlds.length&&n.worlds.forEach(function(e,t){e.unload&&(console.log(e.id,"world.unload",e.unload),n.worlds.splice(t,1),e.unload())}),n.updateEntity(n.currentPlayerId,{meta:{lives:0},sutra:null}),"object"===_(t))return n.systems.entity.removeAllEntities(),n.use(t),e.abrupt("return");e.next=8;break;case 8:if(n.systems.entity.removeAllEntities(!0),o=t,r=WORLDS.worlds[o]){e.next=16;break}return console.error("World ".concat(o," not found")),e.abrupt("return");case 16:o=new r,n.once("plugin::loaded::"+o.id,function(){}),setTimeout(function(){},400),o.preload,n.use(o),n.storage.set("world",t);case 22:case"end":return e.stop()}},e,this)}),(r=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.apply(this,arguments)}},{}],25:[function(e,t,n){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){_=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(O(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function a(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function r(){return(r=a(_().mark(function e(t,n){var r,o,i=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isServer)return e.abrupt("return");e.next=2;break;case 2:"string"==typeof t&&(t=[t]),r=function(){var t=a(_().mark(function e(r){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=i.scriptRoot+r,n.onload=function(){e(r)},n.onerror=function(){t("Error loading stylesheet: ".concat(r))},document.head.appendChild(n)}));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),o=0;case 5:if(o<t.length)return e.prev=6,e.next=9,r(t[o]);e.next=17;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error(e.t0);case 14:o++,e.next=5;break;case 17:"function"==typeof n&&n();case 18:case"end":return e.stop()}},e,this,[[6,11]])}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return r.apply(this,arguments)}},{}],26:[function(e,t,n){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){_=function(){return a};var s,a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(s){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new P(r||[]);return f(t,"_invoke",{value:(o=e,i=n,a=r,c=d,function(e,t){if(c===p)throw new Error("Generator is already running");if(c===y){if("throw"===e)throw t;return{value:s,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===s)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=s,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;r=l(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=s),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}(n,a);if(n){if(n===b)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===d)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;n=l(o,i,a);if("normal"===n.type){if(c=a.done?y:h,n.arg===b)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c=y,a.method="throw",a.arg=n.arg)}})}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",y="completed",b={};function g(){}function m(){}function v(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(L([]))),j=(w&&w!==e&&u.call(w,r)&&(t=w),v.prototype=g.prototype=Object.create(t));function S(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(a,c){var t;f(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==O(n)&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e}).next=e}throw new TypeError(O(t)+" is not iterable")}return f(j,"constructor",{value:m.prototype=v,configurable:!0}),f(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,o,"GeneratorFunction")),e.prototype=Object.create(j),e},a.awrap=function(e){return{__await:e}},S(x.prototype),i(x.prototype,n,function(){return this}),a.AsyncIterator=x,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new x(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(j),i(j,o,"Generator"),i(j,r,function(){return this}),i(j,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,E(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),b}},a}function s(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function a(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function r(){return(r=a(_().mark(function e(t,n){var r,o,i=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isServer)return e.abrupt("return");e.next=2;break;case 2:"string"==typeof t&&(t=[t]),r=function(){var t=a(_().mark(function e(r){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var n=document.createElement("script");n.type="text/javascript",n.defer=!0,n.src=i.scriptRoot+r,n.onload=function(){e(r)},n.onerror=function(){t("Error loading script: ".concat(r))},document.head.appendChild(n)}));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),o=0;case 5:if(o<t.length)return e.prev=6,e.next=9,r(t[o]);e.next=17;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error(e.t0);case 14:o++,e.next=5;break;case 17:n&&n();case 18:case"end":return e.stop()}},e,this,[[6,11]])}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return r.apply(this,arguments)}},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!e)return e;var t={red:"#FF0000",green:"#00FF00",blue:"#fff007",black:"#000000",white:"#FFFFFF",yellow:"#FFFF00",purple:"#800080",orange:"#FFA500",pink:"#FFC0CB"};if("number"==typeof e)return e;if("string"==typeof e&&e.startsWith("#"))return parseInt(e.replace("#",""),16);if("string"==typeof e&&t[e.toLowerCase()])return parseInt(t[e.toLowerCase()].replace("#",""),16);return console.error("Unrecognized color format:",e),parseInt("000000",16)}},{}],28:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,c,s,u=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=r;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");this.id=r.id,this.plugins=[],this.minLoadTime=e.minLoadTime||330,this.startTime=Date.now(),this.loadedPluginsCount=0,this.confirmedLoadedPlugins=[],this.pluginTimers={},this.pluginElements={}}var e,t,n;return e=r,(t=[{key:"init",value:function(e){var t=this,n=this,e=(this.game=e,this.game.systemsManager.addSystem(this.id,this),Object.keys(this.game._plugins));this.plugins=this.plugins.concat(e),this.plugins.sort(),this.createLoadingScreen(),this.game.on("plugin::loading",function(e){-1===t.plugins.indexOf(e)&&(t.plugins.push(e),t.createPluginLoader(e))}),this.game.on("plugin::loaded",function(e){t.markPluginAsLoaded(e)}),this.game.on("game::ready",function(){var e=Date.now(),e=t.minLoadTime-(e-t.startTime);n.gameReadyHandler(),0<e?setTimeout(function(){n.unload()},.33*e):n.unload()})}},{key:"gameReadyHandler",value:function(){var t=this,e=Date.now()-this.startTime,n=Math.max(this.minLoadTime-e,0);this.plugins.forEach(function(e){t.isPluginLoaded(e)||t.fastTrackLoading(e,n)})}},{key:"isPluginLoaded",value:function(e){e=this.pluginElements[e];return e&&"100%"===e.style.width}},{key:"fastTrackLoading",value:function(e,t){var n,r=this,o=(clearInterval(this.pluginTimers[e]),this.pluginElements[e]);o&&(t=t/(100-(n=parseInt(o.style.width,10)||0)),this.pluginTimers[e]=setInterval(function(){n<100?(n++,o.style.width=n+"%"):clearInterval(r.pluginTimers[e])},t))}},{key:"createLoadingScreen",value:function(){this.loadingScreen=document.createElement("div"),this.loadingScreen.id="loadingScreen",this.loadingScreen.classList.add("crt-background");var e=document.createElement("div"),t=(e.classList.add("crt-background"),this.loadingScreen.appendChild(e),document.createElement("div")),t=(t.classList.add("crt-glow"),e.appendChild(t),document.createElement("div")),t=(t.classList.add("crt-scanlines"),e.appendChild(t),this.crtBackground=e,this.setupStyles(this.crtBackground,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"black",color:"white",zIndex:"9999",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),document.createElement("div")),e=(this.setupStyles(t,{width:"80%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px"}),document.createElement("div"));e.textContent="Mantra.js Game Starting",this.setupStyles(e,{fontSize:"20px",fontWeight:"bold"}),this.pluginCounter=document.createElement("div"),this.updatePluginCounter(),this.setupStyles(this.pluginCounter,{fontSize:"16px"}),t.appendChild(e),t.appendChild(this.pluginCounter),this.crtBackground.appendChild(t),this.createPluginLoaders(),document.body.appendChild(this.loadingScreen)}},{key:"updatePluginCounter",value:function(){}},{key:"createPluginLoader",value:function(e){var t=document.createElement("div"),n=(this.setupStyles(t,{display:"flex",alignItems:"center",margin:"5px",width:"80%"}),document.createElement("div")),r=(n.textContent=e,this.setupStyles(n,{marginRight:"10px",whiteSpace:"nowrap"}),document.createElement("div")),o=(this.setupStyles(r,{width:"60%",marginLeft:"auto"}),document.createElement("div"));this.setupStyles(o,{width:"0%",height:"20px",backgroundColor:"limegreen"}),r.appendChild(o),t.appendChild(n),t.appendChild(r),this.crtBackground.appendChild(t),this.pluginElements[e]=o,this.pluginTimers[e]=this.initializeLoadingTimer(o,e)}},{key:"createPluginLoaders",value:function(){var t=this;this.plugins.forEach(function(e){t.createPluginLoader(e)})}},{key:"initializeLoadingTimer",value:function(e,t){var n=this,r=0,o=this.minLoadTime+5e3*Math.random();return setInterval(function(){r<100?(r++,e.style.width=r+"%"):clearInterval(n.pluginTimers[t])},o/100)}},{key:"markPluginAsLoaded",value:function(e){clearInterval(this.pluginTimers[e]);var t=this.pluginElements[e];t&&this.animateToCompletion(t,e),-1===this.confirmedLoadedPlugins.indexOf(e)&&(this.confirmedLoadedPlugins.push(e),this.loadedPluginsCount++,this.updatePluginCounter())}},{key:"animateToCompletion",value:function(e,t){var n=this,r=parseInt(e.style.width,10)||0,o=(500*Math.random()+200)/(100-r);this.pluginTimers[t]=setInterval(function(){r<100?(r++,e.style.width=r+"%"):clearInterval(n.pluginTimers[t])},o)}},{key:"setupStyles",value:function(e,t){Object.assign(e.style,t)}},{key:"unload",value:function(){Object.values(this.pluginTimers).forEach(clearInterval),this.loadingScreen&&this.loadingScreen.parentNode&&this.loadingScreen.parentNode.removeChild(this.loadingScreen)}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}();a=u,s="loading-screen",(c=i(c="id"))in a?Object.defineProperty(a,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[c]=s,n.default=u},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(e=e("./applyGravity.js"))&&e.__esModule?e:{default:e};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function a(e,t,n){(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function c(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}e=n.default=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id=t.id,this.applyGravity=o.default.bind(this)}var e,n,r;return e=t,(n=[{key:"init",value:function(e){var n=this;(this.game=e).systemsManager.addSystem(t.id,this),this.Vector={add:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},sub:function(e,t){return{x:e.x-t.x,y:e.y-t.y}},mult:function(e,t){return{x:e.x*t,y:e.y*t}},div:function(e,t){return{x:e.x/t,y:e.y/t}},magnitude:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},normalize:function(e){var t=n.Vector.magnitude(e);return 0<t?n.Vector.div(e,t):{x:0,y:0}}}}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();a(e,"id","physics"),a(e,"removable",!1)},{"./applyGravity.js":30}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var r,o,i,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],c=this.game;e&&t&&(i=this.Vector,r=i.sub(t.position,e.position),(o=i.magnitude(r))<.5||(r=i.normalize(r),i=n*e.mass*t.mass/(o*o),i=Math.min(i,1),n=a?1:-1,c.applyForce(t.id,{x:n*r.x*i,y:n*r.y*i})))}},{}],31:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function a(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c,s,f,l=function(){function e(){u(this,e),this.id=e.id,this.typers=[]}return i(e,[{key:"init",value:function(e){this.game=e,this.game.systemsManager.addSystem(this.id,this)}},{key:"createQueuedText",value:function(e){var t=this,n=new d(this.game,e.x,e.y,"",e.style,function(){return t.removeTyper(n)});return this.typers.push(n),n}},{key:"queueTextForTyper",value:function(e,t,n,r){e.queueText(t,n,r)}},{key:"startTyperQueue",value:function(e){e.processQueue()}},{key:"createText",value:function(e){var t=this,n=new d(this.game,e.x,e.y,e.text,e.style,e.duration,e.removeDuration,function(){return t.removeTyper(n)});return this.typers.push(n),n}},{key:"update",value:function(){var t=this;this.typers.forEach(function(e){t.game.tick%e.framesToWait!=0||e.complete||e.type()})}},{key:"removeTyper",value:function(t){this.typers=this.typers.filter(function(e){return e!==t})}}]),e}(),d=(c=l,f="typer-ghost",(s=a(s="id"))in c?Object.defineProperty(c,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[s]=f,function(){function s(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=4<arguments.length?arguments[4]:void 0,i=5<arguments.length?arguments[5]:void 0,a=6<arguments.length?arguments[6]:void 0,c=7<arguments.length?arguments[7]:void 0;u(this,s),this.game=e,this.text="",this.ogText=r,this.duration=i||5e3,this.removeDuration=a,this.style=o,this.typerText=this.createTextElement(t,n,o),this.framesToWait=Math.floor((i||5e3)/(33.33*r.length)),this.frameCounter=0,this.lastUpdate=0,this.complete=!1,this.removeTimer=null,this.textQueue=[],this.onRemove=c}return i(s,[{key:"queueText",value:function(e,t,n){this.textQueue.push({text:e,duration:t,removeDuration:n})}},{key:"processQueue",value:function(){var e,t,n;0<this.textQueue.length&&(e=(n=this.textQueue.shift()).text,t=n.duration,n=n.removeDuration,this.updateText(e,t,n))}},{key:"createTextElement",value:function(e,t,n){this.game.data.camera.position,this.game.getEntity(this.game.currentPlayerId);var r=document.createElement("div");return Object.assign(r.style,n,{position:"absolute",left:e+"px",top:t+"px"}),document.body.appendChild(r),r}},{key:"type",value:function(){this.text.length?(this.typerText.textContent+=this.text[0],this.text=this.text.substr(1),this.isTyping=!0):this.isTyping&&(this.complete=!0,this.isTyping=!1,this.setRemoveTimer())}},{key:"setRemoveTimer",value:function(){var e=this;this.removeDuration?this.removeTimer=setTimeout(function(){e.typerText.textContent="",e.processQueue()},this.removeDuration):this.processQueue()}},{key:"updateText",value:function(e,t,n){this.complete=!1,this.text=e,this.ogText=e,this.duration=t||this.duration,this.removeDuration=n,this.framesToWait=Math.floor(this.duration/(33.33*e.length)),this.typerText.textContent="",this.isTyping=!1}}]),s}());n.default=l},{}]},{},[7])(7)});