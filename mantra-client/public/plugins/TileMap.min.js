(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.PLUGINS || (g.PLUGINS = {})).TileMap = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Biome=exports.default=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.name,o=e.tileset,i=e.distribution,n=void 0===i?{}:i;_classCallCheck(this,t),this.name=r,this.tileset=o,this.distribution=n}return _createClass(t,[{key:"setDistribution",value:function(t){this.distribution=t}}]),t}();

},{}],2:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var LSystem=exports.default=function(){function t(e){var i=e.tileset,r=e.axiom,o=e.rules,n=e.generations;_classCallCheck(this,t),this.tileset=i,this.axiom=r,this.rules=o,this.generations=n}return _createClass(t,[{key:"getTileId",value:function(t){var e=this.tileset.getTileByName(t);return e?e.id:null}},{key:"applyRule",value:function(t,e){var i,r=null===(i=this.tileset.getTile(t))||void 0===i?void 0:i.name;if(r&&this.rules[r]){var o,n={tileId:t,tileName:r,getTileId:this.getTileId.bind(this),random:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.random(t,i)},tileMap:{width:e.width,height:e.height,depth:e.depth||0},getNeighbors:function(t,i){return[e.getTileAt(t+1,i),e.getTileAt(t-1,i),e.getTileAt(t,i+1),e.getTileAt(t,i-1)]},position:{x:t%e.width,y:Math.floor(t/e.width),z:e.depth?Math.floor(t/(e.width*e.height)):0}};return"function"==typeof this.rules[r]&&(o=[this.rules[r](n)]),"string"==typeof this.rules[r]&&(o=this.rules[r].split(" ")),this.getTileId(o[0])}return t}},{key:"applyTo",value:function(t){for(var e=this,i=0;i<this.generations;i++)t.data=t.data.map(function(i){return e.applyRule(i,t)})}}]),t}();

},{}],3:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Tile=exports.default=_createClass(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,o=t.name;_classCallCheck(this,e),this.id=r,this.name=o});

},{}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _generateTiledJSON=_interopRequireDefault(require("./util/generateTiledJSON.js")),_mersenne=_interopRequireDefault(require("./util/mersenne.js")),_noise=_interopRequireDefault(require("./util/noise.js")),_getTileAt=_interopRequireDefault(require("./TileMap/getTileAt.js")),_transform=_interopRequireDefault(require("./TileMap/transform.js")),_query=_interopRequireDefault(require("./TileMap/query.js")),_merge=_interopRequireDefault(require("./TileMap/merge.js"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var TileMap=exports.default=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.x,r=void 0===i?0:i,n=e.y,a=void 0===n?0:n,o=e.width,s=void 0===o?16:o,h=e.height,u=void 0===h?16:h,l=e.depth,d=void 0===l?1:l,f=e.tileWidth,y=void 0===f?16:f,v=e.tileHeight,p=void 0===v?16:v;e.is3D;_classCallCheck(this,t),this.x=r,this.y=a,this.width=s,this.height=u,this.depth=d,this.tileWidth=y,this.tileHeight=p,this.mersenneTwister=new _mersenne.default,this.Noise=new _noise.default,this.noise=this.Noise.noise,this.seedNoise=this.Noise.noiseSeed,this.transform=_transform.default.bind(this),this.query=_query.default.bind(this),this.merge=_merge.default.bind(this),this.getTileAt=_getTileAt.default.bind(this),this.data=this.initializeDataArray(),this.tileSet=[],this.defaultRogueLike=["-","#","+","0","<",">","$","âŒ‚","@","&","?"],this.seedRandom()}return _createClass(t,[{key:"initializeDataArray",value:function(){return this.depth>1?init3DArray(this.width,this.height,this.depth):init2DArray(this.width,this.height)}},{key:"fill",value:function(t){if(this.depth>1)for(var e=0;e<this.depth;e++)this.fill3D(t,e);else this.fill2D(t)}},{key:"fill2D",value:function(t){for(var e=0;e<this.height*this.width;e++)this.data[e]=t}},{key:"fill3D",value:function(t,e){for(var i=0;i<this.height*this.width;i++)this.data[e][i]=t}},{key:"random",value:function(t){return this.mersenneTwister.rand(t)}},{key:"seed",value:function(t){void 0===t&&(t=this.random(64e8)),this.mersenneTwister.seed(t),this.seedNoise(t)}},{key:"seedRandom",value:function(){this.seed(this.random(64e8))}},{key:"use",value:function(t,e,i){for(var r=0;r<t.height;r++)for(var n=0;n<t.width;n++){var a=n+e,o=r+i;a<this.width&&o<this.height&&(this.data[o*this.width+a]=t.data[r*t.width+n])}}},{key:"scaleToTileRange",value:function(t){for(var e=this.data,i=Math.max.apply(Math,_toConsumableArray(e)),r=Math.min.apply(Math,_toConsumableArray(e)),n=t-1,a=0;a<e.length;a++){var o=(e[a]-r)/(i-r);this.data[a]=Math.round(o*n)+1}}},{key:"mask",value:function(t){var e=[];if(this.depth>1){for(var i=t||this.defaultRogueLike,r=0;r<this.depth;r++){for(var n="",a=0;a<this.height;a++){for(var o=0;o<this.width;o++){n+=i[this.data[r][a*this.width+o]%i.length]}n+="\n"}e.push(n)}return e}for(var s="",h=t||this.defaultRogueLike,u=0;u<this.height;u++){for(var l=0;l<this.width;l++){s+=h[this.data[u*this.width+l]%h.length]}s+="\n"}return[s]}},{key:"applyBiome",value:function(t){for(var e=this,i=e.data,r=t.distribution,n=Object.keys(r),a=n.reduce(function(t,e){return t+r[e]},0),o=n.map(function(t,e){return{name:t,end:n.slice(0,e+1).reduce(function(t,e){return t+r[e]},0)/a}}),s=function(){var r=i[h],n=o.find(function(t){return r<=t.end}).name,a=t.tileset.getTileByName(n).id;e.data[h]=a},h=0;h<i.length;h++)s()}},{key:"toJSON",value:function(){return JSON.stringify({width:this.width,height:this.height,tileWidth:this.tileWidth,tileHeight:this.tileHeight,data:this.data},null,2)}},{key:"toTiledJSON",value:function(){return(0,_generateTiledJSON.default)(this)}},{key:"query3D",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,i=t.y,r=t.z,n=t.width,a=t.height,o=t.depth,s=t.tileName,h=[];if(void 0!==e&&void 0!==i&&void 0!==r&&void 0!==n&&void 0!==a&&void 0!==o)for(var u=0;u<o;u++)for(var l=0;l<a;l++)for(var d=0;d<n;d++){var f=e+d,y=i+l,v=r+u;if(f>=this.width||y>=this.height||v>=this.depth)h.push(void 0);else{var p=v*this.width*this.height+y*this.width+f;void 0!==this.data[p]?h.push(this.data[p]):h.push(void 0)}}if(void 0!==s){var c=this.getTileIdByName(s);h=h.filter(function(t){return t===c})}return h}},{key:"findTilesById",value:function(t){for(var e=[],i=this.is3D?this.data.length:1,r=0;r<i;r++)for(var n=this.is3D?this.data[r]:this.data,a=0;a<n.length;a++)if(n[a]===t){var o=a%this.width,s=Math.floor(a/this.width);e.push(this.is3D?{x:o,y:s,z:r}:{x:o,y:s})}return e}},{key:"getTileIdByName",value:function(t){return 1}}]),t}();function init2DArray(t,e){return new Array(t*e).fill(0)}function init3DArray(t,e,i){for(var r=[],n=0;n<i;n++)r.push(init2DArray(t,e));return r}

},{"./TileMap/getTileAt.js":5,"./TileMap/merge.js":6,"./TileMap/query.js":7,"./TileMap/transform.js":8,"./util/generateTiledJSON.js":28,"./util/mersenne.js":29,"./util/noise.js":30}],5:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function getTileAt(t,e,r){var o;if(this.is3D){if(void 0===r||void 0===this.data[r])return;o=this.data[r][e*this.width+t]}else o=this.data[e*this.width+t];var i=_objectSpread({id:o,value:o,x:t,y:e},this.is3D?{z:r}:{});return Array.isArray(this.tileSet)&&this.tileSet[o]&&(i=_objectSpread(_objectSpread({},i),this.tileSet[o])),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=getTileAt;

},{}],6:[function(require,module,exports){
"use strict";function merge(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=0;r<t.depth;r++)for(var s=0;s<t.height;s++)for(var d=0;d<t.width;d++){var o=e+d,a=i+s,l=h+r;this.is3D?this.data[l][a*this.width+o]=t.getTileAt(d,s,r).value:this.data[a*this.width+o]=t.getTileAt(d,s).value}}function ensureBounds(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.is3D}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=merge;

},{}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=query;var _TileMap=_interopRequireDefault(require("../TileMap.js"));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function query(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.x,e=i.y,a=i.width,d=i.height,h=i.z,r=(i.tile,[]);if(void 0!==t&&void 0!==e&&void 0!==a&&void 0!==d)for(var s=0;s<d;s++)for(var u=0;u<a;u++){var o=t+u,v=e+s;if(o>=this.width||v>=this.height)r.push(void 0);else{var l=v*this.width+o;this.is3D?void 0!==h&&this.data[h]&&void 0!==this.data[h][l]?r.push(this.data[h][l]):r.push(void 0):void 0!==this.data[l]?r.push(this.data[l]):r.push(void 0)}}var p=new _TileMap.default({width:a,height:d,is3D:this.is3D});return p.data=r,p}

},{"../TileMap.js":4}],8:[function(require,module,exports){
"use strict";function transform(t){if(this.depth>1)for(var i=0;i<this.depth;i++)for(var h=0;h<this.height;h++)for(var e=0;e<this.width;e++){var r=t(this.getTileAt(e,h,i),e,h,i);this.data[i][h*this.width+e]=r}else for(var s=0;s<this.height;s++)for(var a=0;a<this.width;a++){var d=t(this.getTileAt(a,s),a,s);this.data[s*this.width+a]=d.id}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=transform;

},{}],9:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var TileSet=exports.default=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).tiles,r=void 0===t?[]:t;_classCallCheck(this,e),this.tiles=r}return _createClass(e,[{key:"addTile",value:function(e){this.tiles.push(e)}},{key:"getTile",value:function(e){return this.tiles.find(function(t){return t.id===e})}},{key:"getTileByName",value:function(e){return this.tiles.find(function(t){return t.name===e})}}]),e}();

},{}],10:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Tile=_interopRequireDefault(require("./Tile.js")),_TileMap=_interopRequireDefault(require("./TileMap.js")),_TileSet=_interopRequireDefault(require("./TileSet.js")),_Biome=_interopRequireDefault(require("./Biome.js")),_AldousBroder=_interopRequireDefault(require("./mazes/AldousBroder.js")),_AldousBroder3D=_interopRequireDefault(require("./mazes/AldousBroder3D.js")),_BinaryTree=_interopRequireDefault(require("./mazes/BinaryTree.js")),_CellularAutomata=_interopRequireDefault(require("./mazes/CellularAutomata.js")),_EllersAlgorithm=_interopRequireDefault(require("./mazes/EllersAlgorithm.js")),_GrowingTree=_interopRequireDefault(require("./mazes/GrowingTree.js")),_RecursiveBacktrack=_interopRequireDefault(require("./mazes/RecursiveBacktrack.js")),_RecursiveDivision=_interopRequireDefault(require("./mazes/RecursiveDivision.js")),_ThomasHunter=_interopRequireDefault(require("./mazes/ThomasHunter.js")),_BeattieSchoberth=_interopRequireDefault(require("./mazes/BeattieSchoberth.js")),_Metroidvania=_interopRequireDefault(require("./mazes/Metroidvania.js")),_Circle=_interopRequireDefault(require("./shapes/Circle.js")),_Square=_interopRequireDefault(require("./shapes/Square.js")),_Triangle=_interopRequireDefault(require("./shapes/Triangle.js")),_LSystem=_interopRequireDefault(require("./LSystem.js")),_FaultLine=_interopRequireDefault(require("./terrains/FaultLine.js")),_PerlinNoise=_interopRequireDefault(require("./terrains/PerlinNoise.js")),_noise=_interopRequireDefault(require("./util/noise.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var labyrinthos={mazes:{}};labyrinthos.mazes.AldousBroder=_AldousBroder.default,labyrinthos.mazes.AldousBroder3D=_AldousBroder3D.default,labyrinthos.mazes.BinaryTree=_BinaryTree.default,labyrinthos.mazes.CellularAutomata=_CellularAutomata.default,labyrinthos.mazes.EllersAlgorithm=_EllersAlgorithm.default,labyrinthos.mazes.GrowingTree=_GrowingTree.default,labyrinthos.mazes.RecursiveBacktrack=_RecursiveBacktrack.default,labyrinthos.mazes.RecursiveDivision=_RecursiveDivision.default,labyrinthos.mazes.BeattieSchoberth=_BeattieSchoberth.default,labyrinthos.mazes.ThomasHunter=_ThomasHunter.default,labyrinthos.mazes.Metroidvania=_Metroidvania.default,labyrinthos.mazes.PlatformZones=_Metroidvania.default,labyrinthos.shapes={},labyrinthos.shapes.Circle=_Circle.default,labyrinthos.shapes.Square=_Square.default,labyrinthos.shapes.Triangle=_Triangle.default,labyrinthos.terrains={},labyrinthos.terrains.FaultLine=_FaultLine.default,labyrinthos.terrains.PerlinNoise=_PerlinNoise.default,labyrinthos.utils={},labyrinthos.utils.noise=_noise.default,labyrinthos.Biome=_Biome.default,labyrinthos.LSystem=_LSystem.default,labyrinthos.Tile=_Tile.default,labyrinthos.TileMap=_TileMap.default,labyrinthos.TileSet=_TileSet.default;var _default=exports.default=labyrinthos;

},{"./Biome.js":1,"./LSystem.js":2,"./Tile.js":3,"./TileMap.js":4,"./TileSet.js":9,"./mazes/AldousBroder.js":11,"./mazes/AldousBroder3D.js":12,"./mazes/BeattieSchoberth.js":13,"./mazes/BinaryTree.js":14,"./mazes/CellularAutomata.js":15,"./mazes/EllersAlgorithm.js":16,"./mazes/GrowingTree.js":17,"./mazes/Metroidvania.js":18,"./mazes/RecursiveBacktrack.js":19,"./mazes/RecursiveDivision.js":20,"./mazes/ThomasHunter.js":21,"./shapes/Circle.js":22,"./shapes/Square.js":23,"./shapes/Triangle.js":24,"./terrains/FaultLine.js":25,"./terrains/PerlinNoise.js":26,"./util/noise.js":30}],11:[function(require,module,exports){
"use strict";function ALGORITHM_ALDOUS_BRODER(t,a){t.fill(1);var h=0,o=t.width*t.height/4,d=2*Math.floor(t.random()*Math.floor(t.width/2)),r=2*Math.floor(t.random()*Math.floor(t.height/2));for(t.data[r*t.width+d]=0,h++;h<o;){var e=[[2,0],[-2,0],[0,2],[0,-2]],i=e[Math.floor(t.random()*e.length)],l=d+i[0],f=r+i[1];l>=0&&l<t.width&&f>=0&&f<t.height&&(1===t.data[f*t.width+l]&&(t.data[(r+i[1]/2)*t.width+(d+i[0]/2)]=0,t.data[f*t.width+l]=0,h++),d=l,r=f)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ALGORITHM_ALDOUS_BRODER;

},{}],12:[function(require,module,exports){
"use strict";function ALGORITHM_ALDOUS_BRODER_3D(t,h){t.fill(1);var a=0,o=t.width*t.height*t.depth/8,d=2*Math.floor(Math.random()*Math.floor(t.width/2)),r=2*Math.floor(Math.random()*Math.floor(t.height/2)),e=2*Math.floor(Math.random()*Math.floor(t.depth/2));for(t.data[e][r*t.width+d]=0,a++;a<o;){var i=[[2,0,0],[-2,0,0],[0,2,0],[0,-2,0],[0,0,2],[0,0,-2]],M=i[Math.floor(Math.random()*i.length)],l=d+M[0],f=r+M[1],n=e+M[2];l>=0&&l<t.width&&f>=0&&f<t.height&&n>=0&&n<t.depth&&(1===t.data[n][f*t.width+l]&&(t.data[e+M[2]/2][(r+M[1]/2)*t.width+(d+M[0]/2)]=0,t.data[n][f*t.width+l]=0,a++),d=l,r=f,e=n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ALGORITHM_ALDOUS_BRODER_3D;

},{}],13:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,s=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BeattieSchoberthBuilder=exports.BeattieSchoberth=void 0,exports.default=ALGORITHM_BEATTIE_SCHOBERTH;var MAX_X=201,MAX_Y=201,DIR=["n","e","s","w"],BeattieSchoberth=exports.BeattieSchoberth=function(){function t(e){var o=e.rooms,r=e.keys;_classCallCheck(this,t),this.maxRooms=o,this.maxKeys=r,this.maxRooms<2&&(console.error("Room count ".concat(this.maxRooms," needs to be at least two (entrance and exit).")),this.maxRooms=2),this.maxKeys>this.maxRooms-2&&(console.error("Key count ".concat(this.maxKeys," is greater than rooms ").concat(this.maxRooms," minus two (entrance and exit). Reducing keys by two.")),this.maxKeys=this.maxRooms-2),this.build=this.generate,this.reset()}return _createClass(t,[{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t={0:"[1;31m",1:"[1;32m",2:"[1;34m",3:"[1;33m",4:"[1;35m",5:"[1;36m"},e=(arguments.length>1?arguments[1]:void 0)||this.generate(),o=e.grid,r="",n=0;n<e.size.height;n++){for(var s="",i="",a=0;a<e.size.width;a++){var l=o[n][a],h=e.rooms[l];if(h){var u=t[h.keyInRoom]||"[1;37m";if((h.entrance||h.exit)&&(u="[7m"),s+=u+String(l).padStart(3,"0")+"[0m",null!==h.doors.e)s+=(t[e.doors[h.doors.e].key]||"[1;37m")+"-[0m";else s+=" ";if(null!==h.doors.s)i+=(t[e.doors[h.doors.s].key]||"[1;37m")+"  | [0m";else i+="    "}else s+="    ",i+="    "}r+=s+"\n",r+=i+"\n"}return r}},{key:"reset",value:function(){this.rooms=[],this.doors=[],this.keys=[],this.entrance=0,this.exit=null,this.seed={x:Math.floor(MAX_X/2),y:Math.floor(MAX_Y/2)},this.bounds={n:this.seed.y,e:this.seed.x,s:this.seed.y,w:this.seed.x},this.furthest={n:new Map,e:new Map,s:new Map,w:new Map},this.lockPool=new Map,this.maxDistance=0}},{key:"generate",value:function(t){this.random=t||function(){return Math.random()},this.reset(),this.addRoom(this.seed.x,this.seed.y);for(var e=0;e<this.maxRooms-1;e++){var o=DIR[Math.floor(t()*DIR.length)],r=void 0,n=void 0,s=void 0;if("n"===o){r=Math.floor(t()*(this.bounds.e-this.bounds.w))+this.bounds.w;var i=this.furthest.n.get(r);n=(s=this.rooms[i]).y-1}else if("e"===o){n=Math.floor(t()*(this.bounds.s-this.bounds.n))+this.bounds.n;var a=this.furthest.e.get(n);r=(s=this.rooms[a]).x+1}else if("s"===o){r=Math.floor(t()*(this.bounds.e-this.bounds.w))+this.bounds.w;var l=this.furthest.s.get(r);n=(s=this.rooms[l]).y+1}else if("w"===o){n=Math.floor(t()*(this.bounds.s-this.bounds.n))+this.bounds.n;var h=this.furthest.w.get(n);r=(s=this.rooms[h]).x-1}var u=this.addRoom(r,n);this.addDoor(s.id,u)}var d=this.rooms.length/(this.maxKeys+1),c=this.getHighestDistanceRoom().id;this.setExit(c);for(var f=0;f<this.maxKeys;f++){var m=this.findRoomParentWithAtMostChildren(this.rooms[c],d);if(!m){console.error("exhausted possible lockable rooms! giving up.");break}this.removeRoomAndChildrenFromLockPool(m),this.decrementChildrenCountAllParents(m);var v=this.getHighestDistanceRoom();if(!v){console.error("Cannot find a room to put a key in! Cancelling lock. Level should still be beatable.");break}this.lock(m.id-1,v.id),c=v.id}var y=this.squish(),p=y.width,g=y.height,b=this.generateGrid(p,g);return this.classifyRooms(),{size:{width:p,height:g},terminals:{entrance:this.entrance,exit:this.exit,deadends:this.deadends},rooms:this.rooms.map(function(t){return delete t.children,delete t.childrenCount,delete t.parent,t}),doors:this.doors.map(function(t){return t.rooms=t.rooms.map(function(t){return t.id}),t}),keys:this.keys,grid:b}}},{key:"squish",value:function(){var t,e=this.bounds.e-this.bounds.w+1,o=this.bounds.s-this.bounds.n+1,r=this.bounds.w,n=this.bounds.n,s=_createForOfIteratorHelper(this.rooms);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.x-=r,i.y-=n}}catch(t){s.e(t)}finally{s.f()}return{width:e,height:o}}},{key:"addRoom",value:function(t,e){var o=this.rooms.length;this.stretch(t,e),this.further(t,e,o);var r={id:o,x:t,y:e,children:new Set,childrenCount:0,parent:null,keyInRoom:null,template:"F1",distance:0===o?0:null,exit:!1,entrance:0===o,doors:{n:null,e:null,s:null,w:null}};return this.rooms.push(r),o}},{key:"further",value:function(t,e,o){var r=this.furthest.n.get(t);(void 0===r||this.rooms[r].y>e)&&this.furthest.n.set(t,o);var n=this.furthest.e.get(e);(void 0===n||this.rooms[n].x<t)&&this.furthest.e.set(e,o);var s=this.furthest.s.get(t);(void 0===s||this.rooms[s].y<e)&&this.furthest.s.set(t,o);var i=this.furthest.w.get(e);(void 0===i||this.rooms[i].x>t)&&this.furthest.w.set(e,o)}},{key:"stretch",value:function(t,e){e<this.bounds.n&&(this.bounds.n=e),t>this.bounds.e&&(this.bounds.e=t),e>this.bounds.s&&(this.bounds.s=e),t<this.bounds.w&&(this.bounds.w=t)}},{key:"classifyRooms",value:function(){this.deadends=[];var t,e=_createForOfIteratorHelper(this.rooms);try{for(e.s();!(t=e.n()).done;){var o=t.value,r=0;null!==o.doors.n&&r++,null!==o.doors.e&&r++,null!==o.doors.s&&r++,null!==o.doors.w&&r++,1===r?(this.deadends.push(o.id),null!==o.doors.n?o.template="D1":null!==o.doors.e?o.template="D2":null!==o.doors.s?o.template="D3":null!==o.doors.w&&(o.template="D4")):2===r?null!==o.doors.n&&null!==o.doors.s?o.template="C1":null!==o.doors.e&&null!==o.doors.w?o.template="C2":null!==o.doors.n&&null!==o.doors.e?o.template="B1":null!==o.doors.e&&null!==o.doors.s?o.template="B2":null!==o.doors.s&&null!==o.doors.w?o.template="B3":null!==o.doors.w&&null!==o.doors.n&&(o.template="B4"):3===r?null===o.doors.s?o.template="E1":null===o.doors.w?o.template="E2":null===o.doors.n?o.template="E3":null===o.doors.e&&(o.template="E4"):o.template=4===r?"A1":"F1"}}catch(t){e.e(t)}finally{e.f()}}},{key:"addDoor",value:function(t,e){var o=this.rooms[t],r=this.rooms[e],n=this.doors.length,s=null;if(o.x===r.x&&o.y===r.y-1)s="v",o.doors.s=n,r.doors.n=n;else if(o.x===r.x+1&&o.y===r.y)s="h",o.doors.w=n,r.doors.e=n;else if(o.x===r.x&&o.y===r.y+1)s="v",o.doors.n=n,r.doors.s=n;else{if(o.x!==r.x-1||o.y!==r.y)throw new Error("Rooms must be adjacent");s="h",o.doors.e=n,r.doors.w=n}return o.children.add(r),r.distance=o.distance+1,r.parent=o,this.increaseChildrenCountAllParents(r),this.registerRoomDistanceLockPool(r.id),this.doors.push({id:n,key:null,orientation:s,exit:!1,rooms:[o,r]}),n}},{key:"increaseChildrenCountAllParents",value:function(t){for(;t=t.parent;)t.childrenCount++}},{key:"registerRoomDistanceLockPool",value:function(t){var e=this.rooms[t],o=e.distance;this.lockPool.get(o)||this.lockPool.set(o,new Set),this.lockPool.get(o).add(e),o>this.maxDistance&&(this.maxDistance=o)}},{key:"removeFromLockPool",value:function(t){var e=t.distance,o=this.lockPool.get(e);o?o.delete(t):console.error("no pool of depth ".concat(e))}},{key:"getHighestDistanceRoom",value:function(){for(var t=this.maxDistance;t>0;t--){var e=this.lockPool.get(t);if(e.size)return e.values().next().value}return null}},{key:"findRoomParentWithAtMostChildren",value:function(t,e){if(!t)throw new Error("bad room");for(var o;o=t.parent;){if(o.childrenCount+1>e)return t;t=o}return t}},{key:"decrementChildrenCountAllParents",value:function(t){for(var e=t.childrenCount+1;t;)t.childrenCount-=e,t=t.parent}},{key:"removeRoomAndChildrenFromLockPool",value:function(t){this.removeFromLockPool(t);var e,o=_createForOfIteratorHelper(t.children);try{for(o.s();!(e=o.n()).done;){var r=e.value;this.removeFromLockPool(r),this.removeRoomAndChildrenFromLockPool(r)}}catch(t){o.e(t)}finally{o.f()}}},{key:"lock",value:function(t,e){var o=this.doors[t],r=this.rooms[e],n=this.keys.length;if(!o)throw new Error("Invalid door ".concat(t));if(!r)throw new Error("Invalid room ".concat(e));return this.keys.push({id:n,location:r.id,door:t}),this.doors[t].key=n,r.keyInRoom=n,n}},{key:"generateGrid",value:function(t,e){for(var o=[],r=0;r<e;r++){for(var n=[],s=0;s<t;s++)n.push(null);o.push(n)}var i=this;return function t(e){var r=i.rooms[e];o[r.y][r.x]=r.id;var n,s=_createForOfIteratorHelper(r.children);try{for(s.s();!(n=s.n()).done;)t(n.value.id)}catch(t){s.e(t)}finally{s.f()}}(0),o}},{key:"setExit",value:function(t){var e=this.rooms[t];if(!e)throw new Error("invalid room id ".concat(t));e.exit=!0,null!==e.doors.n&&(this.doors[e.doors.n].exit=!0),null!==e.doors.e&&(this.doors[e.doors.e].exit=!0),null!==e.doors.s&&(this.doors[e.doors.s].exit=!0),null!==e.doors.w&&(this.doors[e.doors.w].exit=!0),this.exit=t}}]),t}(),TILE={VOID:0,WALL:1,FLOOR:2,DOOR:3,SPECIAL_DOOR:4,ENTER:5,EXIT:6},toCharGrid=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("\n").map(function(t){return t.split("")})},Grid=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";_classCallCheck(this,t),this.grid=toCharGrid(e)}return _createClass(t,[{key:"overlay",value:function(t,e,o){for(var r=Array.isArray(t)?t:toCharGrid(t),n=0;n<r.length;n++)for(var s=0;s<r[n].length;s++)this.grid[o+n]||(this.grid[o+n]=[]),this.grid[o+n][e+s]=r[n][s]}},{key:"fill",value:function(t,e,o){for(var r=0;r<o;r++){this.grid[r]=[];for(var n=0;n<e;n++)this.grid[r][n]=t}}},{key:"toString",value:function(){return this.grid.map(function(t){return t.join("")}).join("\n")}}]),t}(),BeattieSchoberthBuilder=exports.BeattieSchoberthBuilder=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.adventure=new BeattieSchoberth(e),this.options=e,this.max_height=e.maxHeight,this.max_width=e.maxWidth}return _createClass(t,[{key:"renderWorld",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,r=function(o){return e[o]||t.options[o]},n=r("width"),s=r("height"),i=r("roomWidth"),a=r("roomHeight"),l=o||this.build(),h=l.grid,u=new Grid,d=null;u.fill(TILE.VOID,n,s);for(var c=0;c<l.size.height;c++)for(var f=0;f<l.size.width;f++){var m=h[c][f],v=l.rooms[m];d=v?this.buildRoom({doors:v.doors}):this.emptyRoom({}),u.overlay(d,f*i,c*a)}return u.grid}},{key:"buildRoom",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=function(t,e,o){var r=Math.floor(e/2),n=!!(e%2),s=Math.floor(o/2);return n?!(t!==r||!o)||(t<r?t>r-s:t<r+s):t<=r?t>=r-s:t<r+s},r=function(o){return e[o]||t.options[o]},n=r("roomWidth"),s=r("roomHeight"),i=[],a=0;a<s;a++){for(var l=[],h=0;h<n;h++)0===h||h===n-1?0===h?e.doors.w&&o(a,s,2)?l.push(TILE.DOOR):l.push(TILE.WALL):e.doors.e&&o(a,s,2)?l.push(TILE.DOOR):l.push(TILE.WALL):0===a||a===s-1?0===a?e.doors.n&&o(h,n,2)?l.push(TILE.DOOR):l.push(TILE.WALL):e.doors.s&&o(h,n,2)?l.push(TILE.DOOR):l.push(TILE.WALL):l.push(TILE.FLOOR);i.push(l)}return i}},{key:"emptyRoom",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=function(o){return e[o]||t.options[o]},r=o("roomWidth"),n=o("roomHeight"),s=[],i=0;i<n;i++){for(var a=[],l=0;l<r;l++)a.push(TILE.VOID);s.push(a)}return s}},{key:"build",value:function(t){var e=this.adventure.build(t);return e.world=this.renderWorld({},e),e}}]),t}();function ALGORITHM_BEATTIE_SCHOBERTH(t,e){var o=Math.floor(Math.sqrt(Math.max(t.width,t.height))),r=new BeattieSchoberthBuilder({rooms:2*o,keys:3,special:2,width:t.width,height:t.height,roomHeight:e.roomHeight||o,roomWidth:e.roomWidth||o}).build(function(){return t.random()}),n=r.world.reduce(function(t,e){return t.concat(e)},[]);r.world=null;for(var s=0;s<t.data.length;s++)t.data[s]=n[s];t.world=r}

},{}],14:[function(require,module,exports){
"use strict";function _slicedToArray(r,t){return _arrayWithHoles(r)||_iterableToArrayLimit(r,t)||_unsupportedIterableToArray(r,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=r[e];return a}function _iterableToArrayLimit(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,n,o,i,l=[],u=!0,y=!1;try{if(o=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;u=!1}else for(;!(u=(a=o.call(e)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(r){y=!0,n=r}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(y)throw n}}return l}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function ALGORITHM_BINARY_TREE(r,t){r.fill(1);for(var e=0;e<r.height;e+=2)for(var a=0;a<r.width;a+=2){r.data[e*r.width+a]=0;var n=[];if(a+2<r.width&&n.push([2,0]),e+2<r.height&&n.push([0,2]),n.length>0){var o=_slicedToArray(n[Math.floor(r.random()*n.length)],2),i=o[0],l=o[1];r.data[(e+l)*r.width+(a+i)]=0,r.data[(e+l/2)*r.width+(a+i/2)]=0}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ALGORITHM_BINARY_TREE;

},{}],15:[function(require,module,exports){
"use strict";function generateCellularAutomataMap(a,r){for(var t=r.wallChance||.45,e=r.iterations||4,h=r.neighborThreshold||4,i=0;i<a.height;i++)for(var o=0;o<a.width;o++)a.data[i*a.width+o]=a.random()<t?0:1;for(var d=0;d<e;d++){for(var l=new Array(a.width*a.height).fill(1),f=0;f<a.height;f++)for(var n=0;n<a.width;n++){for(var u=0,v=-1;v<=1;v++)for(var w=-1;w<=1;w++)if(0!==w||0!==v){var g=n+w,s=f+v;g>=0&&g<a.width&&s>=0&&s<a.height?u+=0===a.data[s*a.width+g]?1:0:u++}l[f*a.width+n]=u>=h?0:1}a.data=l}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateCellularAutomataMap;

},{}],16:[function(require,module,exports){
"use strict";function generateEllersAlgorithmMap(t,e){t.data.fill(0);var r={};function a(t,e){var a="".concat(t,",").concat(e);return r[a]||function(t,e){var a="".concat(t,",").concat(e);return r[a]={id:a,cells:[a]},r[a]}(t,e)}function i(t,e,i,h){var o=a(t,e),d=a(i,h);o.id!==d.id&&d.cells.forEach(function(t){o.cells.push(t),r[t]=o})}for(var h=0;h<t.height;h+=2){for(var o=0;o<t.width-2;o+=2)t.random()>.5&&(i(o,h,o+2,h),t.data[h*t.width+o+1]=1);if(h<t.height-2)for(var d={},n=0;n<t.width;n+=2){var c=a(n,h).id;!d[c]&&t.random()>.5&&(i(n,h,n,h+2),t.data[(h+1)*t.width+n]=1,d[c]=!0)}}for(var l=0;l<t.width-2;l+=2)a(l,t.height-1).id!==a(l+2,t.height-1).id&&(i(l,t.height-1,l+2,t.height-1),t.data[(t.height-1)*t.width+l+1]=1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateEllersAlgorithmMap;

},{}],17:[function(require,module,exports){
"use strict";function _slicedToArray(r,t){return _arrayWithHoles(r)||_iterableToArrayLimit(r,t)||_unsupportedIterableToArray(r,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=r[e];return a}function _iterableToArrayLimit(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var a,o,n,i,l=[],u=!0,f=!1;try{if(n=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;u=!1}else for(;!(u=(a=n.call(e)).done)&&(l.push(a.value),l.length!==t);u=!0);}catch(r){f=!0,o=r}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(f)throw o}}return l}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function generateGrowingTreeAlgorithmMap(r,t){var e=1;r.data.fill(0);for(var a=[[Math.floor(r.random()*r.width),Math.floor(r.random()*r.height)]],o=function(){var t,o,n,i,l=_slicedToArray(a[a.length-1],2),u=l[0],f=l[1],h=[];if([[0,-2],[0,2],[2,0],[-2,0]].forEach(function(t){var e=_slicedToArray(t,2),a=e[0],o=e[1],n=u+a,i=f+o;n>=0&&n<r.width&&i>=0&&i<r.height&&0===r.data[i*r.width+n]&&h.push([n,i])}),h.length>0){var y=Math.floor(r.random()*h.length),c=_slicedToArray(h[y],2),d=c[0],s=c[1];t=u,o=f,n=d,i=s,r.data[o*r.width+t]=e,r.data[Math.floor((o+i)/2)*r.width+Math.floor((t+n)/2)]=e,r.data[i*r.width+n]=e,a.push([d,s])}else a.pop()};a.length>0;)o()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateGrowingTreeAlgorithmMap;

},{}],18:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ALGORITHM_METROIDVANIA;var _roomGeneration=require("../util/roomGeneration.js"),_tileBuilder=require("../util/tileBuilder.js"),_platformGenerator=require("../util/platformGenerator.js");function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,_toPropertyKey(e.key),e)}}function _createClass(t,o,r){return o&&_defineProperties(t.prototype,o),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var o=_toPrimitive(t,"string");return"symbol"===_typeof(o)?o:String(o)}function _toPrimitive(t,o){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,o||"default");if("object"!==_typeof(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}var TILE=_tileBuilder.defaultTileMap,Metroidvania=function(){function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.options=o}return _createClass(t,[{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t=((arguments.length>1?arguments[1]:void 0)||this.build()).map,o="",r=0;r<t.length;r++){for(var e="",i=0;i<t[r].length;i++)t[r][i].edges.e||t[r][i].edges.w||t[r][i].edges.n||t[r][i].edges.s?e+="#":e+=" ";o+=e+"\n"}return o}},{key:"build",value:function(t){this.random=t;var o=(0,_platformGenerator.platformGenerator)(this.options,t),r=new _tileBuilder.Grid,e=this.options.roomWidth||10,i=this.options.roomHeight||10;r.fill(TILE.VOID,this.options.gridWidth,this.options.gridHeight);for(var n=0;n<o.rooms.length;n++)for(var a=0;a<o.rooms[n].length;a++){var s=o.rooms[n][a],l=o.map[s.y][s.x],h=(0,_roomGeneration.buildRoom)(l,this.options.roomHeight,this.options.roomWidth);r.overlay(h,s.x*this.options.roomHeight,s.y*this.options.roomWidth)}return o.world=r.grid,this.scale(o,e,i),o}},{key:"scale",value:function(t,o,r){var e=this;t.scaledExits={};var i=null,n=function(t){return t+Math.floor(e.options.roomWidth/2)},a=function(t){return t+Math.floor(e.options.roomHeight/2)},s=function(t){return t*e.options.roomHeight};["north","south","east","west"].forEach(function(o){i=o[0];var r={x:t.exits[i].x*e.options.roomWidth,y:t.exits[i].y*e.options.roomHeight};switch(t.scaledExits[o]=[],o){case"north":r.x=n(r.x),t.scaledExits[o].push(r),t.scaledExits[o].push({x:r.x-1,y:r.y});break;case"south":r.x=n(r.x),r.y+=e.options.roomHeight-1,t.scaledExits[o].push(r),t.scaledExits[o].push({x:r.x-1,y:r.y});break;case"east":r.y=a(r.y),r.x+=e.options.roomWidth-1,t.scaledExits[o].push(r),t.scaledExits[o].push({x:r.x,y:r.y-1});break;case"west":r.y=a(r.y),t.scaledExits[o].push(r),t.scaledExits[o].push({x:r.x,y:r.y-1})}}),t.scaledRooms=t.rooms.map(function(t){return t.map(function(t){var o,r=t.x,i=t.y;return{x:(o=r,o*e.options.roomWidth),y:s(i)}})})}}]),t}();function ALGORITHM_METROIDVANIA(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.fill(0);var r=Math.max(t.width,t.height);if(!(r<=5)){var e=Math.sqrt(r);e%2!=1&&e++;for(var i=r<10?Math.floor(r/2):10,n=r<10?1:2,a=Math.floor(t.width/i),s=Math.floor(t.height/i),l=Math.floor(t.width/a),h=Math.floor(t.height/s),u=Math.floor(l*h*.8),f=Math.floor(.25*u),d=new Metroidvania({roomWidth:s,roomHeight:a,maxFails:25e3,width:l,height:h,gridHeight:t.height,gridWidth:t.width,minZonesPerRoom:1,maxZonesPerRoom:3,minRoomsPerMap:f,maxRoomsPerMap:u,newDoors:n,roomDiff:n,roomDiffOdds:.5}),c=null,p=o.retries||4,m=0;m<p;m++)try{c=d.build(function(){return t.random()});break}catch(t){if(m===p-1)throw t}if(!c||!c.world)throw new Error("Failed to build world");var y=c.world.reduce(function(t,o){return t.concat(o)},[]);t.world=c;for(var v=0;v<t.data.length;v++)t.data[v]=y[v]}}

},{"../util/platformGenerator.js":31,"../util/roomGeneration.js":32,"../util/tileBuilder.js":33}],19:[function(require,module,exports){
"use strict";function _slicedToArray(r,t){return _arrayWithHoles(r)||_iterableToArrayLimit(r,t)||_unsupportedIterableToArray(r,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function _iterableToArrayLimit(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,a,o,i,l=[],u=!0,h=!1;try{if(o=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=o.call(e)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(r){h=!0,a=r}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(h)throw a}}return l}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function generateMap(r,t){var e=[],n=Array.from({length:r.height},function(){return Array(r.width).fill(!1)}),a=function(t,e){var a=[];return t>0&&!n[e][t-1]&&a.push([t-1,e]),e>0&&!n[e-1][t]&&a.push([t,e-1]),t<r.width-1&&!n[e][t+1]&&a.push([t+1,e]),e<r.height-1&&!n[e+1][t]&&a.push([t,e+1]),a},o=function(t,e,n,a){var o=e*r.width+t,i=a*r.width+n;r.data[Math.min(o,i)]=0};!function(t,i){for(n[i][t]=!0,e.push([t,i]);e.length>0;){var l=_slicedToArray(e[e.length-1],2),u=l[0],h=l[1],f=a(u,h);if(f.length>0){var y=_slicedToArray(f[Math.floor(r.random(f.length))],2),s=y[0],c=y[1];o(u,h,s,c),n[c][s]=!0,e.push([s,c])}else e.pop()}}(Math.floor(r.random(r.width)),Math.floor(r.random(r.height)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateMap;

},{}],20:[function(require,module,exports){
"use strict";function generateRecursiveDivisionMap(e,o){e.data.fill(1);!function o(r,a,t,i){if(!(t-r<2||i-a<2)){for(var n=t-r<i-a,f=n?r:Math.floor(e.random(t-r-2))+r+1,d=n?Math.floor(e.random(i-a-2))+a+1:a,l=n?Math.floor(e.random(t-r))+r:f,s=n?d:Math.floor(e.random(i-a))+a,h=r;h<t;h++)for(var u=a;u<i;u++)(n&&h===f&&u!==s||!n&&u===d&&h!==l)&&(e.data[u*e.width+h]=0);n?(o(r,a,t,d),o(r,d,t,i)):(o(r,a,f,i),o(f,a,t,i))}}(0,0,e.width,e.height)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateRecursiveDivisionMap;

},{}],21:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,o){for(var i=0;i<o.length;i++){var r=o[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,o,i){return o&&_defineProperties(t.prototype,o),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var o=_toPrimitive(t,"string");return"symbol"===_typeof(o)?o:String(o)}function _toPrimitive(t,o){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,o||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ALGORITHM_THOMAS_HUNTER;var TILE={VOID:0,FLOOR:1,WALL:2,DOOR:3,SPECIAL_DOOR:4,ENTER:5,EXIT:6},DEFAULT={WIDTH:21,HEIGHT:21,MIN_ROOM_WIDTH:3,MAX_ROOM_WIDTH:7,MIN_ROOM_HEIGHT:3,MAX_ROOM_HEIGHT:7,IDEAL_COUNT:10,RETRY_COUNT:100},ROOM_GAP=1,Roguelike=function(){function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),o||(o={}),o.room||(o.room={}),this.max_width=o.width||DEFAULT.WIDTH,this.max_height=o.height||DEFAULT.HEIGHT,this.room_min_width=o.room.min_width||DEFAULT.MIN_ROOM_WIDTH,this.room_max_width=o.room.max_width||DEFAULT.MAX_ROOM_WIDTH,this.room_min_height=o.room.min_height||DEFAULT.MIN_ROOM_HEIGHT,this.room_max_height=o.room.max_height||DEFAULT.MAX_ROOM_HEIGHT,this.room_ideal_count=o.room.ideal||DEFAULT.IDEAL_COUNT,this.retry_count=o.retry||DEFAULT.IDEAL_COUNT,this.want_special=!!o.special}return _createClass(t,[{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t=((arguments.length>1?arguments[1]:void 0)||this.build()).world,o="",i=0;i<t.length;i++){for(var r="",e=0;e<t[i].length;e++){var h=t[i][e];r+=0===h?" ":1===h?".":2===h?"#":3===h?"/":4===h?"X":5===h?"<":6===h?">":t[i][e]}o+=r+"\n"}return o}},{key:"build",value:function(t){return this.random=t||function(){return Math.random()},this.world=null,this.rooms={},this.doors={},this.walls=[],this.enter=null,this.exit=null,this.special=null,this.deadends=[],this.room_id=0,this.door_id=0,this.createVoid(),this.addStarterRoom(),this.generateRooms(),this.addSpecialRooms(),this.buildWalls(),{width:this.max_width,height:this.max_height,enter:this.enter,exit:this.exit,deadends:this.deadends,special:this.special,door_count:this.door_id,doors:this.doors,room_count:this.room_id,rooms:this.rooms,walls:this.walls,world:this.world}}},{key:"createVoid",value:function(){for(var t=[],o=0;o<this.max_height;o++){t[o]=[];for(var i=0;i<this.max_width;i++)t[o][i]=TILE.VOID}this.world=t}},{key:"addStarterRoom",value:function(){var t=this.getRoomDimensions(),o=ROOM_GAP,i=this.max_width-(t.width+2*ROOM_GAP)+ROOM_GAP,r=ROOM_GAP,e=this.max_height-(t.height+2*ROOM_GAP)+ROOM_GAP,h=this.randomOdd(o,i),s=this.randomOdd(r,e);this.addRoom(h,s,t.width,t.height)}},{key:"getRoomDimensions",value:function(){return{width:this.randomOdd(this.room_min_width,this.room_max_width),height:this.randomOdd(this.room_min_height,this.room_max_height)}}},{key:"addRoom",value:function(t,o,i,r){var e=this.room_id++;this.rooms[e]={left:t,top:o,width:i,height:r,id:e,walls:[],neighbors:[],doors:[]};for(var h=o;h<o+r;h++)for(var s=t;s<t+i;s++)this.world[h][s]=TILE.FLOOR;return e}},{key:"addFloor",value:function(t,o){this.world[o][t]=TILE.FLOOR}},{key:"generateRooms",value:function(){for(var t=this.retry_count;this.room_id<this.room_ideal_count&&(this.generateRoom()||!(--t<=0)););}},{key:"generateRoom",value:function(){var t,o,i=this.randomFn(0,3),r=1===i?1:3===i?-1:0,e=0===i?1:2===i?-1:0,h=this.getRoomDimensions();if(0===i?("south",t=ROOM_GAP,o=this.randomOdd(ROOM_GAP,this.max_width-h.width-2*ROOM_GAP)):1===i?("east",t=this.randomOdd(ROOM_GAP,this.max_height-h.height-2*ROOM_GAP),o=ROOM_GAP):2===i?("north",t=this.max_height-h.height-ROOM_GAP,o=this.randomOdd(ROOM_GAP,this.max_width-h.width-2*ROOM_GAP)):3===i&&("west",t=this.randomOdd(ROOM_GAP,this.max_height-h.height-2*ROOM_GAP),o=this.max_width-h.width-ROOM_GAP),!1!==this.collides(t,o,h.width,h.height))return!1;for(var s=null;!1===(s=this.collides(t+e,o+r,h.width,h.height));)if(t+=e,o+=r,this.invalid(t,o,h.width,h.height))return!1;var a=this.addRoom(o,t,h.width,h.height);return this.addDoorBetweenRooms(r,e,s,a),!0}},{key:"collides",value:function(t,o,i,r){for(var e=t,h=o,s=i,a=r,n=0;n<this.room_id;n++){var d=this.rooms[n];if(!(h>d.left+d.width||h+s<d.left||e>d.top+d.height||e+a<d.top))return d.id}return!1}},{key:"invalid",value:function(t,o,i,r){return t<=ROOM_GAP||(o<=ROOM_GAP||(t+r>=this.max_height-ROOM_GAP||o+i>=this.max_width-ROOM_GAP))}},{key:"buildWalls",value:function(){for(var t=this.rooms,o=0;o<this.room_id;o++){for(var i=t[o],r=i.left-1;r<i.left+i.width+1;r++)this.addWall(r,i.top-1,i);for(var e=i.top;e<i.top+i.height;e++)this.addWall(i.left+i.width,e,i);for(var h=i.left-1;h<i.left+i.width+1;h++)this.addWall(h,i.top+i.height,i);for(var s=i.top;s<i.top+i.height;s++)this.addWall(i.left-1,s,i)}}},{key:"addWall",value:function(t,o,i){this.world[o][t]===TILE.VOID&&(this.world[o][t]=TILE.WALL,this.walls.push([t,o])),this.world[o][t]!==TILE.VOID&&this.world[o][t]!==TILE.WALL||i.walls.push([t,o])}},{key:"addDoorBetweenRooms",value:function(t,o,i,r){var e,h,s,a=this.rooms[i],n=this.rooms[r];1===t?(e=a.left-1,h=this.randomFn(Math.max(a.top,n.top)+1,Math.min(a.top+a.height,n.top+n.height)-2),s="h"):-1===t?(e=n.left-1,h=this.randomFn(Math.max(n.top,a.top)+1,Math.min(n.top+n.height,a.top+a.height)-2),s="h"):-1===o?(e=this.randomFn(Math.max(a.left,n.left)+1,Math.min(a.left+a.width,n.left+n.width)-2),h=n.top-1,s="v"):1===o&&(e=this.randomFn(Math.max(n.left,a.left)+1,Math.min(n.left+n.width,a.left+a.width)-2),h=a.top-1,s="v"),this.addDoor(e,h,i,r,s),this.rooms[i].neighbors.push(r),this.rooms[r].neighbors.push(i)}},{key:"addSpecialRooms",value:function(){for(var t,o=[],i={id:null,area:1/0},r=0;r<this.room_id;r++)1===(t=this.rooms[r]).neighbors.length&&(this.rooms[r].deadend=!0,o.push(r),t.width*t.height<i.area&&(i.id=r));if(this.want_special&&o.length>=2){var e=o.indexOf(i.id);o.splice(e,1);var h=this.rooms[i.id].doors[0],s=i.id;this.special={room_id:s,door_id:h};var a=this.doors[h];a.special=!0,this.rooms[s].special=!0,this.world[a.y][a.x]=TILE.SPECIAL_DOOR}this.shuffle(o);var n=o.pop();if(void 0!==n){var d=this.randomNonEdgeInRoom(n);this.world[d.y][d.x]=TILE.ENTER,this.enter={x:d.x,y:d.y,room_id:n},this.rooms[n].enter=!0;var l=this.rooms[n].doors[0];this.doors[l].enter=!0;var m=o.pop();if(void 0!==m){var _=this.randomNonEdgeInRoom(m);this.world[_.y][_.x]=TILE.EXIT,this.exit={x:_.x,y:_.y,room_id:m},this.rooms[m].exit=!0;var u=this.rooms[m].doors[0];this.doors[u].exit=!0,this.deadends=o}}}},{key:"randomNonEdgeInRoom",value:function(t){var o=this.rooms[t];return{x:this.randomFn(o.left+1,o.left+o.width-2),y:this.randomFn(o.top+1,o.top+o.height-2)}}},{key:"addDoor",value:function(t,o,i,r,e){this.world[o][t]=TILE.DOOR;var h=this.door_id++;return this.doors[h]={x:t,y:o,id:h,orientation:e,rooms:[i,r]},this.rooms[i].doors.push(h),this.rooms[r].doors.push(h),h}},{key:"randomFn",value:function(t,o){var i=Math.floor(t),r=Math.floor(o);return Math.floor(this.random()*(r+1-i)+i)}},{key:"randomOdd",value:function(t,o){var i=Math.floor(t),r=Math.floor(o);i%2==0&&i++,r%2==0&&r--,i-=1,r-=1,i/=2,r/=2;var e=this.random(),h=Math.floor(e*(r+1-i)+i);return h*=2,h+=1}},{key:"shuffle",value:function(t){for(var o,i,r=t.length;r;o=Math.floor(this.random()*r),i=t[--r],t[r]=t[o],t[o]=i);}}]),t}();function ALGORITHM_THOMAS_HUNTER(t,o){if(t.fill(1),!(Math.max(t.width,t.height)<=5)){var i=Math.floor(Math.sqrt(Math.max(t.width,t.height)));i%2!=1&&i++;var r=Math.floor(t.width/i*t.width/i/2),e=Math.ceil(i/2),h=new Roguelike({width:t.width,height:t.height,retry:100,special:!0,room:{ideal:o.roomCount||r,min_width:o.roomMinWidth||i-e,max_width:o.roomMaxWidth||i+e,min_height:o.roomMinHeight||i-e,max_height:o.roomMinHeight||i+e}}).build(function(){return t.random()}),s=h.world.reduce(function(t,o){return t.concat(o)},[]);h.world=null,t.world=h;for(var a=0;a<t.data.length;a++)t.data[a]=s[a]}}

},{}],22:[function(require,module,exports){
"use strict";function SHAPE_CIRCLE(t,e){t.fill(1);for(var h=Math.min(t.width,t.height)/2,i=t.width/2,a=t.height/2,o=0;o<t.height;o++)for(var r=0;r<t.width;r++)Math.pow(r-i,2)+Math.pow(o-a,2)<=Math.pow(h,2)&&(t.data[o*t.width+r]=0)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=SHAPE_CIRCLE;

},{}],23:[function(require,module,exports){
"use strict";function SHAPE_SQUARE(t,e){t.fill(0);for(var o=Math.min(t.width,t.height),r=Math.floor((t.width-o)/2),h=Math.floor((t.height-o)/2),i=h;i<h+o;i++)for(var a=r;a<r+o;a++)t.data[i*t.width+a]=1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=SHAPE_SQUARE;

},{}],24:[function(require,module,exports){
"use strict";function SHAPE_TRIANGLE(e,t){e.fill(0);for(var r=e.height,o=e.width,a=0;a<r;a++)for(var f=0;f<=a;f++)e.data[a*o+f]=1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=SHAPE_TRIANGLE;

},{}],25:[function(require,module,exports){
"use strict";function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function generateFaultLineMap(r,e){for(var t=e.iterations||100,a=e.heightIncrease||.01,o=new Array(r.width*r.height).fill(0),n=0;n<t;n++)for(var i=r.random()-.5,l=r.random()-.5,u=r.random(),y=0;y<r.height;y++)for(var p=0;p<r.width;p++)i*p+l*y-u>0&&(o[y*r.width+p]+=a);applyHeightToTileMap(r,o)}function applyHeightToTileMap(r,e){for(var t=Math.max.apply(Math,_toConsumableArray(e)),a=Math.min.apply(Math,_toConsumableArray(e)),o=0;o<e.length;o++){var n=(e[o]-a)/(t-a);r.data[o]=n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateFaultLineMap;

},{}],26:[function(require,module,exports){
"use strict";function generatePerlinNoiseMap(e,r){for(var t=r.scale||.1,a=0;a<e.height;a++)for(var i=0;i<e.width;i++){var o=e.noise(i*t,a*t);e.data[a*e.width+i]=o}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generatePerlinNoiseMap;

},{}],27:[function(require,module,exports){
"use strict";function MersenneTwister19937(){var n,r,t;n=624,r=397,t=2147483648;var e=new Array(n),i=625;function a(n){return n<0?(n^t)+t:n}function s(n,r){return a(n+r&4294967295)}function u(n,r){for(var t=0,e=0;e<32;++e)n>>>e&1&&(t=s(t,a(r<<e)));return t}this.init_genrand=function(r){for(e[0]=a(4294967295&r),i=1;i<n;i++)e[i]=s(u(1812433253,a(e[i-1]^e[i-1]>>>30)),i),e[i]=a(4294967295&e[i])},this.init_by_array=function(r,t){var i,o,f,d,_;for(this.init_genrand(19650218),i=1,o=0,f=n>t?n:t;f;f--)e[i]=s(s(a(e[i]^u(a(e[i-1]^e[i-1]>>>30),1664525)),r[o]),o),e[i]=a(4294967295&e[i]),o++,++i>=n&&(e[0]=e[623],i=1),o>=t&&(o=0);for(f=623;f;f--)e[i]=(d=a((dbg=e[i])^u(a(e[i-1]^e[i-1]>>>30),1566083941)))<(_=i)?a(4294967296-(_-d)&4294967295):d-_,e[i]=a(4294967295&e[i]),++i>=n&&(e[0]=e[623],i=1);e[0]=2147483648};var o=[0,2567483615];this.genrand_int32=function(){var s;if(i>=n){var u;for(625==i&&this.init_genrand(5489),u=0;u<227;u++)s=a(e[u]&t|2147483647&e[u+1]),e[u]=a(e[u+r]^s>>>1^o[1&s]);for(;u<623;u++)s=a(e[u]&t|2147483647&e[u+1]),e[u]=a(e[u+(r-n)]^s>>>1^o[1&s]);s=a(e[623]&t|2147483647&e[0]),e[623]=a(e[396]^s>>>1^o[1&s]),i=0}return s=a((s=e[i++])^s>>>11),s=a(s^s<<7&2636928640),s=a(s^s<<15&4022730752),s=a(s^s>>>18)},this.genrand_int31=function(){return this.genrand_int32()>>>1},this.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},this.genrand_real2=function(){return this.genrand_int32()*(1/4294967296)},this.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},this.genrand_res53=function(){return(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))*(1/9007199254740992)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=exports.default=MersenneTwister19937;

},{}],28:[function(require,module,exports){
"use strict";function generateTiledJSON(e){var i=[];if(void 0!==e.data[0][0])for(var t=e.data.length,a=0;a<t;a++)i.push({data:e.data[a].flat(),height:e.height,id:a+1,name:"Tile Layer ".concat(a+1),opacity:1,type:"tilelayer",visible:!0,width:e.width,x:0,y:0,parallaxoriginy:a/t});else i.push({data:e.data,height:e.height,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:e.width,x:0,y:0});var h={compressionlevel:-1,height:e.height,infinite:!1,layers:i,nextlayerid:i.length+1,nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.10.2",tileheight:16,tilesets:[{columns:0,firstgid:1,grid:{height:1,orientation:"orthogonal",width:1},margin:0,name:"grass-land",spacing:0,tilecount:2,tileheight:16,tiles:[],tilewidth:16}],tilewidth:16,type:"map",version:"1.10",width:e.width};return h.tilesets[0].tiles=[{id:0,image:"tile-bush.png",imageheight:16,imagewidth:16},{id:1,image:"tile-grass.png",imageheight:16,imagewidth:16},{id:2,image:"tile-block.png",imageheight:16,imagewidth:16},{id:3,image:"tile-path-brown.png",imageheight:16,imagewidth:16},{id:4,image:"tile-path-green.png",imageheight:16,imagewidth:16}],h}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateTiledJSON;

},{}],29:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _MersenneTwister=_interopRequireDefault(require("./MersenneTwister19937.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mersenne(){var e=new _MersenneTwister.default,t=(new Date).getTime()%1e9;this.currentSeed=t,e.init_genrand(t),this.rand=function(t,r){return void 0===t?e.genrand_real2():(void 0===r&&(r=0),Math.floor(e.genrand_real2()*(t-r)+r))},this.seed=function(t){var r=Number(t);if(isNaN(r)&&(r=this.stringToSeed(t)),"number"!=typeof r)throw new Error("seed(S) must take numeric argument; is "+_typeof(t));this.currentSeed=r,e.init_genrand(r)},this.seed_array=function(t){if("object"!=_typeof(t))throw new Error("seed_array(A) must take array of numbers; is "+_typeof(t));this.currentSeed=t,e.init_by_array(t,t.length)},this.stringToSeed=function(e){for(var t=0,r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}}var _default=exports.default=Mersenne;

},{"./MersenneTwister19937.js":27}],30:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var perlin,p5=function(){},PERLIN_YWRAPB=4,PERLIN_YWRAP=1<<PERLIN_YWRAPB,PERLIN_ZWRAPB=8,PERLIN_ZWRAP=1<<PERLIN_ZWRAPB,PERLIN_SIZE=4095,perlin_octaves=4,perlin_amp_falloff=.5,scaled_cosine=function(e){return.5*(1-Math.cos(e*Math.PI))};p5.prototype.noise=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null==perlin){perlin=new Array(PERLIN_SIZE+1);for(var o=0;o<PERLIN_SIZE+1;o++)perlin[o]=Math.random()}e<0&&(e=-e),n<0&&(n=-n),r<0&&(r=-r);for(var t,l,i,_,P,a=Math.floor(e),I=Math.floor(n),E=Math.floor(r),R=e-a,p=n-I,f=r-E,L=0,N=.5,c=0;c<perlin_octaves;c++){var s=a+(I<<PERLIN_YWRAPB)+(E<<PERLIN_ZWRAPB);t=scaled_cosine(R),l=scaled_cosine(p),i=perlin[s&PERLIN_SIZE],i+=t*(perlin[s+1&PERLIN_SIZE]-i),_=perlin[s+PERLIN_YWRAP&PERLIN_SIZE],i+=l*((_+=t*(perlin[s+PERLIN_YWRAP+1&PERLIN_SIZE]-_))-i),_=perlin[(s+=PERLIN_ZWRAP)&PERLIN_SIZE],_+=t*(perlin[s+1&PERLIN_SIZE]-_),P=perlin[s+PERLIN_YWRAP&PERLIN_SIZE],_+=l*((P+=t*(perlin[s+PERLIN_YWRAP+1&PERLIN_SIZE]-P))-_),L+=(i+=scaled_cosine(f)*(_-i))*N,N*=perlin_amp_falloff,a<<=1,I<<=1,E<<=1,(R*=2)>=1&&(a++,R--),(p*=2)>=1&&(I++,p--),(f*=2)>=1&&(E++,f--)}return L},p5.prototype.noiseDetail=function(e,n){e>0&&(perlin_octaves=e),n>0&&(perlin_amp_falloff=n)},p5.prototype.noiseSeed=function(e){var n=function(){var e,n,r=4294967296;return{setSeed:function(o){n=e=(null==o?Math.random()*r:o)>>>0},getSeed:function(){return e},rand:function(){return(n=(1664525*n+1013904223)%r)/r}}}();n.setSeed(e),perlin=new Array(PERLIN_SIZE+1);for(var r=0;r<PERLIN_SIZE+1;r++)perlin[r]=n.rand()};var _default=exports.default=p5;

},{}],31:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.platformGenerator=void 0;var _roomGeneration=require("./roomGeneration.js"),_tileBuilder=require("./tileBuilder.js");function _createForOfIteratorHelper(e,r){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,n=new Array(r);o<r;o++)n[o]=e[o];return n}var platformGenerator=exports.platformGenerator=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=e.width||20,n=e.height||20,t=e.minZonesPerRoom||1,a=e.maxZonesPerRoom||4,i=e.minRoomsPerMap||10,l=e.maxRoomsPerMap||20,u=e.newDoors||3,y=e.roomDiff||3,f=e.roomDiffOdds||.2,s=0,x=null;!x;)x=d(initialize(o,n));return x;function d(x){for(var d=rangedRandom(i,l,r),p={x:Math.floor(o/2),y:Math.floor(o/2)},v={n:{x:p.x,y:p.y},s:{x:p.x,y:p.y},e:{x:p.x,y:p.y},w:{x:p.x,y:p.y}},g=0,_=[],w=0;w<d;w++){for(var b=rangedRandom(t,a,r),B=[],O=0;O<b;O++){if(!p)return null;var M=x[p.y][p.x];if(B.push({x:p.x,y:p.y}),M.open=!0,M.room=w,M.zone=g,g++,p.x<=v.w.x&&(v.w=p),p.x>=v.e.x&&(v.e=p),p.y<=v.n.y&&(v.n=p),p.y>=v.s.y&&(v.s=p),!(p=c(x,p,r))){if(s++,e.maxFails&&s>e.maxFails)throw new Error("Failed too many times to generate this configuration");return!1}}for(var A=0,D=B;A<D.length;A++){h(x,D[A])}_[w]=B,w!=d-1&&(p=m(x,B,r))}for(var F=0,I=0,R=_;I<R.length;I++){var L,E=_createForOfIteratorHelper(R[I]);try{for(E.s();!(L=E.n()).done;){var G=L.value;if(!(0===G.x||0===G.y||G.x>=o-1||G.y>=n-1)){var P=x[G.y][G.x].room,T=null;(T=x[G.y+1][G.x]).open&&Math.abs(T.room-P)>y&&Math.random()<=f&&((0,_roomGeneration.buildDoorBetweenZones)(x,G,{x:G.x,y:G.y+1}),F++),(T=x[G.y-1][G.x]).open&&Math.abs(T.room-P)>y&&Math.random()<=f&&((0,_roomGeneration.buildDoorBetweenZones)(x,G,{x:G.x,y:G.y-1}),F++),(T=x[G.y][G.x-1]).open&&Math.abs(T.room-P)>y&&Math.random()<=f&&((0,_roomGeneration.buildDoorBetweenZones)(x,G,{x:G.x-1,y:G.y}),F++),(T=x[G.y][G.x+1]).open&&Math.abs(T.room-P)>y&&Math.random()<=f&&((0,_roomGeneration.buildDoorBetweenZones)(x,G,{x:G.x+1,y:G.y}),F++)}}}catch(e){E.e(e)}finally{E.f()}}if(F<u){if(s++,e.maxFails&&s>e.maxFails)throw new Error("Failed too many times to generate this configuration");return!1}var Z,j=_createForOfIteratorHelper(_tileBuilder.DIRECTIONS);try{for(j.s();!(Z=j.n()).done;){var S=Z.value;x[v[S].y][v[S].x].edges[S]=_tileBuilder.EXIT,x[v[S].y][v[S].x].exit=!0}}catch(e){j.e(e)}finally{j.f()}return{map:x,exits:v,failCount:s,rooms:_}}function m(e,r,o){var n,t=_createForOfIteratorHelper(r=shuffle(r,o));try{for(t.s();!(n=t.n()).done;){var a=n.value,i=c(e,a,o);if(i)return(0,_roomGeneration.buildDoorBetweenZones)(e,a,i),i}}catch(e){t.e(e)}finally{t.f()}return!1}function c(r,t,a){for(var i=shuffle([{d:"n",x:0,y:1},{d:"e",x:1,y:0},{d:"s",x:0,y:-1},{d:"w",x:-1,y:0}],a),l=null,u=null;l=i.pop();){if((u={x:t.x+l.x,y:t.y+l.y}).x<0||u.y<0||u.x>=o||u.y>=n){if(s++,e.maxFails&&s>e.maxFails)throw new Error("Failed too many times to generate this configuration");return null}if(!r[u.y][u.x].open)return u}return!1}function h(e,r){var t=e[r.y][r.x].room;e[r.y][r.x].edges.n!=_tileBuilder.DOOR&&(0!==r.y&&e[r.y-1][r.x].open&&e[r.y-1][r.x].room==t?e[r.y][r.x].edges.n=_tileBuilder.OPEN:e[r.y][r.x].edges.n=_tileBuilder.WALL),e[r.y][r.x].edges.e!=_tileBuilder.DOOR&&(r.x>=o-1||!e[r.y][r.x+1].open||e[r.y][r.x+1].room!=t?e[r.y][r.x].edges.e=_tileBuilder.WALL:e[r.y][r.x].edges.e=_tileBuilder.OPEN),e[r.y][r.x].edges.s!=_tileBuilder.DOOR&&(r.y>=n-1||!e[r.y+1][r.x].open||e[r.y+1][r.x].room!=t?e[r.y][r.x].edges.s=_tileBuilder.WALL:e[r.y][r.x].edges.s=_tileBuilder.OPEN),e[r.y][r.x].edges.w!=_tileBuilder.DOOR&&(0!==r.x&&e[r.y][r.x-1].open&&e[r.y][r.x-1].room==t?e[r.y][r.x].edges.w=_tileBuilder.OPEN:e[r.y][r.x].edges.w=_tileBuilder.WALL)}};function rangedRandom(e,r,o){return Math.floor(o()*(r+1-e)+e)}function shuffle(e,r){var o,n,t,a=e.slice(),i=a.length;if(0==i)return!1;for(;--i;)o=Math.floor(r()*(i+1)),n=a[i],t=a[o],a[i]=t,a[o]=n;return a}function initialize(e,r){for(var o=[],n=0;n<r;n++){o[n]=[];for(var t=0;t<e;t++)o[n][t]={open:!1,room:null,exit:null,zone:null,edges:{n:null,e:null,s:null,w:null}}}return o}

},{"./roomGeneration.js":32,"./tileBuilder.js":33}],32:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inDoorRange=exports.buildRoom=exports.buildDoorBetweenZones=void 0;var _tileBuilder=require("../util/tileBuilder.js"),TILE=_tileBuilder.defaultTileMap,inDoorRange=exports.inDoorRange=function(e,o,s){var d=Math.floor(o/2),r=!!(o%2),i=Math.floor(s/2);return r?!(e!==d||!s)||(e<d?e>d-i:e<d+i):e<=d?e>=d-i:e<d+i},buildRoom=exports.buildRoom=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,d=[],r=0;r<s;r++){for(var i=[],u=0;u<o;u++)0===u||u===o-1?0===u?"open"===e.edges.w?0===r||r===s-1?i.push(TILE.WALL):i.push(TILE.FLOOR):"door"!==e.edges.w&&"exit"!==e.edges.w||!inDoorRange(r,s,2)?i.push(TILE.WALL):"door"===e.edges.w?i.push(TILE.DOOR):i.push(TILE.EXIT):"open"===e.edges.e?0===r||r===s-1?i.push(TILE.WALL):i.push(TILE.FLOOR):"door"!==e.edges.e&&"exit"!==e.edges.e||!inDoorRange(r,s,2)?i.push(TILE.WALL):"door"===e.edges.e?i.push(TILE.DOOR):i.push(TILE.EXIT):0===r||r===s-1?0===r?"open"===e.edges.n?i.push(TILE.FLOOR):"door"!==e.edges.n&&"exit"!==e.edges.n||!inDoorRange(u,o,2)?i.push(TILE.WALL):"door"===e.edges.n?i.push(TILE.DOOR):i.push(TILE.EXIT):"open"===e.edges.s?i.push(TILE.FLOOR):"door"!==e.edges.s&&"exit"!==e.edges.s||!inDoorRange(u,o,2)?i.push(TILE.WALL):"door"===e.edges.s?i.push(TILE.DOOR):i.push(TILE.EXIT):i.push(TILE.FLOOR);d.push(i)}return d},buildDoorBetweenZones=exports.buildDoorBetweenZones=function(e,o,s){var d=e[o.y][o.x],r=e[s.y][s.x];o.x==s.x&&o.y>s.y?(d.edges.n=_tileBuilder.DOOR,r.edges.s=_tileBuilder.DOOR):o.x==s.x&&o.y<s.y?(d.edges.s=_tileBuilder.DOOR,r.edges.n=_tileBuilder.DOOR):o.y==s.y&&o.x>s.x?(d.edges.w=_tileBuilder.DOOR,r.edges.e=_tileBuilder.DOOR):o.y==s.y&&o.x<s.x?(d.edges.e=_tileBuilder.DOOR,r.edges.w=_tileBuilder.DOOR):console.log("BUILD DOOR FAILURE",d,r)};

},{"../util/tileBuilder.js":33}],33:[function(require,module,exports){
"use strict";function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function _classCallCheck(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,_toPropertyKey(o.key),o)}}function _createClass(r,t,e){return t&&_defineProperties(r.prototype,t),e&&_defineProperties(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function _toPropertyKey(r){var t=_toPrimitive(r,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(r,t){if("object"!==_typeof(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var o=e.call(r,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toCharGrid=exports.defaultTileMap=exports.WALL=exports.OPEN=exports.Grid=exports.EXIT=exports.DOOR=exports.DIRECTIONS=void 0;var defaultTileMap=exports.defaultTileMap={VOID:0,WALL:1,FLOOR:2,DOOR:3,SPECIAL_DOOR:4,ENTER:5,EXIT:6},WALL=exports.WALL="wall",DOOR=exports.DOOR="door",OPEN=exports.OPEN="open",EXIT=exports.EXIT="exit",DIRECTIONS=exports.DIRECTIONS=["n","e","s","w"],toCharGrid=exports.toCharGrid=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("\n").map(function(r){return r.split("")})},Grid=exports.Grid=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";_classCallCheck(this,r),this.grid=toCharGrid(t)}return _createClass(r,[{key:"overlay",value:function(r,t,e){for(var o=Array.isArray(r)?r:toCharGrid(r),i=0;i<o.length;i++)for(var n=0;n<o[i].length;n++)this.grid[e+i]||(this.grid[e+i]=[]),this.grid[e+i][t+n]=o[i][n]}},{key:"fill",value:function(r,t,e){for(var o=0;o<e;o++){this.grid[o]=[];for(var i=0;i<t;i++)this.grid[o][i]=r}}},{key:"toString",value:function(r){return(r||this.grid).map(function(r){return r.join("")}).join("\n")}}]),r}();

},{}],34:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _labyrinthos=_interopRequireDefault(require("../../../../Labyrinthos.js/lib/labyrinthos.js")),_defaultOrthogonalMap=_interopRequireDefault(require("./maps/defaultOrthogonalMap.js")),_getChunkFiles=_interopRequireDefault(require("./lib/getChunkFiles.js")),_loadChunk=_interopRequireDefault(require("./lib/loadChunk.js")),_loadTilesForArea=_interopRequireDefault(require("./lib/loadTilesForArea.js")),_handleChunkLoadFailure=_interopRequireDefault(require("./lib/handleChunkLoadFailure.js")),_calculateTilePosition=_interopRequireDefault(require("./lib/calculateTilePosition.js")),_createTile=_interopRequireDefault(require("./lib/createTile.js")),_createTileMap=_interopRequireDefault(require("./lib/createTileMap.js")),_createTileMapFromTiledJSON=_interopRequireDefault(require("./lib/createTileMapFromTiledJSON.js")),_createLayer=_interopRequireDefault(require("./lib/createLayer.js")),_processTile=_interopRequireDefault(require("./lib/processTile.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,i,t){return(i=_toPropertyKey(i))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function _toPropertyKey(e){var i=_toPrimitive(e,"string");return"symbol"===_typeof(i)?i:String(i)}function _toPrimitive(e,i){if("object"!==_typeof(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,i||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}var exitConfig={position:{x:0,y:0,z:0},exitHandler:function(e,i){var t=this;for(var a in t.data.ents.TILE.forEach(function(e){t.removeEntity(e.id)}),t.data.ents.BLOCK&&t.data.ents.BLOCK.forEach(function(e){t.removeEntity(e.id)}),t.deferredEntities){"TILE"===t.deferredEntities[a.toString()].type&&delete t.deferredEntities[a.toString()]}t.setPosition(e.id,{x:i.exit.position.x,y:i.exit.position.y});var r=Math.floor(1e11*Math.random());t.systems.tile.tileMap.seed=r,t.systems.tile.createTileMap(t.systems.tile.tileMap)}},defaultTileSet=[{id:0,kind:"empty"},{id:1,kind:"bush",texture:"tile-bush",body:!0,isStatic:!0,customZ:!0,z:16},{id:2,kind:"grass"},{id:3,kind:"block",type:"BLOCK",body:!0,z:16},{id:4,kind:"path-green"},{id:5,kind:"entrance",texture:"tile-entrance"},{id:6,kind:"exit",texture:"tile-exit",body:!0,isStatic:!0,isSensor:!0,exit:exitConfig}],Tile=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.tileMap,a=void 0===t?null:t,r=i.tiledMap,l=void 0===r?_defaultOrthogonalMap.default:r,s=i.tiledServer,n=void 0!==s&&s,o=i.tileSet,u=void 0===o?defaultTileSet:o,h=i.chunkUnitSize,d=void 0===h?8:h,f=i.tileSize,c=void 0===f?16:f,p=i.labyrinthosAlgo,y=void 0===p?"AldousBroder":p,_=i.proceduralGenerateMissingChunks,b=void 0!==_&&_,m=i.loadInitialChunk,T=void 0===m||m,v=i.loadDefaultTileMap,g=void 0!==v&&v,k=i.loadTileMap,S=void 0!==k&&k;for(var M in _classCallCheck(this,e),this.id=e.id,this.labyrinthos=_labyrinthos.default,this.TileMap=_labyrinthos.default.TileMap,this.TileSet=_labyrinthos.default.TileSet,this.Biome=_labyrinthos.default.Biome,this.terrains=_labyrinthos.default.terrains,this.mazes=_labyrinthos.default.mazes,this.shapes=_labyrinthos.default.shapes,this.debug=!1,this.allTransformers={},_labyrinthos.default.mazes)this.allTransformers[M]=_labyrinthos.default.mazes[M];for(var C in _labyrinthos.default.terrains)this.allTransformers[C]=_labyrinthos.default.terrains[C];for(var x in _labyrinthos.default.shapes)this.allTransformers[x]=_labyrinthos.default.shapes[x];this.tiledMap=l,this.tileMap=a,this.labyrinthosAlgoName=y,this.labyType="maze",this.labyrinthosAlgo=_labyrinthos.default.mazes[y],void 0===this.labyrinthosAlgo&&(this.labyrinthosAlgo=_labyrinthos.default.terrains[y],this.labyType="terrain"),void 0===this.labyrinthosAlgo&&(this.labyrinthosAlgo=_labyrinthos.default.shapes[y],this.labyType="shape"),void 0===this.labyrinthosAlgo&&console.log("Warning: no labyrinthos algo found for",y),this.tileSet=u,this.tileSets={default:u},this.chunkUnitSize=d,this.tileSize=c,this.chunkPixelSize=this.chunkUnitSize*this.tileSize,this.loadingStates={},this.maxRetries=3,this.tiledServer=n,this.loadDefaultTileMap=g,this.loadTileMap=S,this.lazyLoadTiles=!1,this.loadInitialChunk=T,this.proceduralGenerateMissingChunks=b,this.createTile=_createTile.default.bind(this),this.createTileMap=_createTileMap.default.bind(this),this.createTileMapFromTiledJSON=_createTileMapFromTiledJSON.default.bind(this),this.loadChunk=_loadChunk.default.bind(this),this.getChunkFiles=_getChunkFiles.default.bind(this),this.handleChunkLoadFailure=_handleChunkLoadFailure.default.bind(this),this.calculateTilePosition=_calculateTilePosition.default.bind(this),this.loadTilesForArea=_loadTilesForArea.default.bind(this),this.createLayer=_createLayer.default.bind(this),this.processTile=_processTile.default.bind(this)}return _createClass(e,[{key:"setOptions",value:function(e){this.tiledServer=e.tiledServer,this.proceduralGenerateMissingChunks=e.proceduralGenerateMissingChunks}},{key:"init",value:function(e){var i=this;this.game=e,this.game.addSystem("tile",this),this.game.TileMap=this.TileMap,this.game.TileSet=this.TileSet,this.game.Biome=this.Biome,this.game.terrains=this.terrains,this.game.mazes=this.mazes,this.game.terrainGenerators=this.allTransformers,this.loadInitialChunk&&(this.tiledServer?this.game.loadScripts(["/tiled/chunks/chunk_x0_y0.js"],function(){console.log("this.game.data.chunks.chunk_x0_y0",i.game.data.chunks.chunk_x0_y0.data.length),i.createLayer(i.game.data.chunks.chunk_x0_y0,i.tileSize,i.tileSize)}):this.proceduralGenerateMissingChunks),this.loadDefaultTileMap&&this.createTileMapFromTiledJSON(this.tiledMap),this.loadTileMap&&this.createTileMap(this.tileMap),this.game.on("file::upload",function(e){i.tiledServer=!1,i.createTileMapFromTiledJSON(e)})}},{key:"useTileSet",value:function(e,i){this.tileSet=i,this.tileSets[e]=i}},{key:"addTileSet",value:function(e,i){this.tileSets(e,i)}},{key:"extractChunkCoordinates",value:function(e){var i=e.match(/chunk_x(-?\d+)_y(-?\d+)/);return i?{x:parseInt(i[1]),y:parseInt(i[2])}:{x:0,y:0}}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}}]),e}();_defineProperty(Tile,"id","tile");var _default=exports.default=Tile;

},{"../../../../Labyrinthos.js/lib/labyrinthos.js":10,"./lib/calculateTilePosition.js":35,"./lib/createLayer.js":36,"./lib/createTile.js":37,"./lib/createTileMap.js":38,"./lib/createTileMapFromTiledJSON.js":39,"./lib/getChunkFiles.js":40,"./lib/handleChunkLoadFailure.js":41,"./lib/loadChunk.js":42,"./lib/loadTilesForArea.js":43,"./lib/processTile.js":44,"./maps/defaultOrthogonalMap.js":45}],35:[function(require,module,exports){
"use strict";function calculateTilePosition(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,h=t%e.width*i,n=Math.floor(t/e.width)*o,r=e.width*i/2,a=e.height*o/2;return{x:h-r+e.x*i,y:n-a+e.y*o,z:l*(o/d)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=calculateTilePosition;

},{}],36:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function createLayer(t,o,e){var r=this;"object"===_typeof(t.data[0])?t.data.forEach(function(n,f){n.forEach(function(n,c){var y=!1;f>0&&(y=!0),r.processTile(n,c,t,o,e,f,y)})}):t.data.forEach(function(n,f){r.processTile(n,f,t,o,e,0,!0)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createLayer;

},{}],37:[function(require,module,exports){
"use strict";function createTile(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,a=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=t.layer||{};t.id;if("empty"!==t.kind){var d;a&&"number"==typeof t.z&&(o=t.z),t.size&&"number"==typeof t.size.width&&(n=t.size.width),t.size&&"number"==typeof t.size.height&&(r=t.size.height),s=t.size&&"number"==typeof t.size.depth?t.size.depth:r;var h=!1;"function"==typeof t.collisionStart&&(h=t.collisionStart),"boolean"==typeof t.isStatic&&(d=t.isStatic);var p,y=t.body,f=t.mass||1;c&&this.debug&&(p=c);var u,v="TILE";return void 0!==t.type&&(v=t.type),u=void 0!==t.texture?t.texture:"tile-".concat(t.kind),this.game.createEntity({type:v,name:t.name||t.kind,kind:t.kind,body:y,container:l.container,mass:f,collisionActive:!1,collisionStart:h,collisionEnd:!1,hasInventory:!1,collectable:!1,friction:t.friction||.01,frictionAir:t.friction||.01,frictionStatic:t.friction||.01,isStatic:d,style:{cursor:"pointer"},position:{x:1*e,y:1*i,z:1*o},texture:u,color:p,width:1*n,height:1*r,depth:1*s,exit:t.exit})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createTile;

},{}],38:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function createTileMap(e){var t=this.game,n=this.labyrinthos;"number"!=typeof e.x&&(e.x=0),"number"!=typeof e.y&&(e.y=0);var a=parseInt(e.depth),r=new n.TileMap({x:e.x,y:e.y,width:parseInt(e.width),height:parseInt(e.height),tileWidth:16,tileHeight:16});r.fill(1),r.seed(e.seed),this.labySeed=e.seed,e.algo;var o=n.mazes[e.algo],i="maze";if(void 0===o&&(o=n.terrains[e.algo],i="terrain"),void 0===o&&(o=n.shapes[e.algo],i="shape"),void 0===o)throw console.log("no transformFn found for",e.algo),new Error("no transformFn found for "+e.algo);!function t(){try{o(r,e.options||{})}catch(e){console.log("Random seed cannot generate map with current map size and configuration",e.message),r.seedRandom(),t()}}(),"terrain"===i&&r.scaleToTileRange(6);var s=[],l=[],d=!1;if(a>1&&"object"!==_typeof(r.data[0])){var u=r.data;d=!0,r.data=[];for(var h=0;h<a;h++){r.data[h]=[];for(var p=0;p<u.length;p++)r.data[h][p]=u[p],5===u[p]&&s.push(p),6===u[p]&&l.push(p)}}else for(var f=r.data,c=0;c<f.length;c++)5===f[c]&&s.push(c),6===f[c]&&l.push(c);if(!1===this.tiledServer&&!1===this.proceduralGenerateMissingChunks&&(0!==l.length||d||(l=generateExits(r,1)),0!==s.length||d||(s=generateEntrances(r,1))),this.createLayer(r,16,16),this.game.emit("tilemap::created",e),s.length>0){var g=s[r.random(s.length-1)],m=this.calculateTilePosition(g,r,16,16);if("number"==typeof m.x&&"number"==typeof m.y){var y=this.game.getCurrentPlayer();t.setPosition(y.id,{x:m.x,y:m.y}),this.game.emit("player::tilemap::entrance",y)}}return r}function generateExits(e,t){var n,a=[],r=e.data.reduce(function(e,t,n){return 2===t&&e.push(n),e},[]);if(r.length>0)n=r[e.random(r.length-1)];else{var o=e.data.reduce(function(e,t,n){return 0===t&&e.push(n),e},[]);o.length>0?n=o[e.random(o.length-1)]:(console.warn("No valid exit points (0 or 3) found in map.data."),n=e.random(e.data.length-1))}return e.data[n]=6,a.push(n),a}function generateEntrances(e,t){var n,a=[],r=e.data.reduce(function(e,t,n){return 2===t&&e.push(n),e},[]);if(r.length>0)n=r[e.random(r.length-1)];else{var o=e.data.reduce(function(e,t,n){return 0===t&&e.push(n),e},[]);o.length>0?n=o[e.random(o.length-1)]:(console.warn("No valid entrance points (0 or 2) found in map.data."),n=e.random(e.data.length-1))}return e.data[n]=5,a.push(n),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createTileMap;

},{}],39:[function(require,module,exports){
"use strict";function createTileMapFromTiledJSON(e){var t=this;"undefined"!=typeof window&&(document.getElementById("drag-and-drop-file-upload-overlay").style.display="none");e.layers.forEach(function(i){"tilelayer"===i.type&&(i.chunks?i.chunks.forEach(function(i){t.createLayer(i,e.tilewidth,e.tileheight)}):t.createLayer(i,e.tilewidth,e.tileheight))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createTileMapFromTiledJSON;

},{}],40:[function(require,module,exports){
"use strict";function getChunkFiles(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],u=Math.round(t.x/(16*e))*e,a=Math.round(t.y/(16*e))*e,h=-r;h<=r;h++)for(var i=-r;i<=r;i++){var s=a+i*e,c=pathJoin(n,"chunk_x".concat(u+h*e,"_y").concat(s,".js"));o.push(c)}return o}function pathJoin(t,e){return t.endsWith("/")?t+e:t+"/"+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=getChunkFiles;

},{}],41:[function(require,module,exports){
"use strict";function handleChunkLoadFailure(e,t){this.labyrinthos;if(this.proceduralGenerateMissingChunks){var i,h=this.extractChunkCoordinates(t),a=h.x,s=h.y;if(0===a&&0===s)return;i=this.createTileMap({x:a,y:s,width:this.chunkUnitSize,height:this.chunkUnitSize,tileWidth:16,tileHeight:16,algo:this.labyrinthosAlgoName,seed:t}),this.game.data.chunks[t]=i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handleChunkLoadFailure;

},{}],42:[function(require,module,exports){
"use strict";function loadChunk(t,e){var a=this;this.loadingStates[t]||(this.loadingStates[t]={attempts:0,loading:!1});var i=this.loadingStates[t];!i.loading&&i.attempts<this.maxRetries?(i.loading=!0,i.attempts++,console.log("Attempting to load tile chunk",t),this.game.loadScripts([t],function(s){i.loading=!1,a.game.data.chunks[e]?a.game.systems.tile.createLayer(a.game.data.chunks[e],a.tileSize,a.tileSize):a.handleChunkLoadFailure(t,e)})):i.attempts>=this.maxRetries&&this.handleChunkLoadFailure(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=loadChunk;

},{}],43:[function(require,module,exports){
"use strict";function loadTilesForArea(e){var a=this;this.getChunkFiles(e,this.chunkUnitSize,"/tiled/chunks/",2).forEach(function(e){var i=e.replace(".js","").replace("/tiled/chunks/","");if(void 0===a.game.data.chunks[i])if(a.tiledServer){var r=e;a.loadChunk(r,i)}else a.proceduralGenerateMissingChunks&&a.handleChunkLoadFailure(null,i)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=loadTilesForArea;

},{}],44:[function(require,module,exports){
"use strict";function processTile(e,t,l,i,o,s){var r,n=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=this.tileSet;if(l.tileSet&&l.tileSet.length>0&&(a=l.tileSet),"number"==typeof e){(r=a[e])||(r=a[0]),"number"!=typeof s&&(s=o);var u=this.calculateTilePosition(t,l,i,o,s),c=u.x,p=u.y,h=u.z;r.layer=l,this.createTile(r,c,p,h,i,o,s,l.color,n)}else console.log("Warning: tileValue was not a number. This should not happen:",e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=processTile;

},{}],45:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var defaultOrthogonalMap={compressionlevel:-1,height:20,infinite:!1,layers:[{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:20,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:30,x:0,y:0}],nextlayerid:2,nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.10.2",tileheight:16,tilesets:[{firstgid:1,source:"grass-land.tsx"}],tilewidth:16,type:"map",version:"1.10",width:30},_default=exports.default=defaultOrthogonalMap;

},{}],46:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Tile=_interopRequireDefault(require("../tile/Tile.js")),_generateTerrain=_interopRequireDefault(require("./lib/generateTerrain.js")),_generateTerrainLayer=_interopRequireDefault(require("./lib/generateTerrainLayer.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var TileMap=exports.default=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,e),this.id=e.id}return _createClass(e,[{key:"init",value:function(e){this.game=e,this.game.use(new _Tile.default),this.generateTerrain=_generateTerrain.default.bind(this),this.generateTerrainLayer=_generateTerrainLayer.default.bind(this),this.game.systemsManager.addSystem("tilemap",this)}},{key:"build",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.game;void 0===t.position&&(t.position={x:0,y:0,z:0}),void 0===t.position.z&&(t.position.z=0),t.meta=t.meta||{},t.tileMapWidth&&t.tileMapHeight?(t.meta.tileMapWidth=t.tileMapWidth,t.meta.tileMapHeight=t.tileMapHeight):(t.meta.tileMapWidth=4,t.meta.tileMapHeight=4),t.tileSize&&(t.meta.tileSize=t.tileSize,t.meta.tileWidth=t.tileSize,t.meta.tileHeight=t.tileSize),t.tileWidth&&t.tileHeight&&(t.meta.tileWidth=t.tileWidth,t.meta.tileHeight=t.tileHeight),"number"!=typeof t.meta.tileWidth&&(t.meta.tileWidth=32),"number"!=typeof t.meta.tileHeight&&(t.meta.tileHeight=32),t.meta.data=t.data||[1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1];var i={};t.meta&&(i=t.meta),t._previous&&t._previous.meta&&t._previous.meta.tileSet&&(i.tileSet=t._previous.meta.tileSet),t.tileSet&&(i.tileSet=t.tileSet),i.tileSet||(i.tileSet=[{id:0,texture:"tile-grass"},{id:1,texture:"tile-bush"}]),t.size={width:t.meta.tileMapWidth*t.meta.tileWidth,height:t.meta.tileMapHeight*t.meta.tileHeight},t.size.width+=16,t.size.height+=16;var r=t.coordinateKey||t.position.x+","+t.position.y+","+t.position.z;return{type:"TILEMAP",isSensor:!0,body:!1,name:r,position:t.position,size:t.size,meta:i,style:{display:"none"},afterCreateEntity:function(t){var i=e.game,a={container:r,data:t.meta.data,tileSet:t.meta.tileSet,x:0,y:0,width:t.meta.tileMapWidth||4,height:t.meta.tileMapHeight||4,position:{x:0,y:0,z:0},tileWidth:t.meta.tileWidth||16,tileHeight:t.meta.tileHeight||16,tileDepth:t.meta.tileDepth||16,tileSize:t.meta.tileWidth};i.systems.tile.createLayer(a,a.tileSize,a.tileSize)}}}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.position&&(e.position={x:0,y:0});game.createEntity(this.build(e))}}]),e}();_defineProperty(TileMap,"id","tilemap");

},{"../tile/Tile.js":34,"./lib/generateTerrain.js":47,"./lib/generateTerrainLayer.js":48}],47:[function(require,module,exports){
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function generateTerrain(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AldousBroder",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.width,a=void 0===t?32:t,i=r.height,n=void 0===i?12:i,o=r.depth,l=void 0===o?1:o,s=r.mode,u=void 0===s?"2D":s,d=r.stackingMode,h=void 0===d?"unique":d,y=r.seed,g=void 0===y?1234:y;this.proceduralGenerateMissingChunks&&!this.game.systems.rbush&&console.warn('proceduralGenerateMissingChunks is set to true, but rbush is not available. This means that chunks will not be generated procedurally and infinte mode will not work. Please game.use("RBush") plugin and try again.');var p=new game.TileMap({x:0,y:0,width:a,height:n,seed:g,tileWidth:16,tileHeight:16});if(p.fill(2),"3D"===u){if(p.depth=l,"unique"===h)for(var c=0;c<l;c++){var f=new game.TileMap({x:0,y:0,width:a,height:n,seed:g+c,tileWidth:16,tileHeight:16});f.fill(2),this.generateTerrainLayer(f,e),p.data.push(f.data)}else if("extrude"===h){var m=new game.TileMap({x:0,y:0,width:a,height:n,seed:g,tileWidth:16,tileHeight:16});m.fill(2),this.generateTerrainLayer(m,e);for(var b=0;b<l;b++)p.data.push(_toConsumableArray(m.data))}}else this.generateTerrainLayer(p,e);p.container="tilemap-container",game.systems.tile.createLayer(p,16,16),console.log("Generated Maze:",p)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateTerrain;

},{}],48:[function(require,module,exports){
"use strict";function generateTerrainLayer(e,r){try{(0,game.terrainGenerators[r])(e,{}),game.terrains[r]}catch(e){throw new Error("Error generating maze layer: "+e.message)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=generateTerrainLayer;

},{}]},{},[46])(46)
});
