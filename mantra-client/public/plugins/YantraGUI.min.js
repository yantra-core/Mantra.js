(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.PLUGINS || (g.PLUGINS = {})).YantraGUI = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var YantraGUI=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,e),this.id=e.id,this.logContainer=null,this.logTextArea=null,this.pingTestComplete=!1}return _createClass(e,[{key:"init",value:function(e){this.game=e,this.createDisplay();var t=this;e.on("server::discovery::polling",function(e){t.updateLog(e.message)}),e.on("server::discovery::best-server",function(e){var n=e.data[0],r={region:n.region,activePlayers:n.activePlayers,processId:n.processId,hostId:n.hostId,mode:n.mode,settings:n.settings};t.updateLog(JSON.stringify(r,!0,2))}),e.on("server::discovery::start",function(e){t.updateLog(e.message)}),e.on("server::discovery::message",function(e){t.updateLog(e.message)}),e.on("server::discovery::completed",function(e){t.pingTestComplete=!0}),e.on("server::discovery::pingtest",function(e){var n=e.region,r=e.latency,o="ping-good";r>100&&r<=200?o="ping-moderate":r>200&&(o="ping-poor");var i=document.querySelector('#pingResults .ping-region[data-region="'.concat(n,'"]'));i&&(i.className="ping-region ".concat(o),i.textContent="".concat(n,": ").concat(r," ms")),t.sortPingResults()})}},{key:"createDisplay",value:function(){window.addEventListener("click",function(e){e.target===document.getElementById("pingModal")&&(document.getElementById("pingModal").style.display="none")}),window.addEventListener("keydown",function(){self.pingTestComplete&&(document.getElementById("pingModal").style.display="none")});var e=document.createElement("div");this.applyStyles(e,{display:"flex",justifyContent:"space-between",width:"100%"});var t=document.createElement("div");t.id="pingResults",t.className="ping-results-container",this.applyStyles(t,{width:"50%",marginRight:"10px"});var n=document.createElement("div");this.applyStyles(n,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"});var r=document.createElement("div");r.id="pingModal",r.className="modal",this.applyStyles(r,{});var o=document.createElement("div");o.className="modal-content",this.applyStyles(o,{});var i=document.createElement("span");i.className="close-button",i.textContent="Ã—",this.applyStyles(i,{cursor:"pointer",fontSize:"28px",fontWeight:"bold",color:"#aaa"});var a=document.createElement("h2");a.textContent="Yantra Server Discovery",i.addEventListener("click",function(){document.getElementById("pingModal").style.display="none"}),n.appendChild(a),n.appendChild(i),o.prepend(n),o.appendChild(t),r.appendChild(o),document.body.appendChild(r),window.YANTRA.serverDiscovery.regionList.forEach(function(e){var t=document.createElement("div");t.className="ping-region ping-pending",t.setAttribute("data-region",e.region),t.textContent="".concat(e.region,": Pending..."),document.getElementById("pingResults").appendChild(t)}),this.logTextArea=document.createElement("textarea"),this.logTextArea.id="yantraLogTextArea",this.logTextArea.readOnly=!0,this.applyStyles(this.logTextArea,{width:"50%",height:"400px",border:"1px solid #ddd",borderRadius:"4px",padding:"10px",boxSizing:"border-box",overflowY:"scroll"}),e.appendChild(t),e.appendChild(this.logTextArea),o.appendChild(e)}},{key:"applyStyles",value:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var o=_slicedToArray(r[n],2),i=o[0],a=o[1];e.style[i]=a}}},{key:"updateLog",value:function(e){this.logTextArea.value+=e+"\n",this.logTextArea.scrollTop=this.logTextArea.scrollHeight}},{key:"sortPingResults",value:function(){var e=document.getElementById("pingResults"),t=Array.from(e.children);t.sort(function(e,t){return parseInt(e.textContent.split(": ")[1])-parseInt(t.textContent.split(": ")[1])}),t.forEach(function(t){return e.appendChild(t)})}},{key:"unload",value:function(){this.logContainer&&this.logContainer.parentNode&&this.logContainer.parentNode.removeChild(this.logContainer),this.logContainer=null,this.logTextArea=null}}]),e}();_defineProperty(YantraGUI,"id","gui-yantra");var _default=exports.default=YantraGUI;

},{}]},{},[1])(1)
});
