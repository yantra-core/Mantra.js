(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.PLUGINS || (g.PLUGINS = {})).ASCIIGraphics = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var GraphicInterface=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(){throw new Error("init method not implemented.")}},{key:"render",value:function(e){throw new Error("render method not implemented.")}},{key:"update",value:function(e){}},{key:"inflateGraphic",value:function(e){throw new Error("inflateGraphic method not implemented.")}},{key:"createGraphic",value:function(e,t){throw new Error("createGraphic method not implemented.")}},{key:"removeGraphic",value:function(e){throw new Error("removeGraphic method not implemented.")}},{key:"updateGraphic",value:function(e,t){throw new Error("updateGraphic method not implemented.")}}]),e}(),_default=exports.default=GraphicInterface;

},{}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _GraphicsInterface2=_interopRequireDefault(require("../../lib/GraphicsInterface.js")),_CSSCamera=_interopRequireDefault(require("../graphics-css/CSSCamera.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,i=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ASCIIGraphics=function(e){_inherits(r,_GraphicsInterface2["default"]);var t=_createSuper(r);function r(){var e,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;return _classCallCheck(this,r),(e=t.call(this)).camera=i,e.cameraPosition={x:0,y:0},e.screen=null,e.elements={},e.id=r.id,e.asciiScreen=[],e}return _createClass(r,[{key:"init",value:function(e){this.game=e,this.game.asciiScreen=this.asciiScreen;this.screen={width:Math.round(.5*Math.min(window.innerWidth,e.width)),height:Math.round(.5*Math.min(window.innerHeight,e.height))},this.scaleX=this.screen.width/e.width,this.scaleY=this.screen.height/e.height;var t=new _CSSCamera.default(this,this.camera);this.game.use(t),this.createAsciiContainer(),this.createAsciiScreen(),e.graphics.push(this)}},{key:"entityToAscii",value:function(e){switch(e.type){case"PLAYER":return"@";case"ENEMY":return"!";default:return"#"}}},{key:"createAsciiContainer",value:function(){var e=document.getElementById("gameHolder");e||((e=document.createElement("div")).id="gameHolder",document.body.appendChild(e));var t=document.getElementById("ascii-render-div");t||((t=document.createElement("div")).id="ascii-render-div",t.className="render-div",e.appendChild(t)),this.renderDiv=t,this.renderDiv.style.fontFamily="monospace",this.renderDiv.style.zIndex=1,this.renderDiv.style.fontSize="16px",this.renderDiv.style.color="#000",this.renderDiv.style.whiteSpace="pre",e.appendChild(this.renderDiv);for(var r=0;r<this.screen.height;r++){var i=document.createElement("div");i.textContent=" ".repeat(this.screen.width),this.renderDiv.appendChild(i)}}},{key:"updateAsciiContainer",value:function(){for(var e=0;e<this.screen.height;e++){var t=this.renderDiv.childNodes[e],r=this.asciiScreen[e].join("");t.textContent!==r&&(t.textContent=r)}}},{key:"createAsciiScreen",value:function(){for(var e=0;e<this.screen.height;e++){this.asciiScreen[e]=[];for(var t=0;t<this.screen.width;t++)this.asciiScreen[e][t]=" "}}},{key:"transformEntityToScreenCoordinates",value:function(e){var t=Math.round((e.position.x-this.game.data.camera.position.x+this.game.width/2)*this.scaleX),r=Math.round((e.position.y-this.game.data.camera.position.y+this.game.height/2)*this.scaleY),i=Math.max(1,Math.round(e.width*this.scaleX)),n=Math.max(1,Math.round(e.height*this.scaleY));return{x:t=Math.max(0,Math.min(t,this.screen.width-i)),y:r=Math.max(0,Math.min(r,this.screen.height-n)),width:i,height:n}}},{key:"isWithinScreenBounds",value:function(e,t){return e>=0&&e<this.screen.width&&t>=0&&t<this.screen.height}},{key:"inflateGraphic",value:function(e){var t;"building"!==e.kind&&(e.graphics&&e.graphics["graphics-ascii"]?(t=e.graphics["graphics-ascii"],"BORDER"!==e.type&&this.updateGraphic(e)):(t=this.createGraphic(e),this.game.components.graphics.set([e.id,"graphics-ascii"],t)))}},{key:"createGraphic",value:function(e){for(var t=this.transformEntityToScreenCoordinates(e),r=t.x,i=t.y,n=t.width,a=t.height,o=this.entityToAscii(e),s=0;s<a;s++)for(var c=0;c<n;c++)this.isWithinScreenBounds(r+c,i+s)&&(this.asciiScreen[i+s][r+c]=o);return this.elements[e.id]={x:r,y:i,char:o,width:n,height:a},this.elements[e.id]}},{key:"updateGraphic",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.elements[e.id],this.transformEntityToScreenCoordinates(e);if(this.elements[e.id]){for(var t=this.elements[e.id],r=this.transformEntityToScreenCoordinates(e),i=r.x,n=r.y,a=r.width,o=r.height,s=this.entityToAscii(e),c=0;c<t.height;c++)for(var u=0;u<t.width;u++)this.isWithinScreenBounds(t.x+u,t.y+c)&&(this.asciiScreen[t.y+c][t.x+u]=" ");for(var h=0;h<o;h++)for(var l=0;l<a;l++)this.isWithinScreenBounds(i+l,n+h)&&(this.asciiScreen[n+h][i+l]=s);this.elements[e.id]={x:i,y:n,char:s,width:a,height:o}}}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.game.data.camera.position=this.cameraPosition;var r,i=_createForOfIteratorHelper(this.game.entities.entries());try{for(i.s();!(r=i.n()).done;){var n=_slicedToArray(r.value,2),a=n[0],o=(n[1],this.game.entities.get(a));this.inflateGraphic(o,t)}}catch(e){i.e(e)}finally{i.f()}this.updateAsciiContainer()}},{key:"update",value:function(){var e=this.game,t=this.game.getEntity(e.currentPlayerId);e.data.camera.currentZoom,window.innerHeight,window.innerWidth,this.game.data.camera.currentZoom;if("number"!=typeof e.data.camera.offsetX&&(e.data.camera.offsetX=0),"number"!=typeof e.data.camera.offsetY&&(e.data.camera.offsetY=0),t&&t.position){this.game.data.camera.position.x=t.position.x+e.data.camera.offsetX;var r=t.position.y+e.data.camera.offsetY;this.scene.cameraPosition.y=r}else this.scene.cameraPosition.x=e.data.camera.offsetX,this.scene.cameraPosition.y=e.data.camera.offsetY}},{key:"removeGraphic",value:function(e){if(this.elements[e]){var t=this.elements[e],r=t.x,i=t.y;this.asciiScreen[i][r]=" ",delete this.elements[e]}}},{key:"unload",value:function(){this.screen.destroy(),this.asciiScreen=[]}}]),r}();_defineProperty(ASCIIGraphics,"id","graphics-ascii"),_defineProperty(ASCIIGraphics,"removable",!0);var _default=exports.default=ASCIIGraphics;

},{"../../lib/GraphicsInterface.js":1,"../graphics-css/CSSCamera.js":3}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _setTransform=_interopRequireDefault(require("./lib/camera/setTransform.js")),_rotateCameraOverTime=_interopRequireDefault(require("./lib/camera/rotateCameraOverTime.js")),_updateCameraPosition=_interopRequireDefault(require("./lib/camera/updateCameraPosition.js")),_updateEntityPosition=_interopRequireDefault(require("./lib/camera/updateEntityPosition.js")),_mouseWheelZoom=_interopRequireDefault(require("./lib/camera/mouseWheelZoom.js")),_zoom=_interopRequireDefault(require("./lib/camera/zoom.js")),_cameraShake=_interopRequireDefault(require("./lib/camera/cameraShake.js")),_applyThrow=_interopRequireDefault(require("./lib/camera/applyThrow.js")),_update=_interopRequireDefault(require("./lib/camera/update.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var CSSCamera=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.id=e.id,this.scene=t,this.config=i,this.isDragging=!1,this.dragInertia={x:0,y:0},this.isThrowing=!1,this.rotating=!1,this.mouseWheelEnabled=!0,this.mouseWheelZoom=_mouseWheelZoom.default.bind(this),this.zoom=_zoom.default.bind(this),this.setTransform=_setTransform.default.bind(this),this.updateEntityPosition=_updateEntityPosition.default.bind(this),this.cameraShake=_cameraShake.default.bind(this)}return _createClass(e,[{key:"init",value:function(e){var t=this;this.game=e,this.game.shakeCamera=_cameraShake.default.bind(this),e.zoom=this.zoom.bind(this),e.setZoom=this.zoom.bind(this),void 0===e.data.camera&&(e.data.camera={mode:"follow",position:{x:0,y:0}}),this.updateCameraPosition=_updateCameraPosition.default.bind(this),this.applyThrow=_applyThrow.default.bind(this),this.update=_update.default.bind(this),this.scene.setTransform=this.setTransform.bind(this),this.scene.updateEntityPosition=this.updateEntityPosition.bind(this),e.rotateCamera=_rotateCameraOverTime.default.bind(this),this.game.systemsManager.addSystem("graphics-css-camera",this);var i=document.getElementById("gameHolder");i||((i=document.createElement("div")).id="gameHolder",document.body.appendChild(i)),this.gameViewport=document.getElementById("gameHolder"),this.gameViewport.style.transformOrigin="center center",this.initMouseWheelZoomControls(),this.config.initialZoom&&this.zoom(this.config.initialZoom),e.on("entityInput::handleInputs",function(i,o,r){if(o.mouse){o.mouse.buttons.RIGHT,o.mouse.buttons.MIDDLE,o.mouse.dx=o.mouse.dx||0,o.mouse.dy=o.mouse.dy||0;var a=1/e.data.camera.currentZoom||4.5,n=o.mouse.dx*a,s=o.mouse.dy*a;t.updateCameraPosition(-n,-s,o.mouse.isDragging)}})}},{key:"resetCameraState",value:function(){this.game.data.camera.offsetX=0,this.game.data.camera.offsetY=0}},{key:"initMouseWheelZoomControls",value:function(){document.addEventListener("wheel",this.mouseWheelZoom,{passive:!1}),this.scene.mouseWheelEnabled=!0}},{key:"rotateCamera",value:function(e){"number"==typeof e?this.gameViewport.style.transform="rotate(".concat(e,"deg)"):console.error("Invalid angle for rotateCamera. Must be a number.")}},{key:"cancelThrow",value:function(){this.isThrowing=!1,this.dragInertia={x:0,y:0}}},{key:"unload",value:function(){document.removeEventListener("wheel",this.mouseWheelZoom)}}]),e}();_defineProperty(CSSCamera,"id","css-camera");var _default=exports.default=CSSCamera;

},{"./lib/camera/applyThrow.js":4,"./lib/camera/cameraShake.js":5,"./lib/camera/mouseWheelZoom.js":6,"./lib/camera/rotateCameraOverTime.js":7,"./lib/camera/setTransform.js":8,"./lib/camera/update.js":9,"./lib/camera/updateCameraPosition.js":10,"./lib/camera/updateEntityPosition.js":11,"./lib/camera/zoom.js":12}],4:[function(require,module,exports){
"use strict";function applyThrow(){if(this.isThrowing){var t=this.game;t.data.camera.offsetX+=this.dragInertia.x,t.data.camera.offsetY+=this.dragInertia.y,this.dragInertia.x*=.985,this.dragInertia.y*=.985,Math.abs(this.dragInertia.x)>.1||Math.abs(this.dragInertia.y)>.1?requestAnimationFrame(this.applyThrow.bind(this)):this.isThrowing=!1,this.isThrowing}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=applyThrow;

},{}],5:[function(require,module,exports){
"use strict";function cameraShake(a){var t=this,e=a.initialIntensity,n=void 0===e?100:e,r=a.duration,o=void 0===r?777:r,i=document.getElementById("gameHolder");if(i){if("true"!==i.dataset.isShaking){i.dataset.isShaking="true";var s=i.style.transform,d=Date.now();!function a(){var e=Date.now()-d,r=o-e;if(r<=0)return i.style.transform=s,void(i.dataset.isShaking="false");var c=n*(r/o),m=c*Math.sin(e/100)*(Math.random()>.5?1:-1),l=c*Math.cos(e/100)*(Math.random()>.5?1:-1);i.style.transform="".concat(s," translate(").concat(m,"px, ").concat(l,"px)"),Object.keys(t.game.data.ents._).forEach(function(a){var e=t.game.data.ents._[a];if("PARTICLE"===e.type||"STAR"===e.type||"HEXAPOD"===e.type||"DEMON"===e.type||"NONE"===e.type){var n=Math.random()*c-c/2,r=Math.random()*c-c/2;n*=.01,r*=.01,game.applyForce(a,{x:n,y:r})}}),requestAnimationFrame(a)}()}}else console.log("Warning: could not find gameHolder div, cannot apply camera shake")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=cameraShake;

},{}],6:[function(require,module,exports){
"use strict";function cssMouseWheelZoom(e){var a=this.game;if(this.mouseWheelEnabled&&(!a.data.camera||!0===a.data.camera.mouseWheelZoomEnabled)){e.preventDefault();var t=a.data.camera.currentZoom,o=.01,l=.1,s=10,r=(e.wheelDelta?e.wheelDelta:-e.detail)>0?1:-1,h=o*Math.log(t+1)/Math.log(s),m=Math.max(l,t+r*h);return this.zoom(m),!1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=cssMouseWheelZoom;

},{}],7:[function(require,module,exports){
"use strict";function rotateCameraOverTime(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1100;if("number"==typeof e&&"number"==typeof r){if(!this.rotating){this.rotating=!0,this.game.data.camera.rotation=e;var a=this.game.data.camera.currentZoom,o=window.innerWidth/2,i=window.innerHeight/2;this.gameViewport.style.transition="transform ".concat(r,"ms"),this.gameViewport.style.transformOrigin="".concat(o,"px ").concat(i,"px"),this.gameViewport.style.transform="scale(".concat(a,") rotate(").concat(e,"deg)"),setTimeout(function(){t.gameViewport.style.transition="",t.rotating=!1,t.gameViewport.style.transformOrigin="50% 50%",t.gameViewport.style.transform="scale(".concat(a,") rotate(",0,"deg)")},r)}}else console.error("Invalid arguments for rotateCameraOverTime. Both targetAngle and duration must be numbers.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=rotateCameraOverTime;

},{}],8:[function(require,module,exports){
"use strict";function setTransform(t,e,r,a,o,n){var s=e.dataset.rotation||0;e.style.backgroundImage&&e.style.backgroundImage;o&&(s=n,e.dataset.rotation=n);var c="translate(".concat(truncateToPrecision(r,2),"px, ").concat(truncateToPrecision(a,2),"px)");"PLAYER"!==t.type&&(c+=" rotate(".concat(s,"deg)")),e.style.transform!==c&&(e.style.transform=c)}function truncateToPrecision(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setTransform;

},{}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=update;var _zoom=_interopRequireDefault(require("./zoom.js"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function update(){var a=this.game,t=this.game.getEntity(a.currentPlayerId);a.data.camera.currentZoom,window.innerHeight,window.innerWidth,this.game.data.camera.currentZoom;"number"!=typeof a.data.camera.offsetX&&(a.data.camera.offsetX=0),"number"!=typeof a.data.camera.offsetY&&(a.data.camera.offsetY=0),"number"!=typeof a.data.camera.offsetX&&(a.data.camera.offsetX=0),"number"!=typeof a.data.camera.offsetY&&(a.data.camera.offsetY=0);var e=0,r=0;"follow"===this.game.data.camera.mode&&t&&t.position&&(e=t.position.x,r=t.position.y),this.scene.cameraPosition.x=e+a.data.camera.offsetX,this.scene.cameraPosition.y=r+a.data.camera.offsetY;var o=window.innerWidth/2,i=window.innerHeight/2,s={x:this.scene.cameraPosition.x-o,y:this.scene.cameraPosition.y-i};s.x*=this.game.data.camera.currentZoom,s.y*=this.game.data.camera.currentZoom;var n=window.innerWidth/this.game.data.camera.currentZoom,m=window.innerHeight/this.game.data.camera.currentZoom,c=(window.innerWidth,(window.innerHeight-m)/2);this.game.data.camera.currentZoom,c*=this.game.data.camera.currentZoom,s.y+=c,this.scene.renderDiv&&setTransform(this.scene.renderDiv,-s.x,-s.y,this.game.data.camera.currentZoom,0),this.game.data.camera.position=this.scene.cameraPosition}function setTransform(a,t,e,r,o){var i=parseFloat(a.dataset.lastOffsetX)||0,s=parseFloat(a.dataset.lastOffsetY)||0,n=parseFloat(a.dataset.lastZoom)||1,m=parseFloat(a.dataset.lastRotation)||0;t=Number.isFinite(t)?t:i,e=Number.isFinite(e)?e:s,r=Number.isFinite(r)&&r>0?r:n,o=Number.isFinite(o)?o:m,t===i&&e===s&&r===n&&o===m||(a.style.transform="translate(".concat(t,"px, ").concat(e,"px) scale(").concat(r,") rotate(").concat(o,"deg)"),a.dataset.lastOffsetX=t.toString(),a.dataset.lastOffsetY=e.toString(),a.dataset.lastZoom=r.toString(),a.dataset.lastRotation=o.toString())}

},{"./zoom.js":12}],10:[function(require,module,exports){
"use strict";function updateCameraPosition(i,t,a){var e=this.game;this.isDragging&&!a&&this.cancelThrow(),a&&(this.isDragging=!0,"number"==typeof i&&(e.data.camera.offsetX+=i),"number"==typeof t&&(e.data.camera.offsetY+=t)),!this.isDragging||a||0===i&&0===t||(this.isThrowing=!0,this.isDragging=!1,Math.abs(i)>2&&(this.dragInertia.x=1.6*i),Math.abs(t)>2&&(this.dragInertia.y=1.6*t),requestAnimationFrame(this.applyThrow.bind(this))),a||(this.isDragging=!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=updateCameraPosition;

},{}],11:[function(require,module,exports){
"use strict";function updateEntityPosition(t,e){var i=e.position,s=e.rotation,o=(e.type,e.width),n=e.height;"number"==typeof e.radius&&(o=e.radius,n=e.radius);window.outerWidth,window.outerHeight;var r=i.x,y=i.y;if(e.style&&"fixed"===e.style.position)return t.style.position="absolute",t.style.left=i.x+"px",t.style.top=i.y+"px",t.style.display="",t;var a=r-o/2,l=y-n/2,d=s*(180/Math.PI);return this.setTransform(e,t,a,l,s,d),t.style.display="",e.style&&"none"===e.style.display&&(t.style.display="none"),t}function isWithinFieldOfView(t,e,i,s,o,n,r){var y=e.x+s/2,a=e.y+o/2,l=y-i.x,d=a-i.y+100,u=Math.min(n,r);return Math.sqrt(l*l+d*d)<=u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=updateEntityPosition;

},{}],12:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=zoom;var minZoom=.1,maxZoom=10;function zoom(o){arguments.length>1&&void 0!==arguments[1]&&arguments[1];o<minZoom&&(o=minZoom),o>maxZoom&&(o=maxZoom),this.game.data.camera.currentZoom=o}

},{}]},{},[2])(2)
});
