(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.PLUGINS || (g.PLUGINS = {})).Schema = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function asPromise(e,n){for(var r=new Array(arguments.length-1),t=0,l=2,o=!0;l<arguments.length;)r[t++]=arguments[l++];return new Promise(function(l,a){r[t]=function(e){if(o)if(o=!1,e)a(e);else{for(var n=new Array(arguments.length-1),r=0;r<n.length;)n[r++]=arguments[r];l.apply(null,n)}};try{e.apply(n||null,r)}catch(e){o&&(o=!1,a(e))}})}module.exports=asPromise;

},{}],2:[function(require,module,exports){
"use strict";var base64=exports;base64.length=function(r){var a=r.length;if(!a)return 0;for(var e=0;--a%4>1&&"="===r.charAt(a);)++e;return Math.ceil(3*r.length)/4-e};for(var b64=new Array(64),s64=new Array(123),i=0;i<64;)s64[b64[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;base64.encode=function(r,a,e){for(var i,n=null,t=[],o=0,s=0;a<e;){var c=r[a++];switch(s){case 0:t[o++]=b64[c>>2],i=(3&c)<<4,s=1;break;case 1:t[o++]=b64[i|c>>4],i=(15&c)<<2,s=2;break;case 2:t[o++]=b64[i|c>>6],t[o++]=b64[63&c],s=0}o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,t)),o=0)}return s&&(t[o++]=b64[i],t[o++]=61,1===s&&(t[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,t.slice(0,o))),n.join("")):String.fromCharCode.apply(String,t.slice(0,o))};var invalidEncoding="invalid encoding";base64.decode=function(r,a,e){for(var i,n=e,t=0,o=0;o<r.length;){var s=r.charCodeAt(o++);if(61===s&&t>1)break;if(void 0===(s=s64[s]))throw Error(invalidEncoding);switch(t){case 0:i=s,t=1;break;case 1:a[e++]=i<<2|(48&s)>>4,i=s,t=2;break;case 2:a[e++]=(15&i)<<4|(60&s)>>2,i=s,t=3;break;case 3:a[e++]=(3&i)<<6|s,t=0}}if(1===t)throw Error(invalidEncoding);return e-n},base64.test=function(r){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(r)};

},{}],3:[function(require,module,exports){
"use strict";function codegen(n,r){"string"==typeof n&&(r=n,n=void 0);var e=[];function t(n){if("string"!=typeof n){var r=o();if(codegen.verbose&&console.log("codegen: "+r),r="return "+r,n){for(var i=Object.keys(n),u=new Array(i.length+1),c=new Array(i.length),a=0;a<i.length;)u[a]=i[a],c[a]=n[i[a++]];return u[a]=r,Function.apply(null,u).apply(null,c)}return Function(r)()}for(var g=new Array(arguments.length-1),s=0;s<g.length;)g[s]=arguments[++s];if(s=0,n=n.replace(/%([%dfijs])/g,function(n,r){var e=g[s++];switch(r){case"d":case"f":return String(Number(e));case"i":return String(Math.floor(e));case"j":return JSON.stringify(e);case"s":return String(e)}return"%"}),s!==g.length)throw Error("parameter count mismatch");return e.push(n),t}function o(t){return"function "+(t||r||"")+"("+(n&&n.join(",")||"")+"){\n  "+e.join("\n  ")+"\n}"}return t.toString=o,t}module.exports=codegen,codegen.verbose=!1;

},{}],4:[function(require,module,exports){
"use strict";function EventEmitter(){this._listeners={}}module.exports=EventEmitter,EventEmitter.prototype.on=function(t,e,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:i||this}),this},EventEmitter.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var i=this._listeners[t],s=0;s<i.length;)i[s].fn===e?i.splice(s,1):++s;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var i=[],s=1;s<arguments.length;)i.push(arguments[s++]);for(s=0;s<e.length;)e[s].fn.apply(e[s++].ctx,i)}return this};

},{}],5:[function(require,module,exports){
"use strict";module.exports=fetch;var asPromise=require("@protobufjs/aspromise"),inquire=require("@protobufjs/inquire"),fs=inquire("fs");function fetch(e,r,t){return"function"==typeof r?(t=r,r={}):r||(r={}),t?!r.xhr&&fs&&fs.readFile?fs.readFile(e,function(n,s){return n&&"undefined"!=typeof XMLHttpRequest?fetch.xhr(e,r,t):n?t(n):t(null,r.binary?s:s.toString("utf8"))}):fetch.xhr(e,r,t):asPromise(fetch,this,e,r)}fetch.xhr=function(e,r,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return t(Error("status "+n.status));if(r.binary){var e=n.response;if(!e){e=[];for(var s=0;s<n.responseText.length;++s)e.push(255&n.responseText.charCodeAt(s))}return t(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return t(null,n.responseText)}},r.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()};

},{"@protobufjs/aspromise":1,"@protobufjs/inquire":7}],6:[function(require,module,exports){
"use strict";function factory(n){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),e=new Uint8Array(t.buffer),r=128===e[3];function i(n,r,i){t[0]=n,r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2],r[i+3]=e[3]}function a(n,r,i){t[0]=n,r[i]=e[3],r[i+1]=e[2],r[i+2]=e[1],r[i+3]=e[0]}function o(n,r){return e[0]=n[r],e[1]=n[r+1],e[2]=n[r+2],e[3]=n[r+3],t[0]}function u(n,r){return e[3]=n[r],e[2]=n[r+1],e[1]=n[r+2],e[0]=n[r+3],t[0]}n.writeFloatLE=r?i:a,n.writeFloatBE=r?a:i,n.readFloatLE=r?o:u,n.readFloatBE=r?u:o}():function(){function t(n,t,e,r){var i=t<0?1:0;if(i&&(t=-t),0===t)n(1/t>0?0:2147483648,e,r);else if(isNaN(t))n(2143289344,e,r);else if(t>3.4028234663852886e38)n((i<<31|2139095040)>>>0,e,r);else if(t<1.1754943508222875e-38)n((i<<31|Math.round(t/1.401298464324817e-45))>>>0,e,r);else{var a=Math.floor(Math.log(t)/Math.LN2);n((i<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,e,r)}}function e(n,t,e){var r=n(t,e),i=2*(r>>31)+1,a=r>>>23&255,o=8388607&r;return 255===a?o?NaN:i*(1/0):0===a?1.401298464324817e-45*i*o:i*Math.pow(2,a-150)*(o+8388608)}n.writeFloatLE=t.bind(null,writeUintLE),n.writeFloatBE=t.bind(null,writeUintBE),n.readFloatLE=e.bind(null,readUintLE),n.readFloatBE=e.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),e=new Uint8Array(t.buffer),r=128===e[7];function i(n,r,i){t[0]=n,r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2],r[i+3]=e[3],r[i+4]=e[4],r[i+5]=e[5],r[i+6]=e[6],r[i+7]=e[7]}function a(n,r,i){t[0]=n,r[i]=e[7],r[i+1]=e[6],r[i+2]=e[5],r[i+3]=e[4],r[i+4]=e[3],r[i+5]=e[2],r[i+6]=e[1],r[i+7]=e[0]}function o(n,r){return e[0]=n[r],e[1]=n[r+1],e[2]=n[r+2],e[3]=n[r+3],e[4]=n[r+4],e[5]=n[r+5],e[6]=n[r+6],e[7]=n[r+7],t[0]}function u(n,r){return e[7]=n[r],e[6]=n[r+1],e[5]=n[r+2],e[4]=n[r+3],e[3]=n[r+4],e[2]=n[r+5],e[1]=n[r+6],e[0]=n[r+7],t[0]}n.writeDoubleLE=r?i:a,n.writeDoubleBE=r?a:i,n.readDoubleLE=r?o:u,n.readDoubleBE=r?u:o}():function(){function t(n,t,e,r,i,a){var o=r<0?1:0;if(o&&(r=-r),0===r)n(0,i,a+t),n(1/r>0?0:2147483648,i,a+e);else if(isNaN(r))n(0,i,a+t),n(2146959360,i,a+e);else if(r>1.7976931348623157e308)n(0,i,a+t),n((o<<31|2146435072)>>>0,i,a+e);else{var u;if(r<2.2250738585072014e-308)n((u=r/5e-324)>>>0,i,a+t),n((o<<31|u/4294967296)>>>0,i,a+e);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),n(4503599627370496*(u=r*Math.pow(2,-l))>>>0,i,a+t),n((o<<31|l+1023<<20|1048576*u&1048575)>>>0,i,a+e)}}}function e(n,t,e,r,i){var a=n(r,i+t),o=n(r,i+e),u=2*(o>>31)+1,l=o>>>20&2047,f=4294967296*(1048575&o)+a;return 2047===l?f?NaN:u*(1/0):0===l?5e-324*u*f:u*Math.pow(2,l-1075)*(f+4503599627370496)}n.writeDoubleLE=t.bind(null,writeUintLE,0,4),n.writeDoubleBE=t.bind(null,writeUintBE,4,0),n.readDoubleLE=e.bind(null,readUintLE,0,4),n.readDoubleBE=e.bind(null,readUintBE,4,0)}(),n}function writeUintLE(n,t,e){t[e]=255&n,t[e+1]=n>>>8&255,t[e+2]=n>>>16&255,t[e+3]=n>>>24}function writeUintBE(n,t,e){t[e]=n>>>24,t[e+1]=n>>>16&255,t[e+2]=n>>>8&255,t[e+3]=255&n}function readUintLE(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24)>>>0}function readUintBE(n,t){return(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}module.exports=factory(factory);

},{}],7:[function(require,module,exports){
"use strict";function inquire(e){try{if("function"!=typeof require)return null;var r=require(e);return r&&(r.length||Object.keys(r).length)?r:null}catch(e){return null}}module.exports=inquire;

},{}],8:[function(require,module,exports){
"use strict";var path=exports,isAbsolute=path.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},normalize=path.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=isAbsolute(e),i="";r&&(i=t.shift()+"/");for(var l=0;l<t.length;)".."===t[l]?l>0&&".."!==t[l-1]?t.splice(--l,2):r?t.splice(l,1):++l:"."===t[l]?t.splice(l,1):++l;return i+t.join("/")};path.resolve=function(e,t,r){return r||(t=normalize(t)),isAbsolute(t)?t:(r||(e=normalize(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?normalize(e+"/"+t):t)};

},{}],9:[function(require,module,exports){
"use strict";function pool(r,n,o){var t=o||8192,u=t>>>1,l=null,e=t;return function(o){if(o<1||o>u)return r(o);e+o>t&&(l=r(t),e=0);var c=n.call(l,e,e+=o);return 7&e&&(e=1+(7|e)),c}}module.exports=pool;

},{}],10:[function(require,module,exports){
"use strict";var utf8=exports;utf8.length=function(r){for(var t=0,n=0,e=0;e<r.length;++e)(n=r.charCodeAt(e))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&r.charCodeAt(e+1))?(++e,t+=4):t+=3;return t},utf8.read=function(r,t,n){if(n-t<1)return"";for(var e,o=null,a=[],i=0;t<n;)(e=r[t++])<128?a[i++]=e:e>191&&e<224?a[i++]=(31&e)<<6|63&r[t++]:e>239&&e<365?(e=((7&e)<<18|(63&r[t++])<<12|(63&r[t++])<<6|63&r[t++])-65536,a[i++]=55296+(e>>10),a[i++]=56320+(1023&e)):a[i++]=(15&e)<<12|(63&r[t++])<<6|63&r[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))},utf8.write=function(r,t,n){for(var e,o,a=n,i=0;i<r.length;++i)(e=r.charCodeAt(i))<128?t[n++]=e:e<2048?(t[n++]=e>>6|192,t[n++]=63&e|128):55296==(64512&e)&&56320==(64512&(o=r.charCodeAt(i+1)))?(e=65536+((1023&e)<<10)+(1023&o),++i,t[n++]=e>>18|240,t[n++]=e>>12&63|128,t[n++]=e>>6&63|128,t[n++]=63&e|128):(t[n++]=e>>12|224,t[n++]=e>>6&63|128,t[n++]=63&e|128);return n-a};

},{}],11:[function(require,module,exports){
"use strict";module.exports=require("./src/index");

},{"./src/index":20}],12:[function(require,module,exports){
"use strict";module.exports=common;var timeType,commonRe=/\/|\./;function common(e,t){commonRe.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),common[e]=t}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),common("duration",{Duration:timeType={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),common("timestamp",{Timestamp:timeType}),common("empty",{Empty:{fields:{}}}),common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),common.get=function(e){return common[e]||null};

},{}],13:[function(require,module,exports){
"use strict";var converter=exports,Enum=require("./enum"),util=require("./util");function genValuePartial_fromObject(e,s,t,r){var a=!1;if(s.resolvedType)if(s.resolvedType instanceof Enum){e("switch(d%s){",r);for(var i=s.resolvedType.values,n=Object.keys(i),o=0;o<n.length;++o)i[n[o]]!==s.typeDefault||a||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),s.repeated||e("break"),a=!0),e("case%j:",n[o])("case %i:",i[n[o]])("m%s=%j",r,i[n[o]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",s.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,t,r);else{var l=!1;switch(s.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,l)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function genValuePartial_toObject(e,s,t,r){if(s.resolvedType)s.resolvedType instanceof Enum?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,t,r,r,t,r,r):e("d%s=types[%i].toObject(m%s,o)",r,t,r);else{var a=!1;switch(s.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,a?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}converter.fromObject=function(e){var s=e.fieldsArray,t=util.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!s.length)return t("return new this.ctor");t("var m=new this.ctor");for(var r=0;r<s.length;++r){var a=s[r].resolve(),i=util.safeProp(a.name);a.map?(t("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),genValuePartial_fromObject(t,a,r,i+"[ks[i]]")("}")("}")):a.repeated?(t("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),genValuePartial_fromObject(t,a,r,i+"[i]")("}")("}")):(a.resolvedType instanceof Enum||t("if(d%s!=null){",i),genValuePartial_fromObject(t,a,r,i),a.resolvedType instanceof Enum||t("}"))}return t("return m")},converter.toObject=function(e){var s=e.fieldsArray.slice().sort(util.compareFieldsById);if(!s.length)return util.codegen()("return {}");for(var t=util.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],a=[],i=[],n=0;n<s.length;++n)s[n].partOf||(s[n].resolve().repeated?r:s[n].map?a:i).push(s[n]);if(r.length){for(t("if(o.arrays||o.defaults){"),n=0;n<r.length;++n)t("d%s=[]",util.safeProp(r[n].name));t("}")}if(a.length){for(t("if(o.objects||o.defaults){"),n=0;n<a.length;++n)t("d%s={}",util.safeProp(a[n].name));t("}")}if(i.length){for(t("if(o.defaults){"),n=0;n<i.length;++n){var o=i[n],l=util.safeProp(o.name);if(o.resolvedType instanceof Enum)t("d%s=o.enums===String?%j:%j",l,o.resolvedType.valuesById[o.typeDefault],o.typeDefault);else if(o.long)t("if(util.Long){")("var n=new util.Long(%i,%i,%j)",o.typeDefault.low,o.typeDefault.high,o.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,o.typeDefault.toString(),o.typeDefault.toNumber());else if(o.bytes){var f="["+Array.prototype.slice.call(o.typeDefault).join(",")+"]";t("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,o.typeDefault))("else{")("d%s=%s",l,f)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else t("d%s=%j",l,o.typeDefault)}t("}")}var u=!1;for(n=0;n<s.length;++n){o=s[n];var d=e._fieldsArray.indexOf(o);l=util.safeProp(o.name);o.map?(u||(u=!0,t("var ks2")),t("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),genValuePartial_toObject(t,o,d,l+"[ks2[j]]")("}")):o.repeated?(t("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),genValuePartial_toObject(t,o,d,l+"[j]")("}")):(t("if(m%s!=null&&m.hasOwnProperty(%j)){",l,o.name),genValuePartial_toObject(t,o,d,l),o.partOf&&t("if(o.oneofs)")("d%s=%j",util.safeProp(o.partOf.name),o.name)),t("}")}return t("return d")};

},{"./enum":16,"./util":38}],14:[function(require,module,exports){
"use strict";module.exports=decoder;var Enum=require("./enum"),types=require("./types"),util=require("./util");function missing(e){return"missing required '"+e.name+"'"}function decoder(e){var r=util.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&r("if((t&7)===4)")("break"),r("switch(t>>>3){");for(var s=0;s<e.fieldsArray.length;++s){var t=e._fieldsArray[s].resolve(),i=t.resolvedType instanceof Enum?"int32":t.type,a="m"+util.safeProp(t.name);r("case %i: {",t.id),t.map?(r("if(%s===util.emptyObject)",a)("%s={}",a)("var c2 = r.uint32()+r.pos"),void 0!==types.defaults[t.keyType]?r("k=%j",types.defaults[t.keyType]):r("k=null"),void 0!==types.defaults[i]?r("value=%j",types.defaults[i]):r("value=null"),r("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",t.keyType)("case 2:"),void 0===types.basic[i]?r("value=types[%i].decode(r,r.uint32())",s):r("value=r.%s()",i),r("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==types.long[t.keyType]?r('%s[typeof k==="object"?util.longToHash(k):k]=value',a):r("%s[k]=value",a)):t.repeated?(r("if(!(%s&&%s.length))",a,a)("%s=[]",a),void 0!==types.packed[i]&&r("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",a,i)("}else"),void 0===types.basic[i]?r(t.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",a,s):r("%s.push(r.%s())",a,i)):void 0===types.basic[i]?r(t.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",a,s):r("%s=r.%s()",a,i),r("break")("}")}for(r("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<e._fieldsArray.length;++s){var u=e._fieldsArray[s];u.required&&r("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",missing(u))}return r("return m")}

},{"./enum":16,"./types":37,"./util":38}],15:[function(require,module,exports){
"use strict";module.exports=encoder;var Enum=require("./enum"),types=require("./types"),util=require("./util");function genTypePartial(e,i,r,t){return i.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,t,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,t,(i.id<<3|2)>>>0)}function encoder(e){for(var i,r=util.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),t=e.fieldsArray.slice().sort(util.compareFieldsById),n=0;n<t.length;++n){var s=t[n].resolve(),l=e._fieldsArray.indexOf(s),o=s.resolvedType instanceof Enum?"int32":s.type,d=types.basic[o];i="m"+util.safeProp(s.name),s.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|types.mapKey[s.keyType],s.keyType),void 0===d?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,i):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,o,i),r("}")("}")):s.repeated?(r("if(%s!=null&&%s.length){",i,i),s.packed&&void 0!==types.packed[o]?r("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",o,i)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",i),void 0===d?genTypePartial(r,s,l,i+"[i]"):r("w.uint32(%i).%s(%s[i])",(s.id<<3|d)>>>0,o,i)),r("}")):(s.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,s.name),void 0===d?genTypePartial(r,s,l,i):r("w.uint32(%i).%s(%s)",(s.id<<3|d)>>>0,o,i))}return r("return w")}

},{"./enum":16,"./types":37,"./util":38}],16:[function(require,module,exports){
"use strict";module.exports=Enum;var ReflectionObject=require("./object");((Enum.prototype=Object.create(ReflectionObject.prototype)).constructor=Enum).className="Enum";var Namespace=require("./namespace"),util=require("./util");function Enum(e,t,s,i,r,o){if(ReflectionObject.call(this,e,s),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=r||{},this.valuesOptions=o,this.reserved=void 0,t)for(var n=Object.keys(t),u=0;u<n.length;++u)"number"==typeof t[n[u]]&&(this.valuesById[this.values[n[u]]=t[n[u]]]=n[u])}Enum.fromJSON=function(e,t){var s=new Enum(e,t.values,t.options,t.comment,t.comments);return s.reserved=t.reserved,s},Enum.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return util.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},Enum.prototype.add=function(e,t,s,i){if(!util.isString(e))throw TypeError("name must be a string");if(!util.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return i&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=s||null,this},Enum.prototype.remove=function(e){if(!util.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},Enum.prototype.isReservedId=function(e){return Namespace.isReservedId(this.reserved,e)},Enum.prototype.isReservedName=function(e){return Namespace.isReservedName(this.reserved,e)};

},{"./namespace":24,"./object":25,"./util":38}],17:[function(require,module,exports){
"use strict";module.exports=Field;var ReflectionObject=require("./object");((Field.prototype=Object.create(ReflectionObject.prototype)).constructor=Field).className="Field";var Type,Enum=require("./enum"),types=require("./types"),util=require("./util"),ruleRe=/^required|optional|repeated$/;function Field(t,e,i,s,o,l,n){if(util.isObject(s)?(n=o,l=s,s=o=void 0):util.isObject(o)&&(n=l,l=o,o=void 0),ReflectionObject.call(this,t,l),!util.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!util.isString(i))throw TypeError("type must be a string");if(void 0!==s&&!ruleRe.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!util.isString(o))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:void 0,this.type=i,this.id=e,this.extend=o||void 0,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!util.Long&&void 0!==types.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=n}Field.fromJSON=function(t,e){return new Field(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(Field.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),Field.prototype.setOption=function(t,e,i){return"packed"===t&&(this._packed=null),ReflectionObject.prototype.setOption.call(this,t,e,i)},Field.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return util.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},Field.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=types.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Type?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof Enum&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof Enum)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=util.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;util.base64.test(this.typeDefault)?util.base64.decode(this.typeDefault,t=util.newBuffer(util.base64.length(this.typeDefault)),0):util.utf8.write(this.typeDefault,t=util.newBuffer(util.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=util.emptyObject:this.repeated?this.defaultValue=util.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Type&&(this.parent.ctor.prototype[this.name]=this.defaultValue),ReflectionObject.prototype.resolve.call(this)},Field.d=function(t,e,i,s){return"function"==typeof e?e=util.decorateType(e).name:e&&"object"==typeof e&&(e=util.decorateEnum(e).name),function(o,l){util.decorateType(o.constructor).add(new Field(l,t,e,i,{default:s}))}},Field._configure=function(t){Type=t};

},{"./enum":16,"./object":25,"./types":37,"./util":38}],18:[function(require,module,exports){
"use strict";var protobuf=module.exports=require("./index-minimal");function load(o,e,r){return"function"==typeof e?(r=e,e=new protobuf.Root):e||(e=new protobuf.Root),e.load(o,r)}function loadSync(o,e){return e||(e=new protobuf.Root),e.loadSync(o)}protobuf.build="light",protobuf.load=load,protobuf.loadSync=loadSync,protobuf.encoder=require("./encoder"),protobuf.decoder=require("./decoder"),protobuf.verifier=require("./verifier"),protobuf.converter=require("./converter"),protobuf.ReflectionObject=require("./object"),protobuf.Namespace=require("./namespace"),protobuf.Root=require("./root"),protobuf.Enum=require("./enum"),protobuf.Type=require("./type"),protobuf.Field=require("./field"),protobuf.OneOf=require("./oneof"),protobuf.MapField=require("./mapfield"),protobuf.Service=require("./service"),protobuf.Method=require("./method"),protobuf.Message=require("./message"),protobuf.wrappers=require("./wrappers"),protobuf.types=require("./types"),protobuf.util=require("./util"),protobuf.ReflectionObject._configure(protobuf.Root),protobuf.Namespace._configure(protobuf.Type,protobuf.Service,protobuf.Enum),protobuf.Root._configure(protobuf.Type),protobuf.Field._configure(protobuf.Type);

},{"./converter":13,"./decoder":14,"./encoder":15,"./enum":16,"./field":17,"./index-minimal":19,"./mapfield":21,"./message":22,"./method":23,"./namespace":24,"./object":25,"./oneof":26,"./root":30,"./service":34,"./type":36,"./types":37,"./util":38,"./verifier":41,"./wrappers":42}],19:[function(require,module,exports){
"use strict";var protobuf=exports;function configure(){protobuf.util._configure(),protobuf.Writer._configure(protobuf.BufferWriter),protobuf.Reader._configure(protobuf.BufferReader)}protobuf.build="minimal",protobuf.Writer=require("./writer"),protobuf.BufferWriter=require("./writer_buffer"),protobuf.Reader=require("./reader"),protobuf.BufferReader=require("./reader_buffer"),protobuf.util=require("./util/minimal"),protobuf.rpc=require("./rpc"),protobuf.roots=require("./roots"),protobuf.configure=configure,configure();

},{"./reader":28,"./reader_buffer":29,"./roots":31,"./rpc":32,"./util/minimal":40,"./writer":43,"./writer_buffer":44}],20:[function(require,module,exports){
"use strict";var protobuf=module.exports=require("./index-light");protobuf.build="full",protobuf.tokenize=require("./tokenize"),protobuf.parse=require("./parse"),protobuf.common=require("./common"),protobuf.Root._configure(protobuf.Type,protobuf.parse,protobuf.common);

},{"./common":12,"./index-light":18,"./parse":27,"./tokenize":35}],21:[function(require,module,exports){
"use strict";module.exports=MapField;var Field=require("./field");((MapField.prototype=Object.create(Field.prototype)).constructor=MapField).className="MapField";var types=require("./types"),util=require("./util");function MapField(e,t,i,o,r,p){if(Field.call(this,e,t,o,void 0,void 0,r,p),!util.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}MapField.fromJSON=function(e,t){return new MapField(e,t.id,t.keyType,t.type,t.options,t.comment)},MapField.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return util.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},MapField.prototype.resolve=function(){if(this.resolved)return this;if(void 0===types.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return Field.prototype.resolve.call(this)},MapField.d=function(e,t,i){return"function"==typeof i?i=util.decorateType(i).name:i&&"object"==typeof i&&(i=util.decorateEnum(i).name),function(o,r){util.decorateType(o.constructor).add(new MapField(r,e,t,i))}};

},{"./field":17,"./types":37,"./util":38}],22:[function(require,module,exports){
"use strict";module.exports=Message;var util=require("./util/minimal");function Message(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)this[t[i]]=e[t[i]]}Message.create=function(e){return this.$type.create(e)},Message.encode=function(e,t){return this.$type.encode(e,t)},Message.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},Message.decode=function(e){return this.$type.decode(e)},Message.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},Message.verify=function(e){return this.$type.verify(e)},Message.fromObject=function(e){return this.$type.fromObject(e)},Message.toObject=function(e,t){return this.$type.toObject(e,t)},Message.prototype.toJSON=function(){return this.$type.toObject(this,util.toJSONOptions)};

},{"./util/minimal":40}],23:[function(require,module,exports){
"use strict";module.exports=Method;var ReflectionObject=require("./object");((Method.prototype=Object.create(ReflectionObject.prototype)).constructor=Method).className="Method";var util=require("./util");function Method(e,t,s,o,r,i,p,n,h){if(util.isObject(r)?(p=r,r=i=void 0):util.isObject(i)&&(p=i,i=void 0),void 0!==t&&!util.isString(t))throw TypeError("type must be a string");if(!util.isString(s))throw TypeError("requestType must be a string");if(!util.isString(o))throw TypeError("responseType must be a string");ReflectionObject.call(this,e,p),this.type=t||"rpc",this.requestType=s,this.requestStream=!!r||void 0,this.responseType=o,this.responseStream=!!i||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=n,this.parsedOptions=h}Method.fromJSON=function(e,t){return new Method(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},Method.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return util.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},Method.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),ReflectionObject.prototype.resolve.call(this))};

},{"./object":25,"./util":38}],24:[function(require,module,exports){
"use strict";module.exports=Namespace;var ReflectionObject=require("./object");((Namespace.prototype=Object.create(ReflectionObject.prototype)).constructor=Namespace).className="Namespace";var Type,Service,Enum,Field=require("./field"),util=require("./util"),OneOf=require("./oneof");function arrayToJSON(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function Namespace(e,t){ReflectionObject.call(this,e,t),this.nested=void 0,this._nestedArray=null}function clearCache(e){return e._nestedArray=null,e}Namespace.fromJSON=function(e,t){return new Namespace(e,t.options).addJSON(t.nested)},Namespace.arrayToJSON=arrayToJSON,Namespace.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},Namespace.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(Namespace.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=util.toArray(this.nested))}}),Namespace.prototype.toJSON=function(e){return util.toObject(["options",this.options,"nested",arrayToJSON(this.nestedArray,e)])},Namespace.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?Type.fromJSON:void 0!==t.values?Enum.fromJSON:void 0!==t.methods?Service.fromJSON:void 0!==t.id?Field.fromJSON:Namespace.fromJSON)(r[n],t));return this},Namespace.prototype.get=function(e){return this.nested&&this.nested[e]||null},Namespace.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Enum)return this.nested[e].values;throw Error("no such enum: "+e)},Namespace.prototype.add=function(e){if(!(e instanceof Field&&void 0!==e.extend||e instanceof Type||e instanceof OneOf||e instanceof Enum||e instanceof Service||e instanceof Namespace))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof Namespace&&e instanceof Namespace)||t instanceof Type||t instanceof Service)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),clearCache(this)},Namespace.prototype.remove=function(e){if(!(e instanceof ReflectionObject))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),clearCache(this)},Namespace.prototype.define=function(e,t){if(util.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof Namespace))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Namespace(n))}return t&&r.addJSON(t),r},Namespace.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof Namespace?e[t++].resolveAll():e[t++].resolve();return this.resolve()},Namespace.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),util.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof Namespace&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof Namespace&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},Namespace.prototype.lookupType=function(e){var t=this.lookup(e,[Type]);if(!t)throw Error("no such type: "+e);return t},Namespace.prototype.lookupEnum=function(e){var t=this.lookup(e,[Enum]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},Namespace.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[Type,Enum]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},Namespace.prototype.lookupService=function(e){var t=this.lookup(e,[Service]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},Namespace._configure=function(e,t,r){Type=e,Service=t,Enum=r};

},{"./field":17,"./object":25,"./oneof":26,"./util":38}],25:[function(require,module,exports){
"use strict";module.exports=ReflectionObject,ReflectionObject.className="ReflectionObject";var Root,util=require("./util");function ReflectionObject(t,e){if(!util.isString(t))throw TypeError("name must be a string");if(e&&!util.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(ReflectionObject.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),ReflectionObject.prototype.toJSON=function(){throw Error()},ReflectionObject.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof Root&&e._handleAdd(this)},ReflectionObject.prototype.onRemove=function(t){var e=t.root;e instanceof Root&&e._handleRemove(this),this.parent=null,this.resolved=!1},ReflectionObject.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Root&&(this.resolved=!0),this)},ReflectionObject.prototype.getOption=function(t){if(this.options)return this.options[t]},ReflectionObject.prototype.setOption=function(t,e,o){return o&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},ReflectionObject.prototype.setParsedOption=function(t,e,o){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(o){var n=i.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)});if(n){var r=n[t];util.setProperty(r,o,e)}else(n={})[t]=util.setProperty({},o,e),i.push(n)}else{var s={};s[t]=e,i.push(s)}return this},ReflectionObject.prototype.setOptions=function(t,e){if(t)for(var o=Object.keys(t),i=0;i<o.length;++i)this.setOption(o[i],t[o[i]],e);return this},ReflectionObject.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},ReflectionObject._configure=function(t){Root=t};

},{"./util":38}],26:[function(require,module,exports){
"use strict";module.exports=OneOf;var ReflectionObject=require("./object");((OneOf.prototype=Object.create(ReflectionObject.prototype)).constructor=OneOf).className="OneOf";var Field=require("./field"),util=require("./util");function OneOf(e,t,r,o){if(Array.isArray(t)||(r=t,t=void 0),ReflectionObject.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=o}function addFieldsToParent(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}OneOf.fromJSON=function(e,t){return new OneOf(e,t.oneof,t.options,t.comment)},OneOf.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return util.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},OneOf.prototype.add=function(e){if(!(e instanceof Field))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,addFieldsToParent(this),this},OneOf.prototype.remove=function(e){if(!(e instanceof Field))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},OneOf.prototype.onAdd=function(e){ReflectionObject.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}addFieldsToParent(this)},OneOf.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);ReflectionObject.prototype.onRemove.call(this,e)},OneOf.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){util.decorateType(t.constructor).add(new OneOf(r,e)),Object.defineProperty(t,r,{get:util.oneOfGetter(e),set:util.oneOfSetter(e)})}};

},{"./field":17,"./object":25,"./util":38}],27:[function(require,module,exports){
"use strict";module.exports=parse,parse.filename=null,parse.defaults={keepCase:!1};var tokenize=require("./tokenize"),Root=require("./root"),Type=require("./type"),Field=require("./field"),MapField=require("./mapfield"),OneOf=require("./oneof"),Enum=require("./enum"),Service=require("./service"),Method=require("./method"),types=require("./types"),util=require("./util"),base10Re=/^[1-9][0-9]*$/,base10NegRe=/^-?[1-9][0-9]*$/,base16Re=/^0[x][0-9a-fA-F]+$/,base16NegRe=/^-?0[x][0-9a-fA-F]+$/,base8Re=/^0[0-7]+$/,base8NegRe=/^-?0[0-7]+$/,numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,nameRe=/^[a-zA-Z_][a-zA-Z_0-9]*$/,typeRefRe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,fqTypeRefRe=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(e,t,r){t instanceof Root||(r=t,t=new Root),r||(r=parse.defaults);var n,a,i,o,s,f=r.preferTrailingComment||!1,c=tokenize(e,r.alternateCommentMode||!1),u=c.next,p=c.push,l=c.peek,d=c.skip,m=c.cmnt,h=!0,w=!1,v=t,R=r.keepCase?function(e){return e}:util.camelCase;function b(e,t,r){var n=parse.filename;return r||(parse.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+c.line+")")}function k(){var e,t=[];do{if('"'!==(e=u())&&"'"!==e)throw b(e);t.push(u()),d(e),e=l()}while('"'===e||"'"===e);return t.join("")}function y(e){var t=u();switch(t){case"'":case'"':return p(t),k();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;"-"===e.charAt(0)&&(r=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(base10Re.test(e))return r*parseInt(e,10);if(base16Re.test(e))return r*parseInt(e,16);if(base8Re.test(e))return r*parseInt(e,8);if(numberRe.test(e))return r*parseFloat(e);throw b(e,"number",t)}(t,!0)}catch(r){if(e&&typeRefRe.test(t))return t;throw b(t,"value")}}function g(e,t){var r,n;do{!t||'"'!==(r=l())&&"'"!==r?e.push([n=q(u()),d("to",!0)?q(u()):n]):e.push(k())}while(d(",",!0));d(";")}function q(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw b(e,"id");if(base10NegRe.test(e))return parseInt(e,10);if(base16NegRe.test(e))return parseInt(e,16);if(base8NegRe.test(e))return parseInt(e,8);throw b(e,"id")}function A(){if(void 0!==n)throw b("package");if(n=u(),!typeRefRe.test(n))throw b(n,"name");v=v.define(n),d(";")}function N(){var e,t=l();switch(t){case"weak":e=i||(i=[]),u();break;case"public":u();default:e=a||(a=[])}t=k(),d(";"),e.push(t)}function _(){if(d("="),o=k(),!(w="proto3"===o)&&"proto2"!==o)throw b(o,"syntax");d(";")}function x(e,t){switch(t){case"option":return I(e,t),d(";"),!0;case"message":return F(e,t),!0;case"enum":return $(e,t),!0;case"service":return function(e,t){if(!nameRe.test(t=u()))throw b(t,"service name");var r=new Service(t);O(r,function(e){if(!x(r,e)){if("rpc"!==e)throw b(e);!function(e,t){var r=m(),n=t;if(!nameRe.test(t=u()))throw b(t,"name");var a,i,o,s,f=t;d("("),d("stream",!0)&&(i=!0);if(!typeRefRe.test(t=u()))throw b(t);a=t,d(")"),d("returns"),d("("),d("stream",!0)&&(s=!0);if(!typeRefRe.test(t=u()))throw b(t);o=t,d(")");var c=new Method(f,n,a,o,i,s);c.comment=r,O(c,function(e){if("option"!==e)throw b(e);I(c,e),d(";")}),e.add(c)}(r,e)}}),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!typeRefRe.test(t=u()))throw b(t,"reference");var r=t;O(null,function(t){switch(t){case"required":case"repeated":z(e,t,r);break;case"optional":z(e,w?"proto3_optional":"optional",r);break;default:if(!w||!typeRefRe.test(t))throw b(t);p(t),z(e,"optional",r)}})}(e,t),!0}return!1}function O(e,t,r){var n=c.line;if(e&&("string"!=typeof e.comment&&(e.comment=m()),e.filename=parse.filename),d("{",!0)){for(var a;"}"!==(a=u());)t(a);d(";",!0)}else r&&r(),d(";"),e&&("string"!=typeof e.comment||f)&&(e.comment=m(n)||e.comment)}function F(e,t){if(!nameRe.test(t=u()))throw b(t,"type name");var r=new Type(t);O(r,function(e){if(!x(r,e))switch(e){case"map":!function(e){d("<");var t=u();if(void 0===types.mapKey[t])throw b(t,"type");d(",");var r=u();if(!typeRefRe.test(r))throw b(r,"type");d(">");var n=u();if(!nameRe.test(n))throw b(n,"name");d("=");var a=new MapField(R(n),q(u()),t,r);O(a,function(e){if("option"!==e)throw b(e);I(a,e),d(";")},function(){M(a)}),e.add(a)}(r);break;case"required":case"repeated":z(r,e);break;case"optional":z(r,w?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!nameRe.test(t=u()))throw b(t,"name");var r=new OneOf(R(t));O(r,function(e){"option"===e?(I(r,e),d(";")):(p(e),z(r,"optional"))}),e.add(r)}(r,e);break;case"extensions":g(r.extensions||(r.extensions=[]));break;case"reserved":g(r.reserved||(r.reserved=[]),!0);break;default:if(!w||!typeRefRe.test(e))throw b(e);p(e),z(r,"optional")}}),e.add(r)}function z(e,t,r){var n=u();if("group"!==n){for(;n.endsWith(".")||l().startsWith(".");)n+=u();if(!typeRefRe.test(n))throw b(n,"type");var a=u();if(!nameRe.test(a))throw b(a,"name");a=R(a),d("=");var i=new Field(a,q(u()),n,t,r);if(O(i,function(e){if("option"!==e)throw b(e);I(i,e),d(";")},function(){M(i)}),"proto3_optional"===t){var o=new OneOf("_"+a);i.setOption("proto3_optional",!0),o.add(i),e.add(o)}else e.add(i);w||!i.repeated||void 0===types.packed[n]&&void 0!==types.basic[n]||i.setOption("packed",!1,!0)}else!function(e,t){var r=u();if(!nameRe.test(r))throw b(r,"name");var n=util.lcFirst(r);r===n&&(r=util.ucFirst(r));d("=");var a=q(u()),i=new Type(r);i.group=!0;var o=new Field(n,a,r,t);o.filename=parse.filename,O(i,function(e){switch(e){case"option":I(i,e),d(";");break;case"required":case"repeated":z(i,e);break;case"optional":z(i,w?"proto3_optional":"optional");break;case"message":F(i,e);break;case"enum":$(i,e);break;default:throw b(e)}}),e.add(i).add(o)}(e,t)}function $(e,t){if(!nameRe.test(t=u()))throw b(t,"name");var r=new Enum(t);O(r,function(e){switch(e){case"option":I(r,e),d(";");break;case"reserved":g(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!nameRe.test(t))throw b(t,"name");d("=");var r=q(u(),!0),n={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};O(n,function(e){if("option"!==e)throw b(e);I(n,e),d(";")},function(){M(n)}),e.add(t,r,n.comment,n.options)}(r,e)}}),e.add(r)}function I(e,t){var r=d("(",!0);if(!typeRefRe.test(t=u()))throw b(t,"name");var n,a=t,i=a;r&&(d(")"),i=a="("+a+")",t=l(),fqTypeRefRe.test(t)&&(n=t.slice(1),a+=t,u())),d("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,i,Z(e,a),n)}function Z(e,t){if(d("{",!0)){for(var r={};!d("}",!0);){if(!nameRe.test(s=u()))throw b(s,"name");if(null===s)throw b(s,"end of input");var n,a=s;if(d(":",!0),"{"===l())n=Z(e,t+"."+s);else if("["===l()){var i;if(n=[],d("[",!0)){do{i=y(!0),n.push(i)}while(d(",",!0));d("]"),void 0!==i&&E(e,t+"."+s,i)}}else n=y(!0),E(e,t+"."+s,n);var o=r[a];o&&(n=[].concat(o).concat(n)),r[a]=n,d(",",!0),d(";",!0)}return r}var f=y(!0);return E(e,t,f),f}function E(e,t,r){e.setOption&&e.setOption(t,r)}function M(e){if(d("[",!0)){do{I(e,"option")}while(d(",",!0));d("]")}return e}for(;null!==(s=u());)switch(s){case"package":if(!h)throw b(s);A();break;case"import":if(!h)throw b(s);N();break;case"syntax":if(!h)throw b(s);_();break;case"option":I(v,s),d(";");break;default:if(x(v,s)){h=!1;continue}throw b(s)}return parse.filename=null,{package:n,imports:a,weakImports:i,syntax:o,root:t}}

},{"./enum":16,"./field":17,"./mapfield":21,"./method":23,"./oneof":26,"./root":30,"./service":34,"./tokenize":35,"./type":36,"./types":37,"./util":38}],28:[function(require,module,exports){
"use strict";module.exports=Reader;var BufferReader,util=require("./util/minimal"),LongBits=util.LongBits,utf8=util.utf8;function indexOutOfRange(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function Reader(t){this.buf=t,this.pos=0,this.len=t.length}var create_array="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")},create=function(){return util.Buffer?function(t){return(Reader.create=function(t){return util.Buffer.isBuffer(t)?new BufferReader(t):create_array(t)})(t)}:create_array};function readLongVarint(){var t=new LongBits(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function readFixed32_end(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create(),Reader.prototype._slice=util.Array.prototype.subarray||util.Array.prototype.slice,Reader.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}(),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw indexOutOfRange(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(i,e);if(i===e){var r=util.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,i,e)},Reader.prototype.string=function(){var t=this.bytes();return utf8.read(t,0,t.length)},Reader.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},Reader._configure=function(t){BufferReader=t,Reader.create=create(),BufferReader._configure();var i=util.Long?"toLong":"toNumber";util.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[i](!1)},uint64:function(){return readLongVarint.call(this)[i](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[i](!1)},fixed64:function(){return readFixed64.call(this)[i](!0)},sfixed64:function(){return readFixed64.call(this)[i](!1)}})};

},{"./util/minimal":40}],29:[function(require,module,exports){
"use strict";module.exports=BufferReader;var Reader=require("./reader");(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util=require("./util/minimal");function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util.Buffer&&(BufferReader.prototype._slice=util.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();

},{"./reader":28,"./util/minimal":40}],30:[function(require,module,exports){
"use strict";module.exports=Root;var Namespace=require("./namespace");((Root.prototype=Object.create(Namespace.prototype)).constructor=Root).className="Root";var Type,parse,common,Field=require("./field"),Enum=require("./enum"),OneOf=require("./oneof"),util=require("./util");function Root(e){Namespace.call(this,"",e),this.deferred=[],this.files=[]}function SYNC(){}Root.fromJSON=function(e,t){return t||(t=new Root),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},Root.prototype.resolvePath=util.path.resolve,Root.prototype.fetch=util.fetch,Root.prototype.load=function e(t,o,n){"function"==typeof o&&(n=o,o=void 0);var r=this;if(!n)return util.asPromise(e,r,t,o);var i=n===SYNC;function s(e,t){if(n){var o=n;if(n=null,i)throw e;o(e,t)}}function a(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var o=e.substring(t);if(o in common)return o}return null}function l(e,t){try{if(util.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),util.isString(t)){parse.filename=e;var n,l=parse(t,r,o),p=0;if(l.imports)for(;p<l.imports.length;++p)(n=a(l.imports[p])||r.resolvePath(e,l.imports[p]))&&f(n);if(l.weakImports)for(p=0;p<l.weakImports.length;++p)(n=a(l.weakImports[p])||r.resolvePath(e,l.weakImports[p]))&&f(n,!0)}else r.setOptions(t.options).addJSON(t.nested)}catch(e){s(e)}i||d||s(null,r)}function f(e,t){if(e=a(e)||e,!(r.files.indexOf(e)>-1))if(r.files.push(e),e in common)i?l(e,common[e]):(++d,setTimeout(function(){--d,l(e,common[e])}));else if(i){var o;try{o=util.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||s(e))}l(e,o)}else++d,r.fetch(e,function(o,i){--d,n&&(o?t?d||s(null,r):s(o):l(e,i))})}var d=0;util.isString(t)&&(t=[t]);for(var p,u=0;u<t.length;++u)(p=r.resolvePath("",t[u]))&&f(p);if(i)return r;d||s(null,r)},Root.prototype.loadSync=function(e,t){if(!util.isNode)throw Error("not supported");return this.load(e,t,SYNC)},Root.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Namespace.prototype.resolveAll.call(this)};var exposeRe=/^[A-Z]/;function tryHandleExtension(e,t){var o=t.parent.lookup(t.extend);if(o){var n=new Field(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!o.get(n.name)||(n.declaringField=t,t.extensionField=n,o.add(n),!0)}return!1}Root.prototype._handleAdd=function(e){if(e instanceof Field)void 0===e.extend||e.extensionField||tryHandleExtension(this,e)||this.deferred.push(e);else if(e instanceof Enum)exposeRe.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof OneOf)){if(e instanceof Type)for(var t=0;t<this.deferred.length;)tryHandleExtension(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var o=0;o<e.nestedArray.length;++o)this._handleAdd(e._nestedArray[o]);exposeRe.test(e.name)&&(e.parent[e.name]=e)}},Root.prototype._handleRemove=function(e){if(e instanceof Field){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof Enum)exposeRe.test(e.name)&&delete e.parent[e.name];else if(e instanceof Namespace){for(var o=0;o<e.nestedArray.length;++o)this._handleRemove(e._nestedArray[o]);exposeRe.test(e.name)&&delete e.parent[e.name]}},Root._configure=function(e,t,o){Type=e,parse=t,common=o};

},{"./enum":16,"./field":17,"./namespace":24,"./oneof":26,"./util":38}],31:[function(require,module,exports){
"use strict";module.exports={};

},{}],32:[function(require,module,exports){
"use strict";var rpc=exports;rpc.Service=require("./rpc/service");

},{"./rpc/service":33}],33:[function(require,module,exports){
"use strict";module.exports=Service;var util=require("../util/minimal");function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,i,n,o){if(!n)throw TypeError("request must be specified");var l=this;if(!o)return util.asPromise(e,l,t,r,i,n);if(l.rpcImpl)try{return l.rpcImpl(t,r[l.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(e,r){if(e)return l.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[l.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return l.emit("error",e,t),o(e)}return l.emit("data",r,t),o(null,r)}l.end(!0)})}catch(e){return l.emit("error",e,t),void setTimeout(function(){o(e)},0)}else setTimeout(function(){o(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};

},{"../util/minimal":40}],34:[function(require,module,exports){
"use strict";module.exports=Service;var Namespace=require("./namespace");((Service.prototype=Object.create(Namespace.prototype)).constructor=Service).className="Service";var Method=require("./method"),util=require("./util"),rpc=require("./rpc");function Service(e,t){Namespace.call(this,e,t),this.methods={},this._methodsArray=null}function clearCache(e){return e._methodsArray=null,e}Service.fromJSON=function(e,t){var r=new Service(e,t.options);if(t.methods)for(var o=Object.keys(t.methods),s=0;s<o.length;++s)r.add(Method.fromJSON(o[s],t.methods[o[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},Service.prototype.toJSON=function(e){var t=Namespace.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return util.toObject(["options",t&&t.options||void 0,"methods",Namespace.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(Service.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=util.toArray(this.methods))}}),Service.prototype.get=function(e){return this.methods[e]||Namespace.prototype.get.call(this,e)},Service.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return Namespace.prototype.resolve.call(this)},Service.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Method?(this.methods[e.name]=e,e.parent=this,clearCache(this)):Namespace.prototype.add.call(this,e)},Service.prototype.remove=function(e){if(e instanceof Method){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,clearCache(this)}return Namespace.prototype.remove.call(this,e)},Service.prototype.create=function(e,t,r){for(var o,s=new rpc.Service(e,t,r),i=0;i<this.methodsArray.length;++i){var a=util.lcFirst((o=this._methodsArray[i]).resolve().name).replace(/[^$\w_]/g,"");s[a]=util.codegen(["r","c"],util.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return s};

},{"./method":23,"./namespace":24,"./rpc":32,"./util":38}],35:[function(require,module,exports){
"use strict";module.exports=tokenize;var delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentAltRe=/^\s*\*?\/*/,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:"\n",t:"\t"};function unescape(e){return e.replace(unescapeRe,function(e,t){switch(t){case"\\":case"":return t;default:return unescapeMap[t]||""}})}function tokenize(e,t){e=e.toString();var n=0,r=e.length,i=1,l=0,u={},s=[],o=null;function a(e){return Error("illegal "+e+" (line "+i+")")}function f(t){return e.charAt(t)}function c(n,r,s){var o,a={type:e.charAt(n++),lineEmpty:!1,leading:s},f=n-(t?2:3);do{if(--f<0||"\n"===(o=e.charAt(f))){a.lineEmpty=!0;break}}while(" "===o||"\t"===o);for(var c=e.substring(n,r).split(setCommentSplitRe),p=0;p<c.length;++p)c[p]=c[p].replace(t?setCommentAltRe:setCommentRe,"").trim();a.text=c.join("\n").trim(),u[i]=a,l=i}function p(t){var n=m(t),r=e.substring(t,n);return/^\s*\/\//.test(r)}function m(e){for(var t=e;t<r&&"\n"!==f(t);)t++;return t}function g(){if(s.length>0)return s.shift();if(o)return function(){var t="'"===o?stringSingleRe:stringDoubleRe;t.lastIndex=n-1;var r=t.exec(e);if(!r)throw a("string");return n=t.lastIndex,h(o),o=null,unescape(r[1])}();var l,u,g,d,R,v=0===n;do{if(n===r)return null;for(l=!1;whitespaceRe.test(g=f(n));)if("\n"===g&&(v=!0,++i),++n===r)return null;if("/"===f(n)){if(++n===r)throw a("comment");if("/"===f(n))if(t){if(d=n,R=!1,p(n-1)){R=!0;do{if((n=m(n))===r)break;if(n++,!v)break}while(p(n))}else n=Math.min(r,m(n)+1);R&&(c(d,n,v),v=!0),i++,l=!0}else{for(R="/"===f(d=n+1);"\n"!==f(++n);)if(n===r)return null;++n,R&&(c(d,n-1,v),v=!0),++i,l=!0}else{if("*"!==(g=f(n)))return"/";d=n+1,R=t||"*"===f(d);do{if("\n"===g&&++i,++n===r)throw a("comment");u=g,g=f(n)}while("*"!==u||"/"!==g);++n,R&&(c(d,n-2,v),v=!0),l=!0}}}while(l);var w=n;if(delimRe.lastIndex=0,!delimRe.test(f(w++)))for(;w<r&&!delimRe.test(f(w));)++w;var x=e.substring(n,n=w);return'"'!==x&&"'"!==x||(o=x),x}function h(e){s.push(e)}function d(){if(!s.length){var e=g();if(null===e)return null;h(e)}return s[0]}return Object.defineProperty({next:g,peek:d,push:h,skip:function(e,t){var n=d();if(n===e)return g(),!0;if(!t)throw a("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var n,r=null;return void 0===e?(n=u[i-1],delete u[i-1],n&&(t||"*"===n.type||n.lineEmpty)&&(r=n.leading?n.text:null)):(l<e&&d(),n=u[e],delete u[e],!n||n.lineEmpty||!t&&"/"!==n.type||(r=n.leading?null:n.text)),r}},"line",{get:function(){return i}})}tokenize.unescape=unescape;

},{}],36:[function(require,module,exports){
"use strict";module.exports=Type;var Namespace=require("./namespace");((Type.prototype=Object.create(Namespace.prototype)).constructor=Type).className="Type";var Enum=require("./enum"),OneOf=require("./oneof"),Field=require("./field"),MapField=require("./mapfield"),Service=require("./service"),Message=require("./message"),Reader=require("./reader"),Writer=require("./writer"),util=require("./util"),encoder=require("./encoder"),decoder=require("./decoder"),verifier=require("./verifier"),converter=require("./converter"),wrappers=require("./wrappers");function Type(e,t){Namespace.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function clearCache(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(Type.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],i=r.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=util.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=util.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Type.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof Message||((e.prototype=new Message).constructor=e,util.merge(e.prototype,t)),e.$type=e.prototype.$type=this,util.merge(e,Message,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var i={};for(r=0;r<this.oneofsArray.length;++r)i[this._oneofsArray[r].resolve().name]={get:util.oneOfGetter(this._oneofsArray[r].oneof),set:util.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,i)}}}),Type.generateConstructor=function(e){for(var t,r=util.codegen(["p"],e.name),i=0;i<e.fieldsArray.length;++i)(t=e._fieldsArray[i]).map?r("this%s={}",util.safeProp(t.name)):t.repeated&&r("this%s=[]",util.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},Type.fromJSON=function(e,t){var r=new Type(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var i=Object.keys(t.fields),s=0;s<i.length;++s)r.add((void 0!==t.fields[i[s]].keyType?MapField.fromJSON:Field.fromJSON)(i[s],t.fields[i[s]]));if(t.oneofs)for(i=Object.keys(t.oneofs),s=0;s<i.length;++s)r.add(OneOf.fromJSON(i[s],t.oneofs[i[s]]));if(t.nested)for(i=Object.keys(t.nested),s=0;s<i.length;++s){var o=t.nested[i[s]];r.add((void 0!==o.id?Field.fromJSON:void 0!==o.fields?Type.fromJSON:void 0!==o.values?Enum.fromJSON:void 0!==o.methods?Service.fromJSON:Namespace.fromJSON)(i[s],o))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},Type.prototype.toJSON=function(e){var t=Namespace.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return util.toObject(["options",t&&t.options||void 0,"oneofs",Namespace.arrayToJSON(this.oneofsArray,e),"fields",Namespace.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Type.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return Namespace.prototype.resolveAll.call(this)},Type.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},Type.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Field&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),clearCache(this)}return e instanceof OneOf?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),clearCache(this)):Namespace.prototype.add.call(this,e)},Type.prototype.remove=function(e){if(e instanceof Field&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),clearCache(this)}if(e instanceof OneOf){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),clearCache(this)}return Namespace.prototype.remove.call(this,e)},Type.prototype.isReservedId=function(e){return Namespace.isReservedId(this.reserved,e)},Type.prototype.isReservedName=function(e){return Namespace.isReservedName(this.reserved,e)},Type.prototype.create=function(e){return new this.ctor(e)},Type.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=encoder(this)({Writer:Writer,types:t,util:util}),this.decode=decoder(this)({Reader:Reader,types:t,util:util}),this.verify=verifier(this)({types:t,util:util}),this.fromObject=converter.fromObject(this)({types:t,util:util}),this.toObject=converter.toObject(this)({types:t,util:util});var i=wrappers[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this},Type.prototype.encode=function(e,t){return this.setup().encode(e,t)},Type.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},Type.prototype.decode=function(e,t){return this.setup().decode(e,t)},Type.prototype.decodeDelimited=function(e){return e instanceof Reader||(e=Reader.create(e)),this.decode(e,e.uint32())},Type.prototype.verify=function(e){return this.setup().verify(e)},Type.prototype.fromObject=function(e){return this.setup().fromObject(e)},Type.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},Type.d=function(e){return function(t){util.decorateType(t,e)}};

},{"./converter":13,"./decoder":14,"./encoder":15,"./enum":16,"./field":17,"./mapfield":21,"./message":22,"./namespace":24,"./oneof":26,"./reader":28,"./service":34,"./util":38,"./verifier":41,"./wrappers":42,"./writer":43}],37:[function(require,module,exports){
"use strict";var types=exports,util=require("./util"),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function bake(e,t){var i=0,a={};for(t|=0;i<e.length;)a[s[i+t]]=e[i++];return a}types.basic=bake([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),types.defaults=bake([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",util.emptyArray,null]),types.long=bake([0,0,0,1,1],7),types.mapKey=bake([0,0,0,5,5,0,0,0,1,1,0,2],2),types.packed=bake([1,5,0,0,0,5,5,0,0,0,1,1,0]);

},{"./util":38}],38:[function(require,module,exports){
"use strict";var Type,Enum,util=module.exports=require("./util/minimal"),roots=require("./roots");util.codegen=require("@protobufjs/codegen"),util.fetch=require("@protobufjs/fetch"),util.path=require("@protobufjs/path"),util.fs=util.inquire("fs"),util.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),o=0;o<t.length;)r[o]=e[t[o++]];return r}return[]},util.toObject=function(e){for(var t={},r=0;r<e.length;){var o=e[r++],u=e[r++];void 0!==u&&(t[o]=u)}return t};var safePropBackslashRe=/\\/g,safePropQuoteRe=/"/g;util.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},util.safeProp=function(e){return!/^[$\w_]+$/.test(e)||util.isReserved(e)?'["'+e.replace(safePropBackslashRe,"\\\\").replace(safePropQuoteRe,'\\"')+'"]':"."+e},util.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var camelCaseRe=/_([a-z])/g;util.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(camelCaseRe,function(e,t){return t.toUpperCase()})},util.compareFieldsById=function(e,t){return e.id-t.id},util.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(util.decorateRoot.remove(e.$type),e.$type.name=t,util.decorateRoot.add(e.$type)),e.$type;Type||(Type=require("./type"));var r=new Type(t||e.name);return util.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var decorateEnumIndex=0;util.decorateEnum=function(e){if(e.$type)return e.$type;Enum||(Enum=require("./enum"));var t=new Enum("Enum"+decorateEnumIndex++,e);return util.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},util.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,o){var u=r.shift();if("__proto__"===u||"prototype"===u)return t;if(r.length>0)t[u]=e(t[u]||{},r,o);else{var n=t[u];n&&(o=[].concat(n).concat(o)),t[u]=o}return t}(e,t=t.split("."),r)},Object.defineProperty(util,"decorateRoot",{get:function(){return roots.decorated||(roots.decorated=new(require("./root")))}});

},{"./enum":16,"./root":30,"./roots":31,"./type":36,"./util/minimal":40,"@protobufjs/codegen":3,"@protobufjs/fetch":5,"@protobufjs/path":8}],39:[function(require,module,exports){
"use strict";module.exports=LongBits;var util=require("../util/minimal");function LongBits(t,o){this.lo=t>>>0,this.hi=o>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(t){if(0===t)return zero;var o=t<0;o&&(t=-t);var i=t>>>0,r=(t-i)/4294967296>>>0;return o&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new LongBits(i,r)},LongBits.from=function(t){if("number"==typeof t)return LongBits.fromNumber(t);if(util.isString(t)){if(!util.Long)return LongBits.fromNumber(parseInt(t,10));t=util.Long.fromString(t)}return t.low||t.high?new LongBits(t.low>>>0,t.high>>>0):zero},LongBits.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var o=1+~this.lo>>>0,i=~this.hi>>>0;return o||(i=i+1>>>0),-(o+4294967296*i)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(t){return util.Long?new util.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(t){return t===zeroHash?zero:new LongBits((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},LongBits.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},LongBits.prototype.length=function(){var t=this.lo,o=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===o?t<16384?t<128?1:2:t<2097152?3:4:o<16384?o<128?5:6:o<2097152?7:8:i<128?9:10};

},{"../util/minimal":40}],40:[function(require,module,exports){
(function (global){(function (){
"use strict";var util=exports;function merge(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)void 0!==e[i[n]]&&r||(e[i[n]]=t[i[n]]);return e}function newError(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&merge(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}util.asPromise=require("@protobufjs/aspromise"),util.base64=require("@protobufjs/base64"),util.EventEmitter=require("@protobufjs/eventemitter"),util.float=require("@protobufjs/float"),util.inquire=require("@protobufjs/inquire"),util.utf8=require("@protobufjs/utf8"),util.pool=require("@protobufjs/pool"),util.LongBits=require("./longbits"),util.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),util.global=util.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,util.emptyArray=Object.freeze?Object.freeze([]):[],util.emptyObject=Object.freeze?Object.freeze({}):{},util.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},util.isString=function(e){return"string"==typeof e||e instanceof String},util.isObject=function(e){return e&&"object"==typeof e},util.isset=util.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},util.Buffer=function(){try{var e=util.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),util._Buffer_from=null,util._Buffer_allocUnsafe=null,util.newBuffer=function(e){return"number"==typeof e?util.Buffer?util._Buffer_allocUnsafe(e):new util.Array(e):util.Buffer?util._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},util.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,util.Long=util.global.dcodeIO&&util.global.dcodeIO.Long||util.global.Long||util.inquire("long"),util.key2Re=/^true|false|0|1$/,util.key32Re=/^-?(?:0|[1-9][0-9]*)$/,util.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,util.longToHash=function(e){return e?util.LongBits.from(e).toHash():util.LongBits.zeroHash},util.longFromHash=function(e,t){var r=util.LongBits.fromHash(e);return util.Long?util.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},util.merge=merge,util.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},util.newError=newError,util.ProtocolError=newError("ProtocolError"),util.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},util.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},util.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},util._configure=function(){var e=util.Buffer;e?(util._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},util._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):util._Buffer_from=util._Buffer_allocUnsafe=null};

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./longbits":39,"@protobufjs/aspromise":1,"@protobufjs/base64":2,"@protobufjs/eventemitter":4,"@protobufjs/float":6,"@protobufjs/inquire":7,"@protobufjs/pool":9,"@protobufjs/utf8":10}],41:[function(require,module,exports){
"use strict";module.exports=verifier;var Enum=require("./enum"),util=require("./util");function invalid(e,i){return e.name+": "+i+(e.repeated&&"array"!==i?"[]":e.map&&"object"!==i?"{k:"+e.keyType+"}":"")+" expected"}function genVerifyValue(e,i,r,t){if(i.resolvedType)if(i.resolvedType instanceof Enum){e("switch(%s){",t)("default:")("return%j",invalid(i,"enum value"));for(var n=Object.keys(i.resolvedType.values),a=0;a<n.length;++a)e("case %i:",i.resolvedType.values[n[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,t)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",t)("return%j",invalid(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",t,t,t,t)("return%j",invalid(i,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',t)("return%j",invalid(i,"number"));break;case"bool":e('if(typeof %s!=="boolean")',t)("return%j",invalid(i,"boolean"));break;case"string":e("if(!util.isString(%s))",t)("return%j",invalid(i,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',t,t,t)("return%j",invalid(i,"buffer"))}return e}function genVerifyKey(e,i,r){switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",invalid(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",invalid(i,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",invalid(i,"boolean key"))}return e}function verifier(e){var i=util.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&i("var p={}");for(var t=0;t<e.fieldsArray.length;++t){var n=e._fieldsArray[t].resolve(),a="m"+util.safeProp(n.name);if(n.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",a,n.name),n.map)i("if(!util.isObject(%s))",a)("return%j",invalid(n,"object"))("var k=Object.keys(%s)",a)("for(var i=0;i<k.length;++i){"),genVerifyKey(i,n,"k[i]"),genVerifyValue(i,n,t,a+"[k[i]]")("}");else if(n.repeated)i("if(!Array.isArray(%s))",a)("return%j",invalid(n,"array"))("for(var i=0;i<%s.length;++i){",a),genVerifyValue(i,n,t,a+"[i]")("}");else{if(n.partOf){var s=util.safeProp(n.partOf.name);1===r[n.partOf.name]&&i("if(p%s===1)",s)("return%j",n.partOf.name+": multiple values"),r[n.partOf.name]=1,i("p%s=1",s)}genVerifyValue(i,n,t,a)}n.optional&&i("}")}return i("return null")}

},{"./enum":16,"./util":38}],42:[function(require,module,exports){
"use strict";var wrappers=exports,Message=require("./message");wrappers[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var s="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===s.indexOf("/")&&(s="/"+s),this.create({type_url:s,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var p=this.lookup(s);p&&(e=p.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof Message){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),s=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),o["@type"]=s,o}return this.toObject(e,t)}};

},{"./message":22}],43:[function(require,module,exports){
"use strict";module.exports=Writer;var BufferWriter,util=require("./util/minimal"),LongBits=util.LongBits,base64=util.base64,utf8=util.utf8;function Op(t,i,r){this.fn=t,this.len=i,this.next=void 0,this.val=r}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function(){return util.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(t,i,r){i[r]=255&t}function writeVarint32(t,i,r){for(;t>127;)i[r++]=127&t|128,t>>>=7;i[r]=t}function VarintOp(t,i){this.len=t,this.next=void 0,this.val=i}function writeVarint64(t,i,r){for(;t.hi;)i[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[r++]=127&t.lo|128,t.lo=t.lo>>>7;i[r++]=t.lo}function writeFixed32(t,i,r){i[r]=255&t,i[r+1]=t>>>8&255,i[r+2]=t>>>16&255,i[r+3]=t>>>24}Writer.create=create(),Writer.alloc=function(t){return new util.Array(t)},util.Array!==Array&&(Writer.alloc=util.pool(Writer.alloc,util.Array.prototype.subarray)),Writer.prototype._push=function(t,i,r){return this.tail=this.tail.next=new Op(t,i,r),this.len+=i,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits.fromNumber(t)):this.uint32(t)},Writer.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},Writer.prototype.uint64=function(t){var i=LongBits.from(t);return this._push(writeVarint64,i.length(),i)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(t){var i=LongBits.from(t).zzEncode();return this._push(writeVarint64,i.length(),i)},Writer.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)},Writer.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(t){var i=LongBits.from(t);return this._push(writeFixed32,4,i.lo)._push(writeFixed32,4,i.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(t){return this._push(util.float.writeFloatLE,4,t)},Writer.prototype.double=function(t){return this._push(util.float.writeDoubleLE,8,t)};var writeBytes=util.Array.prototype.set?function(t,i,r){i.set(t,r)}:function(t,i,r){for(var e=0;e<t.length;++e)i[r+e]=t[e]};Writer.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this._push(writeByte,1,0);if(util.isString(t)){var r=Writer.alloc(i=base64.length(t));base64.decode(t,r,0),t=r}return this.uint32(i)._push(writeBytes,i,t)},Writer.prototype.string=function(t){var i=utf8.length(t);return i?this.uint32(i)._push(utf8.write,i,t):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var t=this.head,i=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=i,this.len+=r),this},Writer.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,i,r),r+=t.len,t=t.next;return i},Writer._configure=function(t){BufferWriter=t,Writer.create=create(),BufferWriter._configure()};

},{"./util/minimal":40}],44:[function(require,module,exports){
"use strict";module.exports=BufferWriter;var Writer=require("./writer");(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util=require("./util/minimal");function BufferWriter(){Writer.call(this)}function writeStringBuffer(r,t,e){r.length<40?util.utf8.write(r,t,e):t.utf8Write?t.utf8Write(r,e):t.write(r,e)}BufferWriter._configure=function(){BufferWriter.alloc=util._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util.Buffer&&util.Buffer.prototype instanceof Uint8Array&&"set"===util.Buffer.prototype.set.name?function(r,t,e){t.set(r,e)}:function(r,t,e){if(r.copy)r.copy(t,e,0,r.length);else for(var i=0;i<r.length;)t[e++]=r[i++]}},BufferWriter.prototype.bytes=function(r){util.isString(r)&&(r=util._Buffer_from(r,"base64"));var t=r.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,r),this},BufferWriter.prototype.string=function(r){var t=util.Buffer.byteLength(r);return this.uint32(t),t&&this._push(writeStringBuffer,t,r),this},BufferWriter._configure();

},{"./util/minimal":40,"./writer":43}],45:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var messageSchema={nested:{ActionTypes:{values:{GAMETICK:0,ASSIGN_ID:1,BECOME_TICKER:2,PONG:3}},Position:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}},Velocity:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}},Player:{fields:{id:{type:"uint32",id:1},name:{type:"string",id:2},type:{type:"string",id:3},position:{type:"Position",id:4},velocity:{type:"Velocity",id:5},width:{type:"int32",id:6},height:{type:"int32",id:7},rotation:{type:"int32",id:8},mass:{type:"int32",id:9},health:{type:"int32",id:10},depth:{type:"double",id:11},lifetime:{type:"int32",id:12},radius:{type:"double",id:13},isSensor:{type:"bool",id:14},isStatic:{type:"bool",id:15},destroyed:{type:"bool",id:16},owner:{type:"uint32",id:17},maxSpeed:{type:"int32",id:18},texture:{type:"Texture",id:19}}},Message:{fields:{id:{type:"uint32",id:1},action:{type:"ActionTypes",id:2},state:{rule:"repeated",type:"Player",id:3},lastProcessedInput:{type:"uint32",id:4}}},Texture:{fields:{key:{type:"string",id:1},url:{type:"string",id:2},frames:{rule:"repeated",type:"Frame",id:3},sprite:{type:"string",id:4},rate:{type:"int32",id:5}}},Frame:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}}}},_default=exports.default=messageSchema;

},{}],46:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _protobufjs=_interopRequireDefault(require("protobufjs")),_Message=_interopRequireDefault(require("./Message.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Schema=exports.default=function(){function e(){_classCallCheck(this,e),this.id=e.id}return _createClass(e,[{key:"init",value:function(e){this.game=e,e.schemaReady=!0;var t=_protobufjs.default.Root.fromJSON(_Message.default);e.Message=t.lookupType("Message")}}]),e}();_defineProperty(Schema,"id","schema"),_defineProperty(Schema,"removable",!1);

},{"./Message.js":45,"protobufjs":11}]},{},[46])(46)
});
