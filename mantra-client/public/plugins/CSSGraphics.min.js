(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.PLUGINS || (g.PLUGINS = {})).CSSGraphics = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var GraphicInterface=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(){throw new Error("init method not implemented.")}},{key:"render",value:function(e){throw new Error("render method not implemented.")}},{key:"update",value:function(e){}},{key:"inflateGraphic",value:function(e){throw new Error("inflateGraphic method not implemented.")}},{key:"createGraphic",value:function(e,t){throw new Error("createGraphic method not implemented.")}},{key:"removeGraphic",value:function(e){throw new Error("removeGraphic method not implemented.")}},{key:"updateGraphic",value:function(e,t){throw new Error("updateGraphic method not implemented.")}}]),e}(),_default=exports.default=GraphicInterface;

},{}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _setTransform=_interopRequireDefault(require("./lib/camera/setTransform.js")),_rotateCameraOverTime=_interopRequireDefault(require("./lib/camera/rotateCameraOverTime.js")),_updateCameraPosition=_interopRequireDefault(require("./lib/camera/updateCameraPosition.js")),_updateEntityPosition=_interopRequireDefault(require("./lib/camera/updateEntityPosition.js")),_mouseWheelZoom=_interopRequireDefault(require("./lib/camera/mouseWheelZoom.js")),_zoom=_interopRequireDefault(require("./lib/camera/zoom.js")),_cameraShake=_interopRequireDefault(require("./lib/camera/cameraShake.js")),_applyThrow=_interopRequireDefault(require("./lib/camera/applyThrow.js")),_update=_interopRequireDefault(require("./lib/camera/update.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var CSSCamera=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.id=e.id,this.scene=t,this.config=i,this.isDragging=!1,this.dragInertia={x:0,y:0},this.isThrowing=!1,this.rotating=!1,this.mouseWheelEnabled=!0,this.mouseWheelZoom=_mouseWheelZoom.default.bind(this),this.zoom=_zoom.default.bind(this),this.setTransform=_setTransform.default.bind(this),this.updateEntityPosition=_updateEntityPosition.default.bind(this),this.cameraShake=_cameraShake.default.bind(this)}return _createClass(e,[{key:"init",value:function(e){var t=this;this.game=e,this.game.shakeCamera=_cameraShake.default.bind(this),e.zoom=this.zoom.bind(this),e.setZoom=this.zoom.bind(this),void 0===e.data.camera&&(e.data.camera={mode:"follow",position:{x:0,y:0}}),this.updateCameraPosition=_updateCameraPosition.default.bind(this),this.applyThrow=_applyThrow.default.bind(this),this.update=_update.default.bind(this),this.scene.setTransform=this.setTransform.bind(this),this.scene.updateEntityPosition=this.updateEntityPosition.bind(this),e.rotateCamera=_rotateCameraOverTime.default.bind(this),this.game.systemsManager.addSystem("graphics-css-camera",this);var i=document.getElementById("gameHolder");i||((i=document.createElement("div")).id="gameHolder",document.body.appendChild(i)),this.gameViewport=document.getElementById("gameHolder"),this.gameViewport.style.transformOrigin="center center",this.initMouseWheelZoomControls(),this.config.initialZoom&&this.zoom(this.config.initialZoom),e.on("entityInput::handleInputs",function(i,o,r){if(o.mouse){o.mouse.buttons.RIGHT,o.mouse.buttons.MIDDLE,o.mouse.dx=o.mouse.dx||0,o.mouse.dy=o.mouse.dy||0;var a=1/e.data.camera.currentZoom||4.5,n=o.mouse.dx*a,s=o.mouse.dy*a;t.updateCameraPosition(-n,-s,o.mouse.isDragging)}})}},{key:"resetCameraState",value:function(){this.game.data.camera.offsetX=0,this.game.data.camera.offsetY=0}},{key:"initMouseWheelZoomControls",value:function(){document.addEventListener("wheel",this.mouseWheelZoom,{passive:!1}),this.scene.mouseWheelEnabled=!0}},{key:"rotateCamera",value:function(e){"number"==typeof e?this.gameViewport.style.transform="rotate(".concat(e,"deg)"):console.error("Invalid angle for rotateCamera. Must be a number.")}},{key:"cancelThrow",value:function(){this.isThrowing=!1,this.dragInertia={x:0,y:0}}},{key:"unload",value:function(){document.removeEventListener("wheel",this.mouseWheelZoom)}}]),e}();_defineProperty(CSSCamera,"id","css-camera");var _default=exports.default=CSSCamera;

},{"./lib/camera/applyThrow.js":4,"./lib/camera/cameraShake.js":5,"./lib/camera/mouseWheelZoom.js":6,"./lib/camera/rotateCameraOverTime.js":7,"./lib/camera/setTransform.js":8,"./lib/camera/update.js":9,"./lib/camera/updateCameraPosition.js":10,"./lib/camera/updateEntityPosition.js":11,"./lib/camera/zoom.js":12}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _GraphicsInterface2=_interopRequireDefault(require("../../lib/GraphicsInterface.js")),_CSSCamera=_interopRequireDefault(require("./CSSCamera.js")),_inflateBox=_interopRequireDefault(require("./lib/entity/inflateBox.js")),_inflateText=_interopRequireDefault(require("./lib/entity/inflateText.js")),_inflateGraphic=_interopRequireDefault(require("./lib/entity/inflateGraphic.js")),_inflateTexture=_interopRequireDefault(require("./lib/entity/inflateTexture.js")),_createGraphic=_interopRequireDefault(require("./lib/entity/createGraphic.js")),_updateGraphic=_interopRequireDefault(require("./lib/entity/updateGraphic.js")),_bindEntityEvents=_interopRequireDefault(require("./lib/entity/bindEntityEvents.js")),_bindYCraftEvents=_interopRequireDefault(require("./lib/entity/bindYCraftEvents.js")),_unload=_interopRequireDefault(require("./lib/unload.js")),_render=_interopRequireDefault(require("./lib/render.js")),_removeGraphic=_interopRequireDefault(require("./lib/entity/removeGraphic.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,i=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var CSSGraphics=function(e){_inherits(r,_GraphicsInterface2["default"]);var t=_createSuper(r);function r(){var e;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;return _classCallCheck(this,r),(e=t.call(this)).id=r.id,e.async=r.async,e.cameraPosition={x:0,y:0},e.mouseWheelEnabled=!1,e.createGraphic=_createGraphic.default.bind(_assertThisInitialized(e)),e.inflateBox=_inflateBox.default.bind(_assertThisInitialized(e)),e.inflateText=_inflateText.default.bind(_assertThisInitialized(e)),e.inflateGraphic=_inflateGraphic.default.bind(_assertThisInitialized(e)),e.inflateTexture=_inflateTexture.default.bind(_assertThisInitialized(e)),e.updateGraphic=_updateGraphic.default.bind(_assertThisInitialized(e)),e.render=_render.default.bind(_assertThisInitialized(e)),e.removeGraphic=_removeGraphic.default.bind(_assertThisInitialized(e)),e.bindEntityEvents=_bindEntityEvents.default.bind(_assertThisInitialized(e)),e.bindYCraftEvents=_bindYCraftEvents.default.bind(_assertThisInitialized(e)),e.unload=_unload.default.bind(_assertThisInitialized(e)),e.depthChart=["background","border","wire","PART","TEXT","PLAYER","BLOCK","FIRE","WARP","NOTE"],e}return _createClass(r,[{key:"init",value:function(e){this.game=e;var t=new _CSSCamera.default(this,{initialZoom:1});window.innerHeight;this.game.use(t),e.camera=t,this.initCSSRenderDiv(),e.graphics.push(this),this.game.systemsManager.addSystem("graphics-css",this),e.emit("plugin::ready::graphics-css",this),e.loadingPluginsCount--,this.game.data.camera.offsetX=0,this.game.data.camera.offsetY=0,document.body.style.cursor="default"}},{key:"initCSSRenderDiv",value:function(){var e=document.getElementById("gameHolder");e||((e=document.createElement("div")).id="gameHolder",document.body.appendChild(e));var t=document.getElementById("css-render-div");t||((t=document.createElement("div")).id="css-render-div",t.className="render-div",t.style.transformOrigin="center center",e.appendChild(t)),this.renderDiv=t}}]),r}();_defineProperty(CSSGraphics,"id","graphics-css"),_defineProperty(CSSGraphics,"removable",!1),_defineProperty(CSSGraphics,"async",!0);var _default=exports.default=CSSGraphics;

},{"../../lib/GraphicsInterface.js":1,"./CSSCamera.js":2,"./lib/entity/bindEntityEvents.js":13,"./lib/entity/bindYCraftEvents.js":14,"./lib/entity/createGraphic.js":15,"./lib/entity/inflateBox.js":16,"./lib/entity/inflateGraphic.js":17,"./lib/entity/inflateText.js":18,"./lib/entity/inflateTexture.js":19,"./lib/entity/removeGraphic.js":20,"./lib/entity/updateGraphic.js":21,"./lib/render.js":22,"./lib/unload.js":23}],4:[function(require,module,exports){
"use strict";function applyThrow(){if(this.isThrowing){var t=this.game;t.data.camera.offsetX+=this.dragInertia.x,t.data.camera.offsetY+=this.dragInertia.y,this.dragInertia.x*=.985,this.dragInertia.y*=.985,Math.abs(this.dragInertia.x)>.1||Math.abs(this.dragInertia.y)>.1?requestAnimationFrame(this.applyThrow.bind(this)):this.isThrowing=!1,this.isThrowing}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=applyThrow;

},{}],5:[function(require,module,exports){
"use strict";function cameraShake(a){var t=this,e=a.initialIntensity,n=void 0===e?100:e,r=a.duration,o=void 0===r?777:r,i=document.getElementById("gameHolder");if(i){if("true"!==i.dataset.isShaking){i.dataset.isShaking="true";var s=i.style.transform,d=Date.now();!function a(){var e=Date.now()-d,r=o-e;if(r<=0)return i.style.transform=s,void(i.dataset.isShaking="false");var c=n*(r/o),m=c*Math.sin(e/100)*(Math.random()>.5?1:-1),l=c*Math.cos(e/100)*(Math.random()>.5?1:-1);i.style.transform="".concat(s," translate(").concat(m,"px, ").concat(l,"px)"),Object.keys(t.game.data.ents._).forEach(function(a){var e=t.game.data.ents._[a];if("PARTICLE"===e.type||"STAR"===e.type||"HEXAPOD"===e.type||"DEMON"===e.type||"NONE"===e.type){var n=Math.random()*c-c/2,r=Math.random()*c-c/2;n*=.01,r*=.01,game.applyForce(a,{x:n,y:r})}}),requestAnimationFrame(a)}()}}else console.log("Warning: could not find gameHolder div, cannot apply camera shake")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=cameraShake;

},{}],6:[function(require,module,exports){
"use strict";function cssMouseWheelZoom(e){var a=this.game;if(this.mouseWheelEnabled&&(!a.data.camera||!0===a.data.camera.mouseWheelZoomEnabled)){e.preventDefault();var t=a.data.camera.currentZoom,o=.1,l=.1,s=2,r=(e.wheelDelta?e.wheelDelta:-e.detail)>0?1:-1,h=o*Math.log(t+1)/Math.log(s),m=Math.max(l,t+r*h);return this.zoom(m),!1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=cssMouseWheelZoom;

},{}],7:[function(require,module,exports){
"use strict";function rotateCameraOverTime(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1100;if("number"==typeof e&&"number"==typeof r){if(!this.rotating){this.rotating=!0,this.game.data.camera.rotation=e;var a=this.game.data.camera.currentZoom,o=window.innerWidth/2,i=window.innerHeight/2;this.gameViewport.style.transition="transform ".concat(r,"ms"),this.gameViewport.style.transformOrigin="".concat(o,"px ").concat(i,"px"),this.gameViewport.style.transform="scale(".concat(a,") rotate(").concat(e,"deg)"),setTimeout(function(){t.gameViewport.style.transition="",t.rotating=!1,t.gameViewport.style.transformOrigin="50% 50%",t.gameViewport.style.transform="scale(".concat(a,") rotate(",0,"deg)")},r)}}else console.error("Invalid arguments for rotateCameraOverTime. Both targetAngle and duration must be numbers.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=rotateCameraOverTime;

},{}],8:[function(require,module,exports){
"use strict";function setTransform(t,e,r,a,o,n){var s=e.dataset.rotation||0;e.style.backgroundImage&&e.style.backgroundImage;o&&(s=n,e.dataset.rotation=n);var c="translate(".concat(truncateToPrecision(r,2),"px, ").concat(truncateToPrecision(a,2),"px)");"PLAYER"!==t.type&&(c+=" rotate(".concat(s,"deg)")),e.style.transform!==c&&(e.style.transform=c)}function truncateToPrecision(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setTransform;

},{}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=update;var _zoom=_interopRequireDefault(require("./zoom.js"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function update(){var a=this.game,t=this.game.getEntity(a.currentPlayerId);a.data.camera.currentZoom,window.innerHeight,window.innerWidth,this.game.data.camera.currentZoom;"number"!=typeof a.data.camera.offsetX&&(a.data.camera.offsetX=0),"number"!=typeof a.data.camera.offsetY&&(a.data.camera.offsetY=0),"number"!=typeof a.data.camera.offsetX&&(a.data.camera.offsetX=0),"number"!=typeof a.data.camera.offsetY&&(a.data.camera.offsetY=0);var e=0,r=0;"follow"===this.game.data.camera.mode&&t&&t.position&&(e=t.position.x,r=t.position.y),this.scene.cameraPosition.x=e+a.data.camera.offsetX,this.scene.cameraPosition.y=r+a.data.camera.offsetY;var o=window.innerWidth/2,i=window.innerHeight/2,s={x:this.scene.cameraPosition.x-o,y:this.scene.cameraPosition.y-i};s.x*=this.game.data.camera.currentZoom,s.y*=this.game.data.camera.currentZoom;var n=window.innerWidth/this.game.data.camera.currentZoom,m=window.innerHeight/this.game.data.camera.currentZoom,c=(window.innerWidth,(window.innerHeight-m)/2);this.game.data.camera.currentZoom,c*=this.game.data.camera.currentZoom,s.y+=c,this.scene.renderDiv&&setTransform(this.scene.renderDiv,-s.x,-s.y,this.game.data.camera.currentZoom,0),this.game.data.camera.position=this.scene.cameraPosition}function setTransform(a,t,e,r,o){var i=parseFloat(a.dataset.lastOffsetX)||0,s=parseFloat(a.dataset.lastOffsetY)||0,n=parseFloat(a.dataset.lastZoom)||1,m=parseFloat(a.dataset.lastRotation)||0;t=Number.isFinite(t)?t:i,e=Number.isFinite(e)?e:s,r=Number.isFinite(r)&&r>0?r:n,o=Number.isFinite(o)?o:m,t===i&&e===s&&r===n&&o===m||(a.style.transform="translate(".concat(t,"px, ").concat(e,"px) scale(").concat(r,") rotate(").concat(o,"deg)"),a.dataset.lastOffsetX=t.toString(),a.dataset.lastOffsetY=e.toString(),a.dataset.lastZoom=r.toString(),a.dataset.lastRotation=o.toString())}

},{"./zoom.js":12}],10:[function(require,module,exports){
"use strict";function updateCameraPosition(i,t,a){var e=this.game;this.isDragging&&!a&&this.cancelThrow(),a&&(this.isDragging=!0,"number"==typeof i&&(e.data.camera.offsetX+=i),"number"==typeof t&&(e.data.camera.offsetY+=t)),!this.isDragging||a||0===i&&0===t||(this.isThrowing=!0,this.isDragging=!1,Math.abs(i)>2&&(this.dragInertia.x=1.6*i),Math.abs(t)>2&&(this.dragInertia.y=1.6*t),requestAnimationFrame(this.applyThrow.bind(this))),a||(this.isDragging=!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=updateCameraPosition;

},{}],11:[function(require,module,exports){
"use strict";function updateEntityPosition(t,i){var e=i.position,n=i.rotation,s=(i.type,i.width),o=i.height;"number"==typeof i.radius&&(s=i.radius,o=i.radius);window.outerWidth,window.outerHeight;var r=e.x-s/2,a=e.y-o/2,d=n*(180/Math.PI);return this.setTransform(i,t,r,a,n,d),t.style.display="",i.style&&"none"===i.style.display&&(t.style.display="none"),t}function isWithinFieldOfView(t,i,e,n,s,o,r){var a=i.x+n/2,d=i.y+s/2,u=a-e.x,y=d-e.y+100,l=Math.min(o,r);return Math.sqrt(u*u+y*y)<=l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=updateEntityPosition;

},{}],12:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=zoom;var minZoom=.1,maxZoom=10;function zoom(o){arguments.length>1&&void 0!==arguments[1]&&arguments[1];o<minZoom&&(o=minZoom),o>maxZoom&&(o=maxZoom),this.game.data.camera.currentZoom=o}

},{}],13:[function(require,module,exports){
"use strict";function bindEntityEvents(t,e){var n=this.game;e.addEventListener("pointerdown",function(e){var i=n.getEntity(t.id);n.emit("pointerDown",i,e)}),e.addEventListener("pointerup",function(e){var i=n.getEntity(t.id);n.emit("pointerUp",i,e)}),e.addEventListener("pointermove",function(e){var i=n.getEntity(t.id);n.emit("pointerMove",i,e)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=bindEntityEvents;

},{}],14:[function(require,module,exports){
"use strict";function bindYCraftEvents(t,e){e.addEventListener("mouseover",function(){e.style.boxShadow="5px 5px 10px rgba(0,0,0,0.5)";var a=game.getEntity(t.id),r=(a.yCraft.part.name,a.yCraft.part.type);a.yCraft.part;"MotionDetector"===r&&a.yCraft.part.onFn()}),e.addEventListener("mouseout",function(){e.style.boxShadow=""}),e.addEventListener("pointerdown",function(e){var a=game.getEntity(t.id),r=(a.yCraft.part.name,a.yCraft.part.type);a.yCraft.part;"Button"===r&&a.yCraft.part.press(),a&&a.yCraft&&a.yCraft.part.toggle&&a.yCraft.part.toggle()}),e.addEventListener("pointerup",function(e){var a=game.getEntity(t.id);a.yCraft.part.name;"Button"===a.yCraft.part.type&&a&&a.yCraft&&a.yCraft.part.release&&a.yCraft.part.release()})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=bindYCraftEvents;

},{}],15:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function createGraphic(t){if(!0!==t.destroyed){var e=document.createElement("div");switch(e.id="entity-".concat(t.id),e.setAttribute("mantra-id",t.id),e.className="entity-element",e.style.position="absolute",void 0!==t.rotation&&null!==t.rotation&&("object"===_typeof(t.rotation)?t.rotation=t.rotation.x:t.rotation=t.rotation),t.type){case"BULLET":t.radius;e.style.width=t.radius+"px",e.style.height=t.radius+"px",this.inflateBox(e,t);break;case"PLAYER":e.style.width=t.width+"px",e.style.height=t.height+"px",this.inflateBox(e,t);break;case"TEXT":e=this.inflateText(e,t);break;default:"PART"===t.type&&"Display"===t.name?this.inflateText(e,t):this.inflateBox(e,t)}if(void 0!==t.radius&&(e.style.width=t.radius+"px",e.style.height=t.radius+"px",e.style.borderRadius="50%"),void 0!==t.color&&null!==t.color)t.color.toString(16),Math.floor(16777215*Math.random()).toString(16);return this.renderDiv.appendChild(e),this.updateEntityPosition(e,t),e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createGraphic;

},{}],16:[function(require,module,exports){
"use strict";function inflateBox(e,t){this.game.getTexture;var i=this.depthChart,s="white";if(void 0!==t.color&&null!==t.color&&(s="#"+t.color.toString(16)),"number"==typeof t.radius?(e.style.width=t.radius+"px",e.style.height=t.radius+"px"):(e.style.width=t.width+"px",e.style.height=t.height+"px"),e.style.zIndex=t.position.z,"PART"===t.type){switch(t.name){case"Wire":case"Display":e.style.zIndex=-1;break;default:e.style.zIndex=i.indexOf("PART")}this.bindYCraftEvents(t,e)}return e.style.border="1px solid black",e.style.background=s,t.style&&Object.keys(t.style).forEach(function(i){e.style[i]=t.style[i]}),"BLOCK"===t.type&&t.kind,this.updateEntityPosition(e,t),e}function tileFlip(e,t,i,s){var a=i(s.texture),n=Math.abs(s.position.x)+Math.abs(s.position.y);n/=500,n=Math.max(n,.1),n=Math.min(n,3.3);var l=document.createElement("div");l.style.position="relative",l.style.width="100%",l.style.height="100%",l.style.perspective="1000px";var o=document.createElement("div");o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.backfaceVisibility="hidden",o.style.animation="flip ".concat(n,"s ease"),o.style.background="url('".concat(a.url,"')"),o.style.backgroundRepeat="no-repeat",o.style.backgroundSize="cover";var r=document.createElement("div");r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.backfaceVisibility="hidden",r.style.animation="flip ".concat(n,"s ease"),r.style.transform="rotateY(180deg)",r.style.background=t,l.appendChild(o),l.appendChild(r),e.appendChild(l),l.addEventListener("animationend",function(){e.style.background="url('".concat(a.url,"')"),e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover",o.style.animation="",o.style.transform="",r.style.animation="",r.style.transform="",l.remove()})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=inflateBox;

},{}],17:[function(require,module,exports){
"use strict";function inflateEntity(t,e){var i;t.graphics&&t.graphics["graphics-css"]?i=this.updateGraphic(t,e):(i=this.createGraphic(t),this.game.components.graphics.set([t.id,"graphics-css"],i)),i&&this.inflateTexture(t,i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=inflateEntity;

},{}],18:[function(require,module,exports){
"use strict";function inflateText(t,e){this.depthChart;if(t.innerText=e.text,e.style)for(var r in e.style)t.style[r]=e.style[r];if(e.width&&(t.style.width=e.width+"px"),e.color&&"number"==typeof e.color){var o="#"+e.color.toString(16);t.style.color=o}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=inflateText;

},{}],19:[function(require,module,exports){
"use strict";function inflateTexture(e,t){if(e.texture){var r=this.game,a=r.getTexture(e.texture);if(a){var i=a.url,u=a.sprite,n=void 0===u?{x:0,y:0}:u,s=a.frames,p=a.rate,x=a.playing,o=void 0===x||x,l=t.style.backgroundImage.slice(5,-2),c=t.getAttribute("data-texture-sprite"),d=e.texture.sprite,y=l!==i||c!==d;if(t.style.backgroundImage.includes(i)&&!y||(Array.isArray(s)&&s.length>0?n=s[0]:"number"==typeof e.texture.frame&&(n=s[e.texture.frame]),applyTextureStyles(a,t,i,n,e)),Array.isArray(s)&&o){var f=parseInt(t.getAttribute("data-frame-index"),10)||0,g=s[f];"number"!=typeof p&&(p=30),r.tick%p==0&&(g&&(n=g,f=f>=s.length-1?0:f+1,t.setAttribute("data-texture-sprite",a.sprite.name)),t.setAttribute("data-frame-index",f),applyTextureStyles(a,t,i,n,e))}else applyTextureStyles(a,t,i,n,e)}}}function applyTextureStyles(e,t,r,a,i){Object.assign(t.style,{background:"url('".concat(r,"') no-repeat ").concat(a.x,"px ").concat(a.y,"px"),border:"none",zIndex:i.position.z,borderRadius:"0px",backgroundSize:e.frames?"":"".concat(i.width,"px ").concat(i.height,"px")})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=inflateTexture;

},{}],20:[function(require,module,exports){
"use strict";function removeGraphic(e){var s=this.game.getEntity(e);if(s&&s.graphics&&s.graphics["graphics-css"]){var r=document.getElementById("css-render-div");r&&r.contains(s.graphics["graphics-css"])&&s.graphics["graphics-css"].remove()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=removeGraphic;

},{}],21:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function updateGraphic(t){this.game;void 0!==t.rotation&&null!==t.rotation&&("object"===_typeof(t.rotation)?t.rotation=t.rotation.x:t.rotation=t.rotation);var e=document.getElementById("entity-".concat(t.id));if(e){if(void 0!==t.color&&null!==t.color){var o="#"+t.color.toString(16);e.style.background=o}if("number"==typeof t.position.z&&(e.style.zIndex=t.position.z),"TEXT"===t.type&&void 0!==t.text&&null!==t.text&&e.innerHTML!==t.text&&(e.innerHTML=t.text),void 0!==t.width&&(e.style.width=t.width+"px"),void 0!==t.height&&(e.style.height=t.height+"px"),"number"!=typeof t.radius);else{var i=2*t.radius;e.style.width=i+"px",e.style.height=i+"px"}return"object"===_typeof(t.size)&&(void 0!==t.size.width&&(e.style.width=t.size.width+"px"),void 0!==t.size.height&&(e.style.height=t.size.height+"px")),t.style&&Object.keys(t.style).forEach(function(o){e.style[o]=t.style[o]}),this.updateEntityPosition(e,t)}return this.createGraphic(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=updateGraphic;

},{}],22:[function(require,module,exports){
"use strict";function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,a,o,i,l=[],u=!0,f=!1;try{if(o=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(r){f=!0,a=r}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(f)throw a}}return l}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return i=r.done,r},e:function(r){l=!0,o=r},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw o}}}}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function render(r,e){var t=this;if(this.game.config.useFoV){new Map;var n=this.game.data.currentPlayer;r.getPlayerFieldOfView(n,r.data.fieldOfView,!1).forEach(function(r){var n=t.game.entities.get(r);n&&t.inflateGraphic(n,e)})}else{var a,o=_createForOfIteratorHelper(this.game.entities.entries());try{for(o.s();!(a=o.n()).done;){var i=_slicedToArray(a.value,2),l=i[0],u=(i[1],this.game.entities.get(l));this.inflateGraphic(u,e)}}catch(r){o.e(r)}finally{o.f()}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=render;

},{}],23:[function(require,module,exports){
"use strict";function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,a,o,i,l=[],s=!0,u=!1;try{if(o=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=o.call(t)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(r){u=!0,a=r}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return i=r.done,r},e:function(r){l=!0,o=r},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw o}}}}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function unload(){var r=this;this.game.zoom(1),this.game.graphics=this.game.graphics.filter(function(e){return e.id!==r.id}),delete this.game._plugins.CSSGraphics,this.game.systemsManager.removeSystem("graphics-css-camera"),this.mouseWheelEnabled=!1;var e,t=_createForOfIteratorHelper(this.game.entities.entries());try{for(t.s();!(e=t.n()).done;){var n=_slicedToArray(e.value,2),a=n[0],o=n[1];o.graphics&&o.graphics["graphics-css"]&&(this.removeGraphic(a),delete o.graphics["graphics-css"])}}catch(r){t.e(r)}finally{t.f()}var i=document.getElementById("css-render-canvas");i&&i.remove()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=unload;

},{}]},{},[3])(3)
});
